<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>è–©è«¾ç“¦ç¾©å¼å»šæˆ¿ - SANOVA KITCHEN</title>
  
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <style>
    :root {
      --brand-main: #B91C1C;
      --brand-light: #FEE2E2;
      --bg-color: #f8fafc;
    }
    body { 
      font-family: -apple-system, BlinkMacSystemFont, "Microsoft JhengHei", "PingFang TC", sans-serif; 
      background-color: var(--bg-color); 
      margin: 0; padding: 0; overflow-x: hidden;
      -webkit-tap-highlight-color: transparent;
    }
    .animate-fade-in { animation: fadeIn 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
    
    .glass { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); }
    .no-scrollbar::-webkit-scrollbar { display: none; }
    
    /* Loading Overlay */
    #loading-overlay {
      position: fixed; inset: 0; background: #fff; display: flex; flex-direction: column;
      align-items: center; justify-content: center; z-index: 9999;
      transition: opacity 0.6s ease;
    }
    
    /* UI Components */
    .input-group { @apply mb-5 relative; }
    .input-label { @apply absolute -top-2.5 left-4 bg-white px-2 text-xs font-bold text-slate-500 transition-all; }
    .input-field { @apply w-full p-4 pl-12 border-2 border-slate-100 rounded-2xl bg-white focus:border-red-500 focus:ring-4 focus:ring-red-50 outline-none transition-all text-sm font-bold text-slate-700 placeholder-slate-300 shadow-sm; }
    .input-icon { @apply absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 w-5 h-5; }

    /* Modern Buttons */
    .btn-base { @apply flex items-center justify-center gap-2 font-black tracking-wide rounded-2xl transition-all active:scale-95 disabled:opacity-50 disabled:active:scale-100 disabled:cursor-not-allowed cursor-pointer select-none; }
    .btn-primary { @apply btn-base w-full py-4 text-white text-lg bg-gradient-to-br from-red-600 via-red-700 to-red-800 shadow-xl shadow-red-600/30 border border-white/10 relative overflow-hidden; }
    .btn-primary::before { content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent); transition: 0.5s; }
    .btn-primary:not(:disabled):hover::before { left: 100%; transition: 0.7s; }
    
    .btn-secondary { @apply btn-base w-full py-3 bg-white border-2 border-slate-200 text-slate-600 hover:bg-slate-50 hover:border-slate-300 shadow-sm; }
    .btn-danger { @apply btn-base w-full py-3 bg-red-50 border-2 border-red-100 text-red-600 hover:bg-red-100 hover:border-red-200 shadow-sm; }
    .stepper-btn { @apply w-12 h-12 rounded-full bg-white border-2 border-slate-100 text-slate-600 font-black text-xl flex items-center justify-center active:bg-red-50 active:border-red-200 active:text-red-600 transition-all shadow-sm hover:shadow-md; }
    .card { @apply bg-white p-6 rounded-[2rem] shadow-lg border border-slate-100; }
  </style>
</head>
<body>
  <div id="loading-overlay">
    <img src="https://i.ibb.co/wZmHF1MQ/line-oa-chat-260112-192432.jpg" class="w-[90%] max-w-2xl h-auto object-contain animate-pulse rounded-2xl shadow-2xl" alt="Loading...">
  </div>

  <div id="root"></div>

  <script>
    window.process = window.process || { env: { API_KEY: '' } };
    setTimeout(() => {
        const el = document.getElementById('loading-overlay');
        if(el) el.style.display = 'none';
    }, 5000);
  </script>

  <script type="module">
    import React, { useState, useEffect, useMemo, useRef } from 'https://esm.sh/react@18.2.0';
    import ReactDOM from 'https://esm.sh/react-dom@18.2.0/client';

    const LIFF_ID = "2008861231-EA0Hpl68"; 
    const RESTAURANT_NAME = "è–©è«¾ç“¦ç¾©å¼å»šæˆ¿"; 
    const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxHOJOzIGqCnW-ttjB0_OeJ6eIz3iqF3dnYSwGeK4L2vRi6dEuWZ-i_DoM5pHjz9u7PlA/exec";
    const ADMIN_PHONES = ['0937942582', '0978375273', '0978375592'];

    // --- MOCK DATA ---
    const MOCK_FAQS = [
        { å•é¡Œ: "å¦‚ä½•é€²è¡Œç·šä¸Šè¨‚ä½ï¼Ÿ", å›ç­”: "è«‹é»é¸ä¸‹æ–¹é¸å–®çš„ã€Œç·šä¸Šè¨‚ä½ã€ï¼Œé¸æ“‡æ—¥æœŸã€æ™‚é–“èˆ‡äººæ•¸å¾Œå³å¯å®Œæˆé ç´„ã€‚" },
        { å•é¡Œ: "æœ‰ä½æ¶ˆé™åˆ¶å—ï¼Ÿ", å›ç­”: "æ¯äººæœ€ä½æ¶ˆè²»ç‚º 100 å…ƒ (120cm ä»¥ä¸‹å…’ç«¥å…ä½æ¶ˆ)ã€‚" },
        { å•é¡Œ: "å¯ä»¥æ”œå¸¶å¯µç‰©å—ï¼Ÿ", å›ç­”: "ç‚ºç¶­è­·ç”¨é¤ç’°å¢ƒï¼Œç›®å‰æš«ä¸é–‹æ”¾æ”œå¸¶å¯µç‰©å…¥å…§(å°ç›²çŠ¬é™¤å¤–)ï¼Œæ•¬è«‹è¦‹è«’ã€‚" },
        { å•é¡Œ: "æ˜¯å¦æœ‰å£½æ˜Ÿå„ªæƒ ï¼Ÿ", å›ç­”: "ç•¶æœˆå£½æ˜ŸåŠ å…¥æœƒå“¡ä¸¦å‡ºç¤ºè­‰ä»¶ï¼Œå¯äº«å°ˆå±¬æŠ˜æ‰£å„ªæƒ ï¼è©³æƒ…è«‹è¦‹æœƒå“¡ä¸­å¿ƒã€‚" }
    ];
    const MOCK_PROMOS = [
        { é¡å‹: 'HOT', æ¨™é¡Œ: 'åŠ å…¥æœƒå“¡äº«å„ªæƒ ', å…§å®¹: 'ç«‹å³è¨»å†Šæœƒå“¡ï¼Œä¸å®šæœŸäº«æœ‰å°ˆå±¬æŠ˜æ‰£èˆ‡å£½æ˜Ÿå¥½ç¦®ï¼', åœ–ç‰‡ç¶²å€: 'https://images.unsplash.com/photo-1552566626-52f8b828add9?auto=format&fit=crop&q=80&w=600' },
        { é¡å‹: 'NEW', æ¨™é¡Œ: 'å­£ç¯€é™å®šé¤é»ä¸Šå¸‚', å…§å®¹: 'ä¸»å»šç‰¹è£½å­£ç¯€æ–™ç†ï¼Œé™æ™‚ä¾›æ‡‰ä¸­ï¼Œæ­¡è¿åšé®®ï¼', åœ–ç‰‡ç¶²å€: 'https://images.unsplash.com/photo-1504674900247-0877df9cc836?auto=format&fit=crop&q=80&w=600' }
    ];
    const MOCK_MENU = [
        { é¡åˆ¥: 'ä¸»å»šæ¨è–¦', ç”¢å“åç¨±: 'å®®ä¿è¾£å‘³é›ä¸ç¾©å¤§åˆ©éºµ', ç”¢å“åƒ¹æ ¼: 210, æ¨™ç±¤: 'è¾£' },
        { é¡åˆ¥: 'ä¸»å»šæ¨è–¦', ç”¢å“åç¨±: 'è’œé¦™ç™½é…’è›¤è £ç¾©å¤§åˆ©éºµ', ç”¢å“åƒ¹æ ¼: 250, æ¨™ç±¤: '' },
        { é¡åˆ¥: 'ç¾©å¤§åˆ©éºµ', å­é¡åˆ¥: 'ç™½é†¬', ç”¢å“åç¨±: 'å¥¶æ²¹åŸ¹æ ¹ç¾©å¤§åˆ©éºµ', ç”¢å“åƒ¹æ ¼: 180, æ¨™ç±¤: '' },
        { é¡åˆ¥: 'é£²å“', ç”¢å“åç¨±: 'å¯æ¨‚', ç”¢å“åƒ¹æ ¼: 50, æ¨™ç±¤: '' }
    ];

    const isValidPhone = (phone) => /^09\d{8}$/.test(phone.replace(/\D/g, ''));
    const getFormattedDate = (dateStr) => {
        if (!dateStr) return "";
        const date = new Date(dateStr);
        const dayNames = ["é€±æ—¥", "é€±ä¸€", "é€±äºŒ", "é€±ä¸‰", "é€±å››", "é€±äº”", "é€±å…­"];
        return `${date.getMonth() + 1}æœˆ${date.getDate()}æ—¥ (${dayNames[date.getDay()]})`;
    };

    const Icon = ({ name, className }) => {
      const paths = {
        home: "M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6",
        menu: "M4 6h16M4 12h16M4 18h16",
        calendar: "M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2-2H5a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z",
        user: "M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z",
        back: "M10 19l-7-7m0 0l7-7m-7 7h18",
        info: "M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z",
        phone: "M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z",
        chart: "M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z",
        gift: "M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7",
        sparkles: "M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-7.714 2.143L11 21l-2.286-6.857L1 12l7.714-2.143L11 3z",
        question: "M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z",
        x: "M6 18L18 6M6 6l12 12",
        download: "M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4",
        edit: "M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z",
        printer: "M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z",
        check: "M5 13l4 4L19 7",
        mail: "M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z",
        cake: "M21 15.546c-.523 0-1.046.151-1.5.454a2.704 2.704 0 01-3 0 2.704 2.704 0 00-3 0 2.704 2.704 0 01-3 0 2.704 2.704 0 00-3 0 2.704 2.704 0 01-3 0 2.701 2.701 0 00-1.5-.454M9 6v2m3-2v2m3-2v2M9 3h.01M12 3h.01M15 3h.01M21 21v-7a2 2 0 00-2-2H5a2 2 0 00-2 2v7h18zm-3-9v-2a2 2 0 00-2-2H8a2 2 0 00-2 2v2h12z",
        trash: "M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16",
        map: "M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z M15 11a3 3 0 11-6 0 3 3 0 016 0z",
        facebook: "M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z",
        search: "M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",
        plus: "M12 4v16m8-8H4",
        phone_fill: "M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"
      };
      return React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", className, fill: name.includes('fill') ? "currentColor" : (name === 'facebook' ? "currentColor" : "none"), viewBox: "0 0 24 24", stroke: (name.includes('fill') || name === 'facebook') ? "none" : "currentColor", strokeWidth: "2" },
        React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: paths[name] || "" })
      );
    };

    const runGAS = async (action, params = {}) => {
      try {
        const response = await fetch(GOOGLE_SCRIPT_URL, {
          method: 'POST',
          headers: { 'Content-Type': 'text/plain;charset=utf-8' },
          body: JSON.stringify({ action, ...params })
        });
        return await response.json();
      } catch (err) {
        return { status: 'error', message: 'é€£ç·šä¸ç©©å®šï¼Œè«‹ç¨å¾Œå†è©¦' };
      }
    };

    // --- Components ---
    
    const ZoomableImage = ({ src }) => {
        const handleZoom = () => { Swal.fire({ imageUrl: src, imageAlt: 'Menu Image', width: '95%', padding: 0, showConfirmButton: false, showCloseButton: true, customClass: { popup: 'rounded-2xl overflow-hidden' } }); };
        return React.createElement("div", { className: "relative group rounded-2xl overflow-hidden shadow-md border border-slate-100" }, 
            React.createElement("img", { src: src, className: "w-full h-auto", loading: "lazy" }), 
            React.createElement("div", { className: "absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-4" }, 
                React.createElement("button", { onClick: handleZoom, className: "p-3 bg-white rounded-full text-slate-800 hover:scale-110 transition-transform shadow-lg" }, React.createElement(Icon, { name: "search", className: "w-6 h-6" })), 
                React.createElement("a", { href: src, target: "_blank", rel: "noopener noreferrer", className: "p-3 bg-white rounded-full text-slate-800 hover:scale-110 transition-transform shadow-lg" }, React.createElement(Icon, { name: "download", className: "w-6 h-6" }))
            )
        );
    };

    const ProductModal = ({ item, onClose, onAdd }) => {
        const [qty, setQty] = useState(1); 
        const [noodle, setNoodle] = useState(null); 
        const [combo, setCombo] = useState(null); 
        const [drink, setDrink] = useState(null); 
        const [spice, setSpice] = useState((item.æ¨™ç±¤ || '').includes('è¾£') ? 'å›ºå®šè¾£åº¦' : 'ä¸è¾£');

        const isPasta = (item.é¡åˆ¥ || '').includes('ç¾©å¤§åˆ©éºµ');
        const noodleOptions = [{ id: 'penne', name: 'ç­†å°–éºµ', price: 0 }, { id: 'risotto', name: 'ç‡‰é£¯', price: 0 }, { id: 'angel', name: 'å¤©ä½¿ç´°éºµ', price: 10 }, { id: 'macaroni', name: 'é€šå¿ƒéºµ', price: 10 }, { id: 'linguine', name: 'ç´°æ‰éºµ', price: 10 }, { id: 'squid', name: 'å¢¨é­šéºµ', price: 40 }];
        const comboOptions = [{ id: 'none', name: 'å–®é»', price: 0 }, { id: 'value', name: 'è¶…å€¼å¥—é¤ (+éºµåŒ…/æ¿ƒæ¹¯/é£²å“)', price: 79 }, { id: 'puff', name: 'é…¥çš®å¥—é¤ (+éºµåŒ…/é…¥çš®æ¹¯/é£²å“)', price: 129 }];
        const drinkOptions = ['å¯æ¨‚','é›ªç¢§','è˜‹æœè¥¿æ‰“','å¯çˆ¾å¿…æ€','ç´…èŒ¶(å†°)','ç´…èŒ¶(ç†±)','ç¶ èŒ¶(ç†±)','å¥¶èŒ¶(å†°)','å¥¶èŒ¶(ç†±)','æ¡‚èŠ±èœœèŒ¶(å†°)'];

        const canAdd = () => { if (isPasta && !noodle) return false; if (combo && combo.id !== 'none' && !drink) return false; return true; };
        
        const handleAdd = () => { 
            if (!canAdd()) return; 
            const finalPrice = item.ç”¢å“åƒ¹æ ¼ + (noodle?.price || 0) + (combo?.price || 0); 
            onAdd({ ...item, qty, noodle: noodle?.name, combo: combo?.name, drink, spice, finalPrice }); 
        };

        return React.createElement("div", { className: "fixed inset-0 z-[60] flex items-end sm:items-center justify-center pointer-events-none" }, 
            React.createElement("div", { className: "absolute inset-0 bg-black/60 pointer-events-auto backdrop-blur-sm", onClick: onClose }), 
            React.createElement("div", { className: "bg-white w-full sm:w-[90%] max-w-md rounded-t-[2rem] sm:rounded-[2rem] p-6 pointer-events-auto max-h-[85vh] overflow-y-auto animate-fade-in pb-20 relative" }, 
                React.createElement("button", { onClick: onClose, className: "absolute top-4 right-4 p-2 bg-slate-100 rounded-full hover:bg-slate-200" }, React.createElement(Icon, { name: "x", className: "w-5 h-5 text-slate-500" })), 
                React.createElement("h3", { className: "font-black text-xl mb-1 pr-8 text-slate-800" }, item.ç”¢å“åç¨±), 
                React.createElement("p", { className: "text-red-700 font-black text-2xl mb-6" }, `$${item.ç”¢å“åƒ¹æ ¼}`), 
                
                isPasta && React.createElement("div", { className: "mb-6" }, 
                    React.createElement("p", { className: "text-sm font-bold mb-3 flex items-center text-slate-700" }, "é¸æ“‡éºµæ¢", React.createElement("span", { className: "ml-2 text-[10px] text-red-500 bg-red-50 px-2 py-0.5 rounded border border-red-100" }, "å¿…é¸")), 
                    React.createElement("div", { className: "grid grid-cols-2 gap-3" }, 
                        noodleOptions.map(opt => React.createElement("button", { key: opt.id, onClick: () => setNoodle(opt), className: `py-3 rounded-xl text-xs font-bold border-2 transition-all ${noodle?.id === opt.id ? 'bg-red-50 border-red-500 text-red-700' : 'bg-white border-slate-100 text-slate-500'}` }, `${opt.name} ${opt.price > 0 ? `+$${opt.price}` : ''}`))
                    )
                ), 
                React.createElement("div", { className: "mb-6" }, 
                    React.createElement("p", { className: "text-sm font-bold mb-3 text-slate-700" }, "é¸æ“‡å¥—é¤"), 
                    React.createElement("div", { className: "space-y-2" }, 
                        comboOptions.map(opt => React.createElement("button", { key: opt.id, onClick: ()=>setCombo(opt), className: `w-full text-left p-3 rounded-xl border-2 transition-all flex justify-between ${combo?.id===opt.id ? 'border-red-500 bg-red-50 text-red-900' : 'border-slate-100'}` }, 
                            React.createElement("span", { className: "font-bold text-sm" }, opt.name), 
                            opt.price > 0 && React.createElement("span", { className: "font-bold" }, `+$${opt.price}`)
                        ))
                    )
                ), 
                combo && combo.id !== 'none' && React.createElement("div", { className: "mb-6" }, 
                    React.createElement("p", { className: "text-sm font-bold mb-3 text-slate-700" }, "é¸æ“‡é£²å“"), 
                    React.createElement("div", { className: "flex flex-wrap gap-2" }, 
                        drinkOptions.map(d => React.createElement("button", { key: d, onClick: ()=>setDrink(d), className: `px-3 py-2 rounded-lg text-xs font-bold border transition-all ${drink===d ? 'bg-red-600 text-white border-red-600' : 'bg-slate-50 text-slate-600 border-slate-200'}` }, d))
                    )
                ), 
                React.createElement("div", { className: "flex items-center justify-between mt-8 pt-4 border-t border-slate-100" }, 
                    React.createElement("div", { className: "flex items-center gap-4 bg-slate-50 rounded-full px-4 py-2 border border-slate-200" }, 
                        React.createElement("button", { onClick: () => setQty(Math.max(1, qty-1)), className: "font-black text-lg text-slate-700 w-6" }, "-"), 
                        React.createElement("span", { className: "font-black text-lg text-slate-900" }, qty), 
                        React.createElement("button", { onClick: () => setQty(qty+1), className: "font-black text-lg text-slate-700 w-6" }, "+")
                    ), 
                    React.createElement("button", { onClick: handleAdd, disabled: !canAdd(), className: "btn-primary w-auto px-8 rounded-full shadow-lg z-50 relative" }, "åŠ å…¥é é»")
                )
            )
        );
    };

    const HomeView = ({ data, setView }) => {
        const promos = (data.promotions && data.promotions.length > 0) ? data.promotions : MOCK_PROMOS;
        return React.createElement("div", { className: "animate-fade-in pb-32 p-6" }, 
            React.createElement("div", { className: "relative h-72 rounded-[2.5rem] overflow-hidden shadow-2xl shadow-red-900/20 mb-8 group" }, 
                React.createElement("img", { src: "https://i.ibb.co/qLFg7gSk/Gemini-Generated-Image-cmj4yzcmj4yzcmj4.png", className: "w-full h-full object-cover group-hover:scale-105 transition-transform duration-700" }), 
                React.createElement("div", { className: "absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent flex items-end p-8" }, 
                    React.createElement("div", null, 
                        React.createElement("h3", { className: "text-white font-black text-3xl tracking-tight drop-shadow-lg" }, "é“åœ°ç¾©å¼ï¼Œé‡‘é–€é£„é¦™"), 
                        React.createElement("p", { className: "text-xs text-white/80 uppercase tracking-widest mt-2 font-bold" }, "SANOVA KITCHEN")
                    )
                )
            ), 
            React.createElement("div", { className: "grid grid-cols-2 gap-4 mb-8" }, 
                [
                    { id: 'BOOKING', label: 'ç·šä¸Šè¨‚ä½', icon: 'calendar', color: 'from-red-600 to-red-800', sub: 'Book Now' }, 
                    { id: 'MENU', label: 'ç€è¦½èœå–®', icon: 'menu', color: 'from-amber-500 to-amber-700', sub: 'Our Menu' }, 
                    { id: 'MEMBER', label: 'æœƒå“¡ä¸­å¿ƒ', icon: 'user', color: 'from-slate-700 to-slate-900', sub: 'Member' }, 
                    { id: 'INFO', label: 'åº—å®¶è³‡è¨Š', icon: 'info', color: 'from-emerald-600 to-emerald-800', sub: 'Info' }, 
                    { id: 'PROMO', label: 'æ´»å‹•å„ªæƒ ', icon: 'sparkles', color: 'from-purple-600 to-purple-800', sub: 'News', action: () => document.getElementById('news-section').scrollIntoView({ behavior: 'smooth' }) }, 
                    { id: 'FAQ', label: 'å¸¸è¦‹å•é¡Œ', icon: 'question', color: 'from-blue-600 to-blue-800', sub: 'FAQ' }
                ].map(btn => React.createElement("button", { key: btn.id, onClick: btn.action || (() => setView(btn.id)), className: `relative overflow-hidden p-5 rounded-[2rem] shadow-lg active:scale-95 transition-all text-left group bg-gradient-to-br ${btn.color} border border-white/10` }, 
                    React.createElement("div", { className: "absolute right-[-15px] top-[-15px] opacity-20 rotate-12 group-hover:scale-110 transition-transform duration-500" }, React.createElement(Icon, { name: btn.icon, className: "w-24 h-24 text-white" })), 
                    React.createElement("div", { className: "relative z-10 text-white" }, 
                        React.createElement("div", { className: "bg-white/20 w-10 h-10 rounded-full flex items-center justify-center mb-3 backdrop-blur-sm" }, React.createElement(Icon, { name: btn.icon, className: "w-5 h-5 text-white" })), 
                        React.createElement("p", { className: "font-black text-lg leading-tight tracking-wide" }, btn.label), 
                        React.createElement("p", { className: "text-[10px] font-bold opacity-70 uppercase tracking-widest mt-1" }, btn.sub)
                    )
                ))
            ), 
            React.createElement("div", { id: "news-section", className: "mb-8" }, 
                React.createElement("h3", { className: "font-black text-xl mb-4 pl-2 text-slate-800" }, "æœ€æ–°æ´»å‹•èˆ‡å„ªæƒ "), 
                React.createElement("div", { className: "flex overflow-x-auto gap-4 no-scrollbar px-2 pb-4" }, 
                    promos.map((p, i) => React.createElement("div", { key: i, className: "w-72 flex-shrink-0 bg-white rounded-[2rem] overflow-hidden border border-slate-100 shadow-md hover:shadow-xl transition-shadow duration-300" }, 
                        React.createElement("div", { className: "h-40 overflow-hidden" }, React.createElement("img", { src: p.åœ–ç‰‡ç¶²å€, className: "w-full h-full object-cover hover:scale-110 transition-transform duration-700" })), 
                        React.createElement("div", { className: "p-5" }, 
                            React.createElement("span", { className: "text-[10px] bg-red-50 text-red-600 border border-red-100 px-2 py-1 rounded-full font-bold mb-2 inline-block" }, p.é¡å‹ || 'NEWS'), 
                            React.createElement("h4", { className: "font-black text-base text-slate-800 mb-1" }, p.æ¨™é¡Œ), 
                            React.createElement("p", { className: "text-xs text-slate-400 mt-1 leading-relaxed" }, p.å…§å®¹)
                        )
                    ))
                )
            )
        );
    };

    const MenuView = ({ menu, addToCart, cart, setView, onSubmitPreorder }) => {
        const displayMenu = (menu && menu.length > 0) ? menu : MOCK_MENU; 
        const [activeCat, setActiveCat] = useState("å…¨éƒ¨é¤é»"); 
        const [selectedItem, setSelectedItem] = useState(null); 
        const categories = ["å…¨éƒ¨é¤é»", "ç†±é–€æ¨è–¦", "ç™½é†¬", "èŒ„æ±", "é’é†¬", "å—ç“œ", "å’–å“©", "ä¸»å»šæ¨è–¦", "ç¾©å¼ç‡‰é£¯", "ç„—çƒ¤", "PIZZA", "å–®é»", "é£²å“"];
        
        const filteredItems = displayMenu.filter(i => { 
            if (activeCat === 'å…¨éƒ¨é¤é»') return true; 
            if (activeCat === 'ç†±é–€æ¨è–¦') return i.é¡åˆ¥ === 'ä¸»å»šæ¨è–¦' || i.é¡åˆ¥ === 'PIZZA'; 
            if (activeCat.includes('ç™½é†¬')) return i.é¡åˆ¥ === 'ç¾©å¤§åˆ©éºµ' && i.å­é¡åˆ¥ === 'ç™½é†¬'; 
            if (activeCat.includes('èŒ„æ±')) return i.é¡åˆ¥ === 'ç¾©å¤§åˆ©éºµ' && i.å­é¡åˆ¥ === 'èŒ„æ±'; 
            if (activeCat.includes('é’é†¬')) return i.é¡åˆ¥ === 'ç¾©å¤§åˆ©éºµ' && i.å­é¡åˆ¥ === 'é’é†¬'; 
            if (activeCat.includes('å—ç“œ')) return i.é¡åˆ¥ === 'ç¾©å¤§åˆ©éºµ' && i.å­é¡åˆ¥ === 'å—ç“œ'; 
            if (activeCat.includes('å’–å“©')) return i.é¡åˆ¥ === 'ç¾©å¤§åˆ©éºµ' && i.å­é¡åˆ¥ === 'å’–å“©'; 
            return i.é¡åˆ¥ === activeCat || i.å­é¡åˆ¥ === activeCat; 
        });

        const handleAddToCart = (p) => {
            addToCart(p);
            setSelectedItem(null); // Close modal
            Swal.fire({toast:true, position:'top', icon:'success', title:'å·²åŠ å…¥è³¼ç‰©è»Š', timer:1500, showConfirmButton:false});
        };

        return React.createElement("div", { className: "animate-fade-in pb-32" }, 
            React.createElement("div", { className: "p-4" }, 
                React.createElement("h3", { className: "font-black text-xl mb-3 text-slate-800" }, "å¯¦é«”èœå–®"), 
                React.createElement("div", { className: "space-y-4 mb-2" }, 
                    React.createElement(ZoomableImage, { src: "https://i.ibb.co/20D4YTL1/2025-page-0001.jpg" }), 
                    React.createElement(ZoomableImage, { src: "https://i.ibb.co/cfTdqxh/2025-page-0002.jpg" })
                )
            ), 
            React.createElement("div", { className: "sticky top-[72px] z-20 bg-white/95 backdrop-blur border-b border-slate-100 overflow-x-auto no-scrollbar flex p-3 gap-2" }, 
                categories.map(c => React.createElement("button", { key: c, onClick: () => setActiveCat(c), className: `px-5 py-2.5 rounded-full text-xs font-black whitespace-nowrap transition-all duration-300 cursor-pointer ${activeCat === c ? 'bg-slate-800 text-white shadow-lg shadow-slate-300' : 'bg-white border border-slate-100 text-slate-400'}` }, c))
            ), 
            React.createElement("div", { className: "p-4 space-y-4" }, 
                filteredItems.map((item, idx) => React.createElement("div", { key: idx, className: "flex gap-4 bg-white p-3 rounded-2xl border border-slate-100 shadow-sm hover:shadow-md transition-shadow" }, 
                    React.createElement("div", { className: "relative w-24 h-24 flex-shrink-0" }, 
                        React.createElement("img", { src: item.åœ–ç‰‡ç¶²å€ || "https://placehold.co/100x100?text=SANOVA", className: "w-full h-full object-cover rounded-xl" }), 
                        (item.æ¨™ç±¤ || '').length > 0 && React.createElement("div", { className: "absolute bottom-0 left-0 right-0 flex gap-1 p-1 bg-gradient-to-t from-black/60 to-transparent rounded-b-xl" }, 
                            item.æ¨™ç±¤.includes('è¾£') && React.createElement("span", { className: "text-[10px]" }, "ğŸŒ¶ï¸"), 
                            (item.æ¨™ç±¤.includes('ç´ ') || item.ç”¢å“åç¨±.includes('ç´ ')) && React.createElement("span", { className: "text-[10px]" }, "ğŸ¥¦")
                        )
                    ), 
                    React.createElement("div", { className: "flex-1 py-1 flex flex-col justify-between" }, 
                        React.createElement("div", null, 
                            React.createElement("h4", { className: "font-black text-slate-800 text-sm" }, item.ç”¢å“åç¨±), 
                            React.createElement("p", { className: "text-[10px] text-slate-400 mt-1 line-clamp-1" }, item.èªªæ˜)
                        ), 
                        React.createElement("div", { className: "flex justify-between items-center mt-2" }, 
                            React.createElement("p", { className: "text-red-700 font-black text-lg" }, `$${item.ç”¢å“åƒ¹æ ¼}`), 
                            React.createElement("button", { onClick: () => setSelectedItem(item), className: "bg-red-50 text-red-600 text-xs font-black px-4 py-2 rounded-full active:scale-95 transition-all border border-red-100 hover:bg-red-600 hover:text-white" }, "+ é¸è³¼")
                        )
                    )
                ))
            ), 
            selectedItem && React.createElement(ProductModal, { item: selectedItem, onClose: () => setSelectedItem(null), onAdd: handleAddToCart }), 
            cart.length > 0 && React.createElement("button", { onClick: onSubmitPreorder ? onSubmitPreorder : () => setView('BOOKING'), className: "fixed bottom-24 right-6 bg-red-700 text-white p-4 rounded-full shadow-2xl shadow-red-900/40 z-40 animate-bounce" }, 
                React.createElement("div", { className: "relative flex items-center gap-2 px-2" }, React.createElement(Icon, { name: "menu", className: "w-6 h-6" }), React.createElement("span", { className: "font-black" }, cart.reduce((a,c)=>a+c.qty,0)))
            )
        );
    };

    const FaqView = ({ data }) => {
        const faqs = (data.faqs && data.faqs.length > 0) ? data.faqs : MOCK_FAQS;
        return React.createElement("div", { className: "p-6 space-y-6 animate-fade-in pb-32" }, 
            React.createElement("div", { className: "bg-white rounded-[2rem] overflow-hidden shadow-lg border border-slate-100 mb-4 h-48 relative" }, 
                React.createElement("img", { src: "https://i.ibb.co/WpMct0Ls/Gemini-Generated-Image-fjx6tvfjx6tvfjx6-1.png", className: "w-full h-full object-cover" }), 
                React.createElement("div", { className: "absolute inset-0 bg-black/30 flex items-center justify-center" }, 
                    React.createElement("h2", { className: "text-white font-black text-2xl tracking-widest drop-shadow-md" }, "å¸¸è¦‹å•é¡Œ")
                )
            ), 
            React.createElement("div", { className: "space-y-3" }, 
                faqs.map((f, i) => React.createElement("details", { key: i, className: "bg-white p-5 rounded-2xl border border-slate-100 shadow-sm group transition-all open:shadow-md" }, 
                    React.createElement("summary", { className: "text-sm font-black cursor-pointer text-slate-800 list-none flex items-center justify-between" }, 
                        React.createElement("div", { className: "flex items-center gap-3" }, React.createElement("span", { className: "w-6 h-6 rounded-full bg-slate-100 text-slate-500 flex items-center justify-center text-xs" }, "Q"), f.å•é¡Œ), 
                        React.createElement("span", { className: "text-slate-300 group-open:rotate-180 transition-transform" }, "â–¼")
                    ), 
                    React.createElement("div", { className: "mt-4 pt-4 border-t border-slate-50 text-xs text-slate-500 leading-relaxed font-bold pl-9" }, f.å›ç­”)
                ))
            )
        );
    };

    const BookingView = ({ profile, data, onComplete, cart, onClearCart, setView, setPendingBooking, pendingBooking }) => {
         const [form, setForm] = useState(pendingBooking || { 
            date: "", time: "11:30", adults: 2, children: 0, highChairs: 0, vegetarian: false,
            name: data.member?.å§“å || profile?.displayName || "", 
            phone: data.member?.é›»è©±?.replace(/'/g,'') || "", notes: "" 
          });
         const [loading, setLoading] = useState(false);
         const times = ['11:00','11:30','12:00','12:30','17:00','17:30','18:00','18:30', '19:00', '19:30'];
         
         const leadTimeHours = parseFloat(data.settings?.BookingLeadTime) || 2;
         const maxGuestsPerSlot = parseInt(data.settings?.MaxGuestsPerSlot) || 20;
         const minBookingTime = new Date(new Date().getTime() + leadTimeHours * 60 * 60 * 1000);

         const checkSlotAvailability = (dateStr, timeStr) => {
             if (!dateStr || !timeStr) return { full: false, remaining: maxGuestsPerSlot };
             const existing = data.bookingsSummary || [];
             const slotBookings = existing.find(b => b.date === dateStr && b.time === timeStr);
             const used = slotBookings ? slotBookings.count : 0;
             return { full: used >= maxGuestsPerSlot, remaining: maxGuestsPerSlot - used, used };
         };

         const handleHighChairIncrease = () => {
             const nextVal = form.highChairs + 1;
             const totalStock = parseInt(data.settings?.TotalHighChairs) || 10;
             if (nextVal > form.children) return Swal.fire('æ•¸é‡éŒ¯èª¤', 'å…’ç«¥æ¤…æ•¸é‡ä¸èƒ½è¶…éå°å­©äººæ•¸', 'error');
             if (nextVal > totalStock) return Swal.fire('åº«å­˜ä¸è¶³', 'æœ¬åº—å…’ç«¥æ¤…æ•¸é‡ä¸è¶³', 'warning');
             setForm({...form, highChairs: nextVal});
         };
         
         const handleDateChange = (e) => {
             const val = e.target.value;
             if(!val) { setForm({...form, date: ''}); return; }
             const selectedDate = new Date(val);
             const day = selectedDate.getDay();
             if (day === 1) { Swal.fire('æœ¬åº—å…¬ä¼‘', 'æ¯é€±ä¸€ç‚ºå›ºå®šå…¬ä¼‘æ—¥', 'warning'); setForm({...form, date: ''}); return; }
             if (data.settings && data.settings.RestStartDate && data.settings.RestEndDate) {
                 const start = new Date(data.settings.RestStartDate); const end = new Date(data.settings.RestEndDate);
                 start.setHours(0,0,0,0); end.setHours(0,0,0,0); selectedDate.setHours(0,0,0,0);
                 if (selectedDate >= start && selectedDate <= end) { Swal.fire('åº—ä¼‘é€šçŸ¥', `æ­¤æœŸé–“ (${data.settings.RestStartDate} ~ ${data.settings.RestEndDate}) åº—å®¶ä¼‘æ¯ä¸­`, 'info'); setForm({...form, date: ''}); return; }
             }
             setForm({...form, date: val, time: ""});
         };

         const handleBooking = async () => {
            if (!form.date || !form.time) return Swal.fire('è«‹å®Œæ•´é¸æ“‡æ—¥æœŸèˆ‡æ™‚é–“', '', 'warning');
            if (!form.phone || !isValidPhone(form.phone)) return Swal.fire('æ‰‹æ©Ÿæ ¼å¼éŒ¯èª¤', 'è«‹è¼¸å…¥ 09 é–‹é ­ 10 ç¢¼', 'warning');
            
            const availability = checkSlotAvailability(form.date, form.time);
            if (availability.remaining < (form.adults + form.children)) {
                return Swal.fire('è©²æ™‚æ®µäººæ•¸éå¤š', `å‰©é¤˜åº§ä½: ${availability.remaining}`, 'warning');
            }

            // Check Member Permission for Pre-order
            if (cart.length > 0 && !data.member) {
                 return Swal.fire({
                     title: 'æœƒå“¡å°ˆå±¬åŠŸèƒ½',
                     text: 'é é»é¤é»ç‚ºæœƒå“¡å°ˆå±¬åŠŸèƒ½ï¼Œè«‹è¨»å†Šæœƒå“¡æˆ–æ¸…ç©ºè³¼ç‰©è»Šå¾Œå†è¨‚ä½ã€‚',
                     icon: 'info',
                     showCancelButton: true,
                     confirmButtonText: 'å‰å¾€è¨»å†Š',
                     cancelButtonText: 'æ¸…ç©ºè³¼ç‰©è»Šç¹¼çºŒè¨‚ä½',
                     confirmButtonColor: '#B91C1C'
                 }).then(result => {
                     if (result.isConfirmed) {
                         setView('MEMBER');
                     } else if (result.dismiss === Swal.DismissReason.cancel) {
                         onClearCart();
                         // User will click button again to book without cart
                     }
                 });
            }

            setLoading(true);
            const preOrderStr = cart.map(i => `${i.ç”¢å“åç¨±}${i.noodle ? `(${i.noodle})` : ''} x${i.qty} $${i.finalPrice * i.qty}`).join('\n');
            const cleanPhone = form.phone.replace(/\D/g, '');
            const res = await runGAS('booking', { ...form, phone: cleanPhone, notes: form.notes + (form.vegetarian?'(ç´ )':''), lineUserId: profile?.userId, preOrder: preOrderStr });
            setLoading(false);
            if (res.status === 'success') {
                if(cart.length>0) onClearCart();
                setPendingBooking(null);
                Swal.fire({title:'é ç´„æˆåŠŸ', html:`æ‚¨çš„è¨‚ä½ä»£è™Ÿ: <b>${res.bookingCode}</b><br>è«‹æˆªåœ–ä¿å­˜`, icon:'success'}).then(onComplete);
            } else {
                Swal.fire('éŒ¯èª¤', res.message, 'error');
            }
         };

         const cartTotal = cart.reduce((acc, item) => acc + (item.finalPrice * item.qty), 0);

         return React.createElement("div", { className: "p-6 space-y-6 animate-fade-in pb-32" },
             React.createElement("h3", { className: "font-black text-2xl text-slate-800" }, "ç·šä¸Šé ç´„"),
             
             React.createElement("div", { className: "card space-y-5" },
                 React.createElement("div", { className: "flex justify-between items-center" },
                    React.createElement("label", { className: "text-sm font-bold text-slate-500" }, "é¸æ“‡æ—¥æœŸ (é€±ä¸€å…¬ä¼‘)"),
                    form.date && React.createElement("span", { className: "text-xs font-black text-red-600 bg-red-50 px-2 py-1 rounded" }, getFormattedDate(form.date))
                 ),
                 React.createElement("input", { type: "date", className: "input-field text-center text-lg tracking-widest", value: form.date, min: new Date().toISOString().split('T')[0], onChange: handleDateChange }),
                 
                 React.createElement("div", { className: "border-t border-slate-100 pt-4" },
                     React.createElement("label", { className: "block text-sm font-bold text-slate-500 mb-3" }, "é¸æ“‡æ™‚é–“"),
                     !form.date ? React.createElement("p", { className: "text-center text-slate-300 text-sm py-4" }, "è«‹å…ˆé¸æ“‡æ—¥æœŸ") :
                     React.createElement("div", { className: "grid grid-cols-4 gap-2" }, times.map(t => {
                         const [h, m] = t.split(':').map(Number);
                         let isTooSoon = false;
                         if (form.date) {
                            const slotDate = new Date(form.date); slotDate.setHours(h, m, 0, 0);
                            if (slotDate < minBookingTime) isTooSoon = true;
                         }
                         
                         const { full, remaining } = checkSlotAvailability(form.date, t);
                         const isFull = full || remaining <= 0;
                         const isSelected = form.time === t;
                         const disabled = isTooSoon || isFull;

                         return React.createElement("button", { 
                             key: t, disabled: disabled, onClick: () => setForm({...form, time: t}), 
                             className: `relative py-2 rounded-xl text-xs font-bold border transition-all flex flex-col items-center justify-center h-14 ${isSelected ?'bg-red-600 text-white border-red-600 shadow-lg': disabled ? 'bg-slate-100 text-slate-300 border-transparent cursor-not-allowed' : 'bg-white text-slate-600 border-slate-200 hover:border-red-300'}` 
                         }, 
                            React.createElement("span", null, t),
                            isFull && React.createElement("span", { className: "text-[9px] scale-75 font-black text-red-400" }, "é¡æ»¿")
                         );
                     }))
                 )
             ),

             React.createElement("div", { className: "card space-y-6" },
                  [{label: "å¤§äºº", key: 'adults'}, {label: "å°å­©", key: 'children'}].map(type => 
                      React.createElement("div", { key: type.key, className: "flex justify-between items-center" }, 
                          React.createElement("span", { className: "font-bold text-slate-700 text-lg" }, type.label), 
                          React.createElement("div", { className: "flex items-center gap-4 bg-slate-50 rounded-full p-1" },
                              React.createElement("button", { onClick: ()=>setForm({...form, [type.key]: Math.max(0, form[type.key]-1), ...(type.key==='children'?{highChairs:0}:{})}), className: "stepper-btn" }, "-"),
                              React.createElement("span", { className: "text-xl font-black w-8 text-center" }, form[type.key]),
                              React.createElement("button", { onClick: ()=>setForm({...form, [type.key]: form[type.key]+1}), className: "stepper-btn" }, "+")
                          )
                      )
                  ),
                  React.createElement("div", { className: "flex justify-between items-center pt-2 border-t border-slate-50" }, 
                      React.createElement("span", { className: "font-bold text-slate-700 text-lg" }, "å…’ç«¥æ¤…"), 
                      React.createElement("div", { className: "flex items-center gap-4 bg-slate-50 rounded-full p-1" },
                          React.createElement("button", { onClick: ()=>setForm({...form, highChairs: Math.max(0, form.highChairs-1)}), className: "stepper-btn" }, "-"),
                          React.createElement("span", { className: "text-xl font-black w-8 text-center" }, form.highChairs),
                          React.createElement("button", { onClick: handleHighChairIncrease, className: "stepper-btn" }, "+")
                      )
                  )
             ),

             React.createElement("div", { className: "card space-y-6" },
                  React.createElement("div", { className: "input-group" },
                      React.createElement("span", { className: "input-label" }, "é ç´„äººå§“å"),
                      React.createElement(Icon, { name: "user", className: "input-icon" }),
                      React.createElement("input", { className: "input-field", value: form.name, onChange: e=>setForm({...form, name: e.target.value}) })
                  ),
                  React.createElement("div", { className: "input-group" },
                      React.createElement("span", { className: "input-label" }, "æ‰‹æ©Ÿè™Ÿç¢¼"),
                      React.createElement(Icon, { name: "phone", className: "input-icon" }),
                      React.createElement("input", { className: "input-field", type: "tel", value: form.phone, onChange: e=>setForm({...form, phone: e.target.value}) })
                  ),
                  React.createElement("div", { className: "input-group" },
                      React.createElement("span", { className: "input-label" }, "å‚™è¨»"),
                      React.createElement("textarea", { className: "input-field h-24 pt-4", placeholder: "å¦‚ï¼šæ…¶ç”Ÿã€éæ•...", value: form.notes, onChange: e=>setForm({...form, notes: e.target.value}) })
                  )
             ),

             cart.length > 0 ? React.createElement("div", { className: "card border-l-4 border-l-red-500 space-y-3" },
                React.createElement("div", { className: "flex justify-between items-center" },
                   React.createElement("h4", { className: "font-black text-slate-800 flex items-center gap-2" }, React.createElement(Icon, { name: "menu", className: "w-5 h-5 text-red-600" }), "é é»é¤é»æ‘˜è¦"),
                   React.createElement("button", { onClick: () => setView('MENU'), className: "text-xs font-bold text-red-500 bg-red-50 px-3 py-1 rounded-full" }, "ä¿®æ”¹")
                ),
                React.createElement("div", { className: "divide-y divide-slate-100" },
                    cart.map((item, idx) => React.createElement("div", { key: idx, className: "py-2 flex justify-between text-sm" },
                        React.createElement("div", null, 
                            React.createElement("p", { className: "font-bold text-slate-700" }, item.ç”¢å“åç¨±, React.createElement("span", { className: "text-slate-400 ml-1" }, `x${item.qty}`)),
                            React.createElement("p", { className: "text-xs text-slate-400" }, item.noodle, item.combo!=='å–®é»' && ` / ${item.combo}`)
                        ),
                        React.createElement("span", { className: "font-mono font-bold" }, `$${item.finalPrice * item.qty}`)
                    ))
                ),
                React.createElement("div", { className: "pt-2 flex justify-between items-center font-black text-lg border-t border-slate-100 mt-2" },
                    React.createElement("span", null, "ç¸½è¨ˆ"),
                    React.createElement("span", { className: "text-red-600" }, `$${cartTotal}`)
                )
             ) : React.createElement("button", { onClick: ()=>setView('MENU'), className: "w-full py-4 rounded-3xl border-2 border-dashed border-red-200 text-red-400 font-bold bg-red-50/50 hover:bg-red-50 transition-colors" }, "+ å¢åŠ é é»é¤é» (æœƒå“¡äº«å„ªæƒ )"),

             React.createElement("button", { onClick: handleBooking, disabled: loading, className: "btn-primary hover:shadow-2xl hover:shadow-red-500/40 transform transition-all active:scale-95" }, 
                loading ? "è™•ç†ä¸­..." : React.createElement("span", { className: "relative z-10 flex items-center justify-center gap-2" }, "ç¢ºèªé ç´„", React.createElement(Icon, { name: "check", className: "w-5 h-5" }))
             )
         );
    };

    const MemberView = ({ data, profile, setView }) => {
        const [showRegister, setShowRegister] = useState(false);
        const [isEditing, setIsEditing] = useState(false);
        const [editForm, setEditForm] = useState(null);
        const [regForm, setRegForm] = useState({ 
            name: (profile?.displayName && profile.displayName !== 'è¨ªå®¢') ? profile.displayName : '', 
            phone: '', birthday: '', gender: 'ç”·', email: '' 
        });
        const [loading, setLoading] = useState(false);
        const [showHistory, setShowHistory] = useState(null);
        const [historyData, setHistoryData] = useState([]);
        const [loadingHistory, setLoadingHistory] = useState(false);

        const fetchHistory = async (type) => {
            setLoadingHistory(true); setShowHistory(type);
            const action = type === 'BOOKINGS' ? 'getUserBookings' : 'getPointHistory';
            const res = await runGAS(action, { lineUserId: profile.userId });
            if(res.status === 'success') setHistoryData(type === 'BOOKINGS' ? res.bookings : res.history);
            setLoadingHistory(false);
        };

        const handleRegister = async () => {
             setLoading(true);
             const cleanPhone = regForm.phone.replace(/\D/g, '');
             const res = await runGAS('register', { lineUserId: profile.userId, ...regForm, phone: cleanPhone });
             setLoading(false);
             if(res.status === 'success') Swal.fire('è¨»å†ŠæˆåŠŸ', 'æ­¡è¿åŠ å…¥æœƒå“¡ï¼', 'success').then(() => window.location.reload());
             else Swal.fire('è¨»å†Šå¤±æ•—', res.message, 'error');
        };

        const handleUpdateMember = async () => {
            setLoading(true);
            const cleanPhone = editForm.phone.replace(/\D/g, '');
            const res = await runGAS('updateMember', { lineUserId: profile.userId, ...editForm, phone: cleanPhone });
            setLoading(false);
            if(res.status === 'success') Swal.fire('æ›´æ–°æˆåŠŸ', 'è³‡æ–™å·²æ›´æ–°', 'success').then(() => window.location.reload());
            else Swal.fire('æ›´æ–°å¤±æ•—', res.message, 'error');
        };

        const handleDeleteMember = async () => {
            const result = await Swal.fire({ title: 'ç¢ºå®šåˆªé™¤å¸³è™Ÿï¼Ÿ', text: "æ­¤æ“ä½œç„¡æ³•å¾©åŸï¼Œæ‚¨çš„é»æ•¸èˆ‡ç´€éŒ„å°‡å®Œå…¨æ¶ˆå¤±ï¼", icon: 'warning', showCancelButton: true, confirmButtonColor: '#d33', cancelButtonColor: '#3085d6', confirmButtonText: 'æ˜¯çš„ï¼Œåˆªé™¤', cancelButtonText: 'å–æ¶ˆ' });
            if (result.isConfirmed) {
                setLoading(true);
                const res = await runGAS('deleteMember', { lineUserId: profile.userId });
                setLoading(false);
                if(res.status === 'success') Swal.fire('å·²åˆªé™¤', 'æ‚¨çš„æœƒå“¡è³‡æ–™å·²ç§»é™¤', 'success').then(() => window.location.reload());
                else Swal.fire('åˆªé™¤å¤±æ•—', res.message, 'error');
            }
        };

        const initEdit = () => { if(data.member) { setEditForm({ name: data.member.å§“å, phone: data.member.é›»è©±.replace(/'/g, ''), birthday: data.member.ç”Ÿæ—¥, gender: data.member.æ€§åˆ¥, email: data.member.Email }); setIsEditing(true); } };
        const isRegValid = regForm.name && isValidPhone(regForm.phone) && regForm.birthday;
        const isAdmin = data.member && ADMIN_PHONES.some(p => data.member.é›»è©±.replace(/'/g,'').replace(/-/g,'').endsWith(p));

        if (!data.member) {
            return React.createElement("div", { className: "p-6 pb-32 animate-fade-in flex flex-col items-center justify-center min-h-[70vh]" },
                !showRegister ? React.createElement("div", { className: "w-full max-w-sm bg-white p-8 rounded-[2.5rem] shadow-xl shadow-slate-200 border border-white relative overflow-hidden text-center" },
                    React.createElement("div", { className: "absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-red-500 to-red-800" }),
                    React.createElement("div", { className: "w-20 h-20 bg-red-50 rounded-full flex items-center justify-center mx-auto mb-6 border-4 border-white shadow-md" }, 
                        React.createElement(Icon, { name: "user", className: "w-10 h-10 text-red-600" })
                    ),
                    React.createElement("h3", { className: "font-black text-2xl mb-2 text-slate-800" }, "åŠ å…¥ SANOVA æœƒå“¡"), 
                    React.createElement("p", { className: "text-slate-500 mb-8 text-sm leading-relaxed font-bold" }, "äº«æœ‰æœªä¾†ä¸å®šæœŸå°ˆå±¬å„ªæƒ \nèˆ‡å£½æ˜Ÿç”Ÿæ—¥å¥½ç¦®ï¼"),
                    React.createElement("button", { className: "btn-primary", onClick: () => setShowRegister(true) }, "ç«‹å³å…è²»è¨»å†Š"),
                    React.createElement("p", { className: "mt-4 text-xs text-slate-300 font-bold" }, "åªéœ€ 30 ç§’å³å¯å®Œæˆ")
                ) : 
                React.createElement("div", { className: "w-full max-w-sm card animate-fade-in" },
                    React.createElement("div", { className: "flex justify-between items-center mb-6" },
                        React.createElement("h3", { className: "font-black text-xl text-slate-800" }, "å¡«å¯«æœƒå“¡è³‡æ–™"),
                        React.createElement("button", { onClick: () => setShowRegister(false), className: "p-2 bg-slate-50 rounded-full text-slate-400 hover:bg-slate-100" }, React.createElement(Icon, { name: "x", className: "w-5 h-5" }))
                    ),
                    React.createElement("div", { className: "space-y-2" },
                        React.createElement("div", { className: "input-group" },
                            React.createElement("span", { className: "input-label" }, "çœŸå¯¦å§“å"),
                            React.createElement(Icon, { name: "user", className: "input-icon" }),
                            React.createElement("input", { className: "input-field", placeholder: "è«‹è¼¸å…¥å§“å", value: regForm.name, onChange: e => setRegForm({...regForm, name: e.target.value}) })
                        ),
                        React.createElement("div", { className: "input-group" },
                             React.createElement("span", { className: "input-label" }, "æ‰‹æ©Ÿè™Ÿç¢¼"),
                            React.createElement(Icon, { name: "phone", className: "input-icon" }),
                            React.createElement("input", { className: "input-field", type: "tel", placeholder: "09xx...", value: regForm.phone, onChange: e => setRegForm({...regForm, phone: e.target.value}) })
                        ),
                        React.createElement("div", { className: "flex gap-3" },
                            React.createElement("div", { className: "input-group flex-1" },
                                React.createElement("span", { className: "input-label" }, "ç”Ÿæ—¥"),
                                React.createElement(Icon, { name: "cake", className: "input-icon" }),
                                React.createElement("input", { className: "input-field", type: "date", value: regForm.birthday, onChange: e => setRegForm({...regForm, birthday: e.target.value}) })
                            ),
                            React.createElement("div", { className: "flex bg-slate-100 rounded-2xl p-1 h-[54px] items-center" },
                                ['ç”·', 'å¥³'].map(g => React.createElement("button", { key: g, onClick: () => setRegForm({...regForm, gender: g}), className: `px-3 rounded-xl text-sm font-bold transition-all h-full ${regForm.gender === g ? 'bg-white shadow text-slate-800' : 'text-slate-400'}` }, g))
                            )
                        ),
                        React.createElement("div", { className: "input-group" },
                            React.createElement("span", { className: "input-label" }, "Email (é¸å¡«)"),
                            React.createElement(Icon, { name: "mail", className: "input-icon" }),
                            React.createElement("input", { className: "input-field", type: "email", placeholder: "example@gmail.com", value: regForm.email, onChange: e => setRegForm({...regForm, email: e.target.value}) })
                        ),
                        React.createElement("button", { onClick: handleRegister, disabled: !isRegValid || loading, className: "btn-primary mt-4" }, loading ? "è¨»å†Šä¸­..." : "ç¢ºèªè¨»å†Š")
                    )
                )
            );
        }

        if (showHistory) return React.createElement("div", { className: "p-6 pb-32 animate-fade-in" },
            React.createElement("button", { onClick: () => setShowHistory(null), className: "mb-4 btn-base bg-slate-100 text-slate-500 px-4 py-2 rounded-full text-xs shadow-none w-auto inline-flex" }, React.createElement(Icon, { name: "back", className: "w-4 h-4" }), "è¿”å›"),
            React.createElement("div", { className: "space-y-3" },
                loadingHistory ? React.createElement("p", { className: "text-center text-slate-400 py-10" }, "è®€å–ä¸­...") :
                historyData.length === 0 ? React.createElement("p", { className: "text-center text-slate-400 py-10" }, "å°šç„¡ç´€éŒ„") :
                historyData.map((item, i) => React.createElement("div", { key: i, className: "bg-white p-4 rounded-2xl shadow-sm border border-slate-100" },
                    showHistory === 'BOOKINGS' ? React.createElement("div", null, React.createElement("p", { className: "font-black text-slate-800" }, item.é ç´„æ—¥æœŸ), React.createElement("p", { className: "text-sm text-slate-500" }, `${item.é ç´„æ™‚é–“} | ${item.å¤§äºº}å¤§${item.å°å­©}å°`)) : 
                    React.createElement("div", null, React.createElement("p", { className: "font-bold" }, item.èªªæ˜), React.createElement("p", { className: "text-xs text-slate-400" }, item.æ™‚é–“ && item.æ™‚é–“.split('T')[0]))
                ))
            )
        );

        if (isEditing) return React.createElement("div", { className: "p-6 pb-32 animate-fade-in" },
            React.createElement("div", { className: "flex justify-between items-center mb-6" }, React.createElement("h3", { className: "font-black text-xl text-slate-800" }, "ä¿®æ”¹æœƒå“¡è³‡æ–™"), React.createElement("button", { onClick: () => setIsEditing(false), className: "p-2 bg-slate-50 rounded-full text-slate-400 hover:bg-slate-100" }, React.createElement(Icon, { name: "x", className: "w-5 h-5" }))),
            React.createElement("div", { className: "card space-y-4" },
                React.createElement("div", { className: "input-group" }, React.createElement("span", { className: "input-label" }, "å§“å"), React.createElement(Icon, { name: "user", className: "input-icon" }), React.createElement("input", { className: "input-field", value: editForm.name, onChange: e => setEditForm({...editForm, name: e.target.value}) })),
                React.createElement("div", { className: "input-group" }, React.createElement("span", { className: "input-label" }, "æ‰‹æ©Ÿ"), React.createElement(Icon, { name: "phone", className: "input-icon" }), React.createElement("input", { className: "input-field", type: "tel", value: editForm.phone, onChange: e => setEditForm({...editForm, phone: e.target.value}) })),
                React.createElement("div", { className: "flex gap-3" }, React.createElement("div", { className: "input-group flex-1" }, React.createElement("span", { className: "input-label" }, "ç”Ÿæ—¥"), React.createElement(Icon, { name: "cake", className: "input-icon" }), React.createElement("input", { className: "input-field", type: "date", value: editForm.birthday, onChange: e => setEditForm({...editForm, birthday: e.target.value}) })), React.createElement("div", { className: "flex bg-slate-100 rounded-2xl p-1 h-[54px] items-center" }, ['ç”·', 'å¥³'].map(g => React.createElement("button", { key: g, onClick: () => setEditForm({...editForm, gender: g}), className: `px-3 rounded-xl text-sm font-bold transition-all h-full ${editForm.gender === g ? 'bg-white shadow text-slate-800' : 'text-slate-400'}` }, g)))),
                React.createElement("div", { className: "input-group" }, React.createElement("span", { className: "input-label" }, "Email"), React.createElement(Icon, { name: "mail", className: "input-icon" }), React.createElement("input", { className: "input-field", type: "email", value: editForm.email, onChange: e => setEditForm({...editForm, email: e.target.value}) })),
                React.createElement("button", { onClick: handleUpdateMember, disabled: loading, className: "btn-primary" }, loading ? "æ›´æ–°ä¸­..." : "å„²å­˜ä¿®æ”¹"),
                React.createElement("button", { onClick: handleDeleteMember, disabled: loading, className: "btn-danger mt-4" }, "åˆªé™¤æœƒå“¡å¸³è™Ÿ")
            )
        );

        return React.createElement("div", { className: "p-6 animate-fade-in pb-32" },
            React.createElement("div", { className: "bg-slate-900 p-8 rounded-[2.5rem] text-white shadow-2xl mb-8 relative overflow-hidden" },
               React.createElement("div", { className: "absolute top-0 right-0 w-40 h-40 bg-white/5 rounded-full blur-3xl -mr-10 -mt-10 pointer-events-none" }),
               React.createElement("div", { className: "flex items-center gap-4 relative z-10" },
                  React.createElement("img", { src: profile.pictureUrl, className: "w-16 h-16 rounded-full border-4 border-white/10 shadow-lg", referrerPolicy: "no-referrer" }),
                  React.createElement("div", null, React.createElement("h3", { className: "text-xl font-black" }, data.member.å§“å), React.createElement("p", { className: "text-xs opacity-50 font-mono tracking-wider" }, data.member.é›»è©±))
               ),
               React.createElement("div", { className: "mt-8 flex justify-between items-end relative z-10" },
                   React.createElement("div", { className: "bg-white/10 backdrop-blur-md px-4 py-1.5 rounded-full border border-white/10" }, React.createElement("span", { className: "text-[10px] font-black uppercase tracking-widest text-amber-300" }, "SANOVA VIP")),
                   React.createElement("div", { className: "text-right" }, React.createElement("p", { className: "text-[10px] opacity-40 font-black uppercase mb-1" }, "Points"), React.createElement("p", { className: "text-4xl font-black text-amber-400 leading-none" }, data.member.é»æ•¸ || 0))
               )
            ),
            React.createElement("div", { className: "grid grid-cols-2 gap-4" },
                React.createElement("button", { onClick: () => fetchHistory('BOOKINGS'), className: "bg-white p-5 rounded-3xl border border-slate-100 shadow-sm flex flex-col gap-3 active:scale-95 transition-all" }, React.createElement(Icon, { name: "calendar", className: "w-6 h-6 text-red-700" }), React.createElement("span", { className: "font-bold text-slate-700" }, "æˆ‘çš„è¨‚ä½")),
                React.createElement("button", { onClick: () => fetchHistory('POINTS'), className: "bg-white p-5 rounded-3xl border border-slate-100 shadow-sm flex flex-col gap-3 active:scale-95 transition-all" }, React.createElement(Icon, { name: "gift", className: "w-6 h-6 text-amber-500" }), React.createElement("span", { className: "font-bold text-slate-700" }, "é»æ•¸ç´€éŒ„"))
            ),
            React.createElement("button", { onClick: initEdit, className: "mt-4 w-full py-4 bg-white border border-slate-200 text-slate-500 rounded-2xl text-sm font-bold shadow-sm flex items-center justify-center gap-2 hover:bg-slate-50" }, React.createElement(Icon, { name: "user", className: "w-4 h-4" }), "ä¿®æ”¹ / åˆªé™¤æœƒå“¡è³‡æ–™"),
            isAdmin && React.createElement("button", { onClick: () => setView('ADMIN'), className: "mt-4 w-full py-4 bg-slate-800 text-slate-200 rounded-2xl text-sm font-bold shadow-xl shadow-slate-300 flex items-center justify-center gap-2" }, React.createElement(Icon, { name: "edit", className: "w-4 h-4" }), "é€²å…¥ç®¡ç†å“¡å¾Œå°")
        );
    };

    const AdminView = ({ profile, setView }) => {
        const [bookings, setBookings] = useState([]);
        const [settings, setSettings] = useState({ restStart: '', restEnd: '', bookingLeadTime: '', totalHighChairs: '', maxGuestsPerSlot: '' });
        const [loading, setLoading] = useState(true);

        useEffect(() => {
            const fetchAdminData = async () => {
                const res = await runGAS('getAdminData', { lineUserId: profile.userId });
                if(res.status === 'success') {
                    setBookings(res.bookings);
                    setSettings({
                        restStart: res.settings?.RestStartDate || '',
                        restEnd: res.settings?.RestEndDate || '',
                        bookingLeadTime: res.settings?.BookingLeadTime || '2',
                        totalHighChairs: res.settings?.TotalHighChairs || '10',
                        maxGuestsPerSlot: res.settings?.MaxGuestsPerSlot || '20'
                    });
                } else {
                    Swal.fire('æ¬Šé™ä¸è¶³', 'æ‚¨ç„¡æ¬Šè¨ªå•æ­¤é é¢', 'error').then(()=>setView('MEMBER'));
                }
                setLoading(false);
            };
            fetchAdminData();
        }, []);

        const handleSaveSettings = async () => {
             if ((settings.restStart && !settings.restEnd) || (!settings.restStart && settings.restEnd)) return Swal.fire('è«‹å®Œæ•´å¡«å¯«é–‹å§‹èˆ‡çµæŸæ—¥æœŸ', '', 'warning');
             if (settings.restStart && settings.restEnd && new Date(settings.restStart) > new Date(settings.restEnd)) return Swal.fire('çµæŸæ—¥æœŸä¸èƒ½æ—©æ–¼é–‹å§‹æ—¥æœŸ', '', 'warning');
             setLoading(true);
             const res = await runGAS('saveSettings', { ...settings });
             setLoading(false);
             if (res.status === 'success') Swal.fire('è¨­å®šå·²å„²å­˜', '', 'success');
             else Swal.fire('å„²å­˜å¤±æ•—', res.message, 'error');
        };

        return React.createElement("div", { className: "p-4 pb-32 animate-fade-in bg-slate-100 min-h-screen" },
             React.createElement("div", { className: "flex justify-between items-center mb-6" },
                React.createElement("h2", { className: "text-2xl font-black text-slate-800" }, "ç®¡ç†å“¡å¾Œå°"),
                React.createElement("button", { onClick: ()=>setView('MEMBER'), className: "bg-white p-2 rounded-full shadow" }, React.createElement(Icon, { name: "x", className: "w-5 h-5" }))
             ),
             React.createElement("div", { className: "card mb-6" },
                 React.createElement("h3", { className: "font-black text-lg mb-4 text-slate-700 border-b border-slate-100 pb-2" }, "ç³»çµ±è¨­å®š"),
                 React.createElement("div", { className: "grid grid-cols-2 gap-4 mb-4" },
                     React.createElement("div", null, React.createElement("label", { className: "block text-xs font-bold text-slate-400 mb-1" }, "é ç´„éœ€æå‰ (å°æ™‚)"), React.createElement("input", { type: "number", className: "input-field p-2 text-center", value: settings.bookingLeadTime, onChange: e => setSettings({...settings, bookingLeadTime: e.target.value}) })),
                     React.createElement("div", null, React.createElement("label", { className: "block text-xs font-bold text-slate-400 mb-1" }, "å…’ç«¥æ¤…ç¸½åº«å­˜"), React.createElement("input", { type: "number", className: "input-field p-2 text-center", value: settings.totalHighChairs, onChange: e => setSettings({...settings, totalHighChairs: e.target.value}) }))
                 ),
                 React.createElement("div", { className: "mb-4" },
                     React.createElement("label", { className: "block text-xs font-bold text-slate-400 mb-1" }, "æ¯æ™‚æ®µæœ€å¤§è¨‚ä½äººæ•¸"),
                     React.createElement("input", { type: "number", className: "input-field p-2 text-center", value: settings.maxGuestsPerSlot, onChange: e => setSettings({...settings, maxGuestsPerSlot: e.target.value}) })
                 ),
                 React.createElement("h4", { className: "text-xs font-bold text-slate-400 mb-2 mt-4" }, "åº—ä¼‘å€é–“è¨­å®š"),
                 React.createElement("div", { className: "grid grid-cols-2 gap-4 mb-4" },
                     React.createElement("div", null, React.createElement("label", { className: "block text-[10px] font-bold text-slate-400 mb-1" }, "é–‹å§‹æ—¥æœŸ"), React.createElement("input", { type: "date", className: "input-field p-2 text-center", value: settings.restStart, onChange: e => setSettings({...settings, restStart: e.target.value}) })),
                     React.createElement("div", null, React.createElement("label", { className: "block text-[10px] font-bold text-slate-400 mb-1" }, "çµæŸæ—¥æœŸ"), React.createElement("input", { type: "date", className: "input-field p-2 text-center", value: settings.restEnd, onChange: e => setSettings({...settings, restEnd: e.target.value}) }))
                 ),
                 React.createElement("button", { onClick: handleSaveSettings, className: "btn-primary py-2 text-sm" }, "å„²å­˜è¨­å®š")
             ),
             React.createElement("h3", { className: "font-black text-lg mb-4 text-slate-700 pl-2" }, "ä»Šæ—¥è¨‚ä½æ¦‚æ³"),
             loading ? React.createElement("div", { className: "text-center py-10 text-slate-400" }, "è¼‰å…¥è³‡æ–™ä¸­...") : 
             bookings.length === 0 ? React.createElement("div", { className: "text-center py-10 text-slate-400" }, "ä»Šæ—¥èˆ‡æœªä¾†å°šç„¡è¨‚ä½") :
             React.createElement("div", { className: "space-y-4" }, bookings.map((b, i) => React.createElement("div", { key: i, className: "bg-white p-5 rounded-2xl shadow-sm border-l-4 border-red-600" }, React.createElement("div", { className: "flex justify-between items-start mb-2" }, React.createElement("div", null, React.createElement("span", { className: "bg-slate-800 text-white text-[10px] px-2 py-1 rounded font-bold mr-2" }, b.é ç´„æ™‚é–“), React.createElement("span", { className: "font-black text-lg" }, b.å§“å)), React.createElement("a", { href: `tel:${b.é›»è©±.replace(/'/g,'')}`, className: "w-10 h-10 bg-green-50 rounded-full flex items-center justify-center text-green-600" }, React.createElement(Icon, { name: "phone", className: "w-5 h-5" }))), React.createElement("div", { className: "grid grid-cols-2 gap-2 text-sm text-slate-500 mb-2" }, React.createElement("p", null, React.createElement("span", { className: "font-bold" }, "äººæ•¸ï¼š"), `${b.å¤§äºº}å¤§ ${b.å°å­©}å°`), React.createElement("p", null, React.createElement("span", { className: "font-bold" }, "æ—¥æœŸï¼š"), b.é ç´„æ—¥æœŸ)), (b.å‚™è¨» || b.é é»é¤) && React.createElement("div", { className: "bg-slate-50 p-3 rounded-xl mt-2 text-xs" }, b.å‚™è¨» && React.createElement("p", { className: "mb-1 text-red-500 font-bold" }, `å‚™è¨»: ${b.å‚™è¨»}`), b.é é»é¤ && React.createElement("p", { className: "whitespace-pre-wrap text-slate-600" }, b.é é»é¤)))))
        );
    };

    const InfoView = ({ data }) => React.createElement("div", { className: "p-6 pb-32 animate-fade-in text-center" }, 
        React.createElement("h3", { className: "font-black text-xl text-slate-800 mb-4" }, "åº—å®¶è³‡è¨Š"),
        React.createElement("div", { className: "bg-white p-6 rounded-[2rem] shadow-lg border border-slate-100 mb-6" },
             React.createElement("p", { className: "font-black text-lg mb-2" }, "è–©è«¾ç“¦ç¾©å¼å»šæˆ¿"),
             React.createElement("a", { href: "tel:082332530", className: "text-2xl font-black text-red-600 block mb-4" }, "082-332530"),
             React.createElement("p", { className: "text-slate-500 text-sm font-bold" }, "é‡‘é–€ç¸£é‡‘æ¹–é®å¤ªæ¹–è·¯äºŒæ®µ3å··6è™Ÿ"),
             React.createElement("div", { className: "w-full h-40 rounded-2xl overflow-hidden mt-4 mb-4 shadow-md border border-slate-100" }, React.createElement("iframe", { src: "https://maps.google.com/maps?q=è–©è«¾ç“¦ç¾©å¼å»šæˆ¿&t=&z=15&ie=UTF8&iwloc=&output=embed", width: "100%", height: "100%", style: { border: 0 }, allowFullScreen: "", loading: "lazy" })),
             React.createElement("div", { className: "flex justify-center gap-3 mt-6" },
                React.createElement("a", { href: "https://www.google.com/maps/search/?api=1&query=è–©è«¾ç“¦ç¾©å¼å»šæˆ¿+é‡‘é–€ç¸£é‡‘æ¹–é®å¤ªæ¹–è·¯äºŒæ®µ3å··6è™Ÿ", target: "_blank", className: "flex items-center gap-2 px-4 py-2.5 bg-blue-50 text-blue-600 rounded-xl font-bold text-sm hover:bg-blue-100 transition-colors" }, React.createElement(Icon, { name: "map", className: "w-4 h-4" }), "å°èˆª"),
                React.createElement("a", { href: "https://www.facebook.com/sa520/", target: "_blank", className: "flex items-center gap-2 px-4 py-2.5 bg-blue-600 text-white rounded-xl font-bold text-sm hover:bg-blue-700 transition-colors shadow-lg shadow-blue-200" }, React.createElement(Icon, { name: "facebook", className: "w-4 h-4" }), "ç²‰å°ˆ"),
                React.createElement("a", { href: "tel:082332530", className: "flex items-center gap-2 px-4 py-2.5 bg-green-600 text-white rounded-xl font-bold text-sm hover:bg-green-700 transition-colors shadow-lg shadow-green-200" }, React.createElement(Icon, { name: "phone_fill", className: "w-4 h-4" }), "é€šè©±")
             ),
             React.createElement("div", { className: "mt-6 pt-6 border-t border-slate-50 text-xs text-slate-400 space-y-1" }, React.createElement("p", null, "ç‡Ÿæ¥­æ™‚é–“ï¼š11:00-14:30 / 17:00-20:30"), React.createElement("p", null, "æ¯é€±ä¸€å…¬ä¼‘"))
        )
    );

    const App = () => {
      const [view, setView] = useState('HOME');
      const [data, setData] = useState({ faqs: MOCK_FAQS, promotions: MOCK_PROMOS, settings: {} });
      const [profile, setProfile] = useState(null);
      const [cart, setCart] = useState([]);
      const [pendingBooking, setPendingBooking] = useState(null);

      useEffect(() => {
        const init = async () => {
             const liffPromise = new Promise(resolve => { if(window.liff) { window.liff.init({ liffId: LIFF_ID }).then(() => { if(!window.liff.isLoggedIn() && window.liff.isInClient()) { window.liff.login(); } else if (window.liff.isLoggedIn()) { resolve(window.liff.getProfile()); } else { resolve(null); } }).catch(e => { console.warn('LIFF Init Error', e); resolve(null); }); } else resolve(null); });
             const timeoutPromise = new Promise(r => setTimeout(() => r(null), 3000));
             try { let p = await Promise.race([liffPromise, timeoutPromise]); if(!p) p = { userId: 'GUEST', displayName: 'è¨ªå®¢', pictureUrl: 'https://cdn-icons-png.flaticon.com/512/149/149071.png' }; setProfile(p); const res = await runGAS('getInitialData', { lineUserId: p.userId }); if(res.status === 'success') { setData({ ...res, faqs: (res.faqs && res.faqs.length) ? res.faqs : MOCK_FAQS, promotions: (res.promotions && res.promotions.length) ? res.promotions : MOCK_PROMOS, settings: res.settings || {} }); } } catch(e) { console.error(e); } finally { const el = document.getElementById('loading-overlay'); if(el) el.style.display = 'none'; }
        };
        init();
      }, []);

      const addToCart = (item) => setCart([...cart, item]); const clearCart = () => setCart([]); const handlePreorderSubmit = async () => { if (pendingBooking) setView('BOOKING'); };
      const renderView = () => { if (view === 'ADMIN') return React.createElement(AdminView, { profile, setView }); if (view === 'BOOKING') return React.createElement(BookingView, { profile, data, onComplete: ()=>setView('HOME'), cart, onClearCart: clearCart, setView, setPendingBooking, pendingBooking }); if (view === 'MENU') return React.createElement(MenuView, { menu: data.restaurantMenu, addToCart, cart, setView, onSubmitPreorder: pendingBooking ? handlePreorderSubmit : null }); if (view === 'INFO') return React.createElement(InfoView, { data }); if (view === 'FAQ') return React.createElement(FaqView, { data }); if (view === 'MEMBER') return React.createElement(MemberView, { data, profile, setView }); return React.createElement(HomeView, { data, setView }); };

      if (!profile) return null;
      return React.createElement("div", { className: "max-w-md mx-auto min-h-screen bg-slate-50 relative shadow-2xl" }, 
        React.createElement("div", { className: "bg-white/90 backdrop-blur-md px-6 py-4 sticky top-0 z-30 flex justify-between items-center shadow-sm" }, 
            React.createElement("div", null, 
                React.createElement("h1", { className: "font-black text-slate-900 text-xl tracking-tighter" }, RESTAURANT_NAME), 
                React.createElement("p", { className: "text-xs text-slate-500 font-bold mt-1" }, `${profile.displayName}ï¼Œæ­¡è¿æ‚¨ä½¿ç”¨ç·šä¸Šè¨‚ä½ç³»çµ±ï¼`)
            ), 
            React.createElement("img", { src: profile.pictureUrl, className: "w-10 h-10 rounded-full shadow-md border-2 border-white", referrerPolicy: "no-referrer" })
        ), 
        renderView(), 
        React.createElement("div", { className: "fixed bottom-6 inset-x-6 h-20 glass border border-white/60 rounded-full shadow-2xl shadow-slate-300/50 flex items-center justify-around px-2 z-50 backdrop-blur-xl" }, [{ id: 'HOME', icon: 'home', label: 'é¦–é ' }, { id: 'MENU', icon: 'menu', label: 'èœå–®' }, { id: 'BOOKING', icon: 'calendar', label: 'è¨‚ä½' }, { id: 'INFO', icon: 'info', label: 'è³‡è¨Š' }, { id: 'MEMBER', icon: 'user', label: 'æœƒå“¡' }].map(item => React.createElement("button", { key: item.id, onClick: () => setView(item.id), className: `flex flex-col items-center justify-center w-14 h-14 rounded-full transition-all duration-300 relative ${view === item.id ? 'bg-red-50 text-red-600 -translate-y-3 shadow-lg shadow-red-200 scale-110' : 'text-slate-300 hover:text-slate-500'}` }, React.createElement("div", { className: "relative" }, React.createElement(Icon, { name: item.icon, className: "w-6 h-6" }), item.id === 'MENU' && cart.length > 0 && React.createElement("span", { className: "absolute -top-1 -right-1 w-3 h-3 bg-red-600 rounded-full border-2 border-white animate-pulse" })), view === item.id && React.createElement("span", { className: "text-[9px] font-black mt-1 absolute -bottom-6 opacity-0 animate-fade-in" }, item.label))))
      );
    };
    const root = ReactDOM.createRoot(document.getElementById('root')); root.render(React.createElement(App));
  </script>
</body>
</html>