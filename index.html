<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>è–©è«¾ç“¦ç¾©å¼å»šæˆ¿</title>
  
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <style>
    :root {
      --brand-green: #2c5e50;
      --brand-red: #D32F2F;
      --bg-color: #fcfbf9;
    }
    body { 
      font-family: -apple-system, BlinkMacSystemFont, "Microsoft JhengHei", Roboto, sans-serif; 
      background-color: var(--bg-color); 
      margin: 0; padding: 0; overflow-x: hidden;
      -webkit-tap-highlight-color: transparent;
    }
    .animate-fade-in { animation: fadeIn 0.3s ease-out; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    .input-field { @apply w-full p-3 border rounded-xl bg-white focus:ring-2 focus:ring-green-700 outline-none transition-all; }
    .label-text { @apply text-xs font-bold text-gray-500 mb-1 block uppercase tracking-wider; }
  </style>

  <script type="module">
    import React, { useState, useEffect, useMemo } from 'https://esm.sh/react@18.2.0';
    import ReactDOM from 'https://esm.sh/react-dom@18.2.0/client';

    const LIFF_ID = "2008861231-EA0Hpl68";
    const RESTAURANT_NAME = "è–©è«¾ç“¦ç¾©å¼å»šæˆ¿";
    const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxHOJOzIGqCnW-ttjB0_OeJ6eIz3iqF3dnYSwGeK4L2vRi6dEuWZ-i_DoM5pHjz9u7PlA/exec";

    const runGAS = async (action, params = {}) => {
      try {
        const response = await fetch(GOOGLE_SCRIPT_URL, {
          method: 'POST',
          headers: { 'Content-Type': 'text/plain;charset=utf-8' },
          body: JSON.stringify({ action, ...params })
        });
        return await response.json();
      } catch (err) {
        return { status: 'error', message: 'é€£ç·šå¤±æ•—' };
      }
    };

    const Icon = ({ name, className }) => {
      const paths = {
        menu: "M4 6h16M4 12h16M4 18h16",
        calendar: "M19 4H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2V6a2 2 0 00-2-2zm0 0V2m-14 2V2",
        map: "M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z",
        user: "M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2 M12 11a4 4 0 100-8 4 4 0 000 8z",
        gift: "M20 12v10H4V12 M2 7h20v5H2z M12 22V7",
        chat: "M21 11.5a8.38 8.38 0 01-.9 3.8 8.5 8.5 0 01-7.6 4.7",
        back: "M15 19l-7-7 7-7",
        phone: "M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07",
        star: "M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z",
        download: "M4 17v2a2 2 0 002 2h12a2 2 0 002-2v-2M7 11l5 5 5-5M12 4v12",
        close: "M6 18L18 6M6 6l12 12",
        trash: "M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2M10 11v6M14 11v6",
        edit: "M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7m-4-6l.5-2.5 2.5.5L18 8.5l-5 5-3.5-1.5L14 4.5z",
        cart: "M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"
      };
      return React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", className, fill: "none", viewBox: "0 0 24 24", stroke: "currentColor", strokeWidth: "2" },
        React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: paths[name] || "" })
      );
    };

    const App = () => {
      const [view, setView] = useState('HOME');
      const [loading, setLoading] = useState(true);
      const [data, setData] = useState({ member: null, faqs: [], promotions: [] });
      const [profile, setProfile] = useState(null);
      const [currentBookingId, setCurrentBookingId] = useState(null);
      
      const handleMemberUpdate = (member) => setData(prev => ({ ...prev, member }));
      const handleMemberDelete = () => setData(prev => ({...prev, member: null}));
      const handleBookingSuccess = (bookingId) => {
        setCurrentBookingId(bookingId);
        setView('PREORDER');
      };

      useEffect(() => {
        const init = async () => {
          let currentUserId = '';
          try {
            if (window.liff) {
              await window.liff.init({ liffId: LIFF_ID });
              if (window.liff.isLoggedIn()) {
                const p = await window.liff.getProfile();
                setProfile(p);
                currentUserId = p.userId;
              }
            }
          } catch (e) { console.warn("LIFF init failed"); }

          const res = await runGAS('getInitialData', { lineUserId: currentUserId });
          if (res.status === 'success') setData(res);
          setLoading(false);
        };
        init();
      }, []);

      if (loading) return (
        React.createElement("div", { className: "fixed inset-0" },
          React.createElement("img", { src: "https://i.ibb.co/93NGBjjh/IMG-6773.jpg", className: "w-full h-full object-cover" })
        )
      );

      const BaseView = ({ title, children, onBack }) => (
        React.createElement("div", { className: "flex flex-col h-screen bg-white animate-fade-in" },
          React.createElement("div", { className: "bg-[#2c5e50] text-white p-4 flex items-center shadow-md h-14 shrink-0" },
            React.createElement("button", { onClick: onBack, className: "mr-3 p-1" }, React.createElement(Icon, { name: "back", className: "w-6 h-6" })),
            React.createElement("h2", { className: "text-lg font-bold" }, title)
          ),
          React.createElement("div", { className: "flex-1 overflow-y-auto" }, children)
        )
      );

      switch(view) {
        case 'HOME': return React.createElement(HomeView, { setView, profile, data });
        case 'MENU': return React.createElement(BaseView, { title: "ç²¾ç·»èœå–®", onBack: () => setView('HOME') }, React.createElement(MenuView));
        case 'LOCATION': return React.createElement(BaseView, { title: "åº—å®¶è³‡è¨Š", onBack: () => setView('HOME') }, React.createElement(LocationView));
        case 'NEWS': return React.createElement(BaseView, { title: "æœ€æ–°å„ªæƒ ", onBack: () => setView('HOME') }, React.createElement(NewsView, { promotions: data.promotions }));
        case 'FAQ': return React.createElement(BaseView, { title: "å¸¸è¦‹å•é¡Œ", onBack: () => setView('HOME') }, React.createElement(FaqView, { faqs: data.faqs }));
        case 'BOOKING': return React.createElement(BaseView, { title: "ç·šä¸Šè¨‚ä½", onBack: () => setView('HOME') }, React.createElement(BookingView, { member: data.member, profile, onBack: () => setView('HOME'), onBookingSuccess: handleBookingSuccess }));
        case 'MEMBER': return React.createElement(BaseView, { title: "æœƒå“¡ä¸­å¿ƒ", onBack: () => setView('HOME') }, React.createElement(MemberView, { member: data.member, profile, onMemberUpdate: handleMemberUpdate, onMemberDelete: handleMemberDelete }));
        case 'PREORDER': return React.createElement(BaseView, { title: "é å…ˆé»é¤", onBack: () => setView('HOME') }, React.createElement(PreorderView, { bookingId: currentBookingId, onBack: () => setView('HOME') }));
        default: return React.createElement(HomeView, { setView, profile, data });
      }
    };

    const HomeView = ({ setView, profile, data }) => (
      React.createElement("div", { className: "flex flex-col h-full bg-gradient-to-b from-green-50 to-white" },
        React.createElement("div", { className: "bg-white p-4 sticky top-0 z-10 flex justify-between items-center shadow-sm h-14 shrink-0" },
          React.createElement("h1", { className: "font-bold text-[#2c5e50] text-sm" }, 
            profile?.displayName ? `${profile.displayName}, æ­¡è¿å…‰è‡¨` : RESTAURANT_NAME
          ),
          profile && React.createElement("img", { src: profile.pictureUrl, className: "w-8 h-8 rounded-full border border-[#2c5e50]" })
        ),
        React.createElement("div", { className: "flex-1 overflow-y-auto p-5 space-y-6" },
          React.createElement("div", { className: "relative h-48 rounded-2xl overflow-hidden shadow-xl" },
            React.createElement("img", { src: "https://i.ibb.co/qLFg7gSk/Gemini-Generated-Image-cmj4yzcmj4yzcmj4.png", className: "w-full h-full object-cover" }),
            React.createElement("div", { className: "absolute inset-0 bg-gradient-to-t from-black/80 flex items-end p-5 text-white" },
              React.createElement("div", null,
                React.createElement("h3", { className: "font-bold text-xl" }, "Buongiorno!"),
                React.createElement("p", { className: "text-[10px] opacity-80 uppercase tracking-widest font-bold" }, "é‡‘é–€é“åœ°ç¾©å¤§åˆ©é¢¨å‘³")
              )
            )
          ),
          React.createElement("div", { className: "grid grid-cols-2 gap-4" },
            [
              { id: 'MENU', name: 'ç²¾ç·»èœå–®', icon: 'menu', color: 'orange' },
              { id: 'BOOKING', name: 'ç·šä¸Šè¨‚ä½', icon: 'calendar', color: 'green' },
              { id: 'LOCATION', name: 'åº—å®¶è³‡è¨Š', icon: 'map', color: 'blue' },
              { id: 'MEMBER', name: 'æœƒå“¡ä¸­å¿ƒ', icon: 'user', color: 'purple' },
              { id: 'NEWS', name: 'æœ€æ–°å„ªæƒ ', icon: 'gift', color: 'red' },
              { id: 'FAQ', name: 'å¸¸è¦‹å•é¡Œ', icon: 'chat', color: 'gray' }
            ].map(btn => (
              React.createElement("button", { key: btn.id, onClick: () => setView(btn.id), className: "h-32 bg-white rounded-2xl shadow-sm flex flex-col items-center justify-center gap-2 active:bg-gray-100 transition-colors relative" },
                React.createElement("div", { className: `w-12 h-12 bg-${btn.color}-50 rounded-full flex items-center justify-center text-${btn.color}-600`}, React.createElement(Icon, { name: btn.icon, className: "w-6 h-6" })),
                React.createElement("span", { className: "font-bold text-gray-700 text-xs" }, btn.name)
              )
            ))
          )
        )
      )
    );

    const MenuView = () => {
        const [modalItem, setModalItem] = useState(null);
        const menuItems = [
            { src: "https://i.ibb.co/QFTKgJ1B/2023-03-25.webp", label: "èœå–®æ­£é¢", filename: "sanova-menu-front.webp" },
            { src: "https://i.ibb.co/hJ6cfgjM/2025-12-28.webp", label: "èœå–®èƒŒé¢", filename: "sanova-menu-back.webp" }
        ];
        return React.createElement(React.Fragment, null,
            React.createElement("div", { className: "p-6 space-y-8" },
                menuItems.map(item =>
                    React.createElement("div", { key: item.src, className: "text-center" },
                        React.createElement("p", { className: "font-bold text-gray-600 mb-2 text-sm" }, item.label),
                        React.createElement("img", {
                            src: item.src,
                            className: "w-full rounded-lg shadow-lg cursor-pointer transition-transform hover:scale-105 duration-300",
                            onClick: () => setModalItem(item)
                        })
                    )
                )
            ),
            modalItem && React.createElement("div", {
                    className: "fixed inset-0 bg-black/80 flex flex-col items-center justify-center z-50 animate-fade-in p-4",
                    onClick: () => setModalItem(null)
                },
                React.createElement("button", {
                    className: "absolute top-5 right-5 bg-white/20 backdrop-blur-sm text-white rounded-full p-2 hover:bg-white/30 transition-all z-20",
                    onClick: () => setModalItem(null)
                }, React.createElement(Icon, { name: "close", className: "w-7 h-7" })),
                React.createElement("div", {
                        className: "flex flex-col items-center",
                        onClick: e => e.stopPropagation()
                    },
                    React.createElement("img", {
                        src: modalItem.src,
                        className: "max-w-full max-h-[75vh] rounded-lg shadow-2xl object-contain"
                    }),
                    React.createElement("a", {
                        href: modalItem.src,
                        download: modalItem.filename,
                        className: "mt-4 inline-flex items-center justify-center gap-2 bg-[#2c5e50] text-white px-5 py-3 rounded-lg text-sm font-bold shadow-md hover:bg-opacity-90 transition-all"
                    }, React.createElement(Icon, { name: "download", className: "w-5 h-5" }), "ä¸‹è¼‰èœå–®")
                )
            )
        );
    };

    const LocationView = () => React.createElement("div", { className: "p-6 space-y-6" }, 
        React.createElement("iframe", { 
            src: "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3637.362799307897!2d118.4232238759325!3d24.43851537832669!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x34152b1b31278881%3A0xb355205561237a3!2z6JOu6K2v55m-576p5byD55m-5a62!5e0!3m2!1szh-TW!2stw!4v1716962838382!5m2!1szh-TW!2stw", 
            className: "w-full h-64 rounded-xl border-0 shadow-md", 
            allowFullScreen: "", 
            loading: "lazy", 
            referrerPolicy: "no-referrer-when-downgrade" 
        }),
        React.createElement("div", { className: "space-y-4" }, 
            React.createElement("div", { className: "flex gap-4 items-start" }, React.createElement(Icon, { name: "map", className: "w-6 h-6 text-[#2c5e50] shrink-0 mt-1" }), React.createElement("div", null, React.createElement("h4", { className: "font-bold" }, "é¤å»³åœ°å€"), React.createElement("p", { className: "text-gray-600" }, "é‡‘é–€ç¸£é‡‘æ¹–é®å¤ªæ¹–è·¯äºŒæ®µ3å··6è™Ÿ"))),
            React.createElement("div", { className: "flex gap-4 items-start" }, React.createElement(Icon, { name: "phone", className: "w-6 h-6 text-[#2c5e50] shrink-0 mt-1" }), React.createElement("div", null, React.createElement("h4", { className: "font-bold" }, "è¯çµ¡é›»è©±"), React.createElement("p", { className: "text-gray-600" }, "082-332530")))
        ),
        React.createElement("div", { className: "bg-green-50 p-4 rounded-xl border border-green-200" },
           React.createElement("h4", { className: "font-bold text-gray-800 mb-3" }, "ç‡Ÿæ¥­è³‡è¨Š"),
           React.createElement("div", {className: "space-y-2 text-sm text-gray-600"},
               React.createElement("p", null, "æ¯é€±äºŒè‡³é€±æ—¥ 11:00 - 14:00 / 17:00 - 20:30"),
               React.createElement("p", null, "æ¯é€±ä¸€å…¬ä¼‘"),
               React.createElement("p", {className: "text-xs text-gray-400 mt-1"}, "ï¼Šåº§ä½å…± 40 ä½")
           )
        ),
        React.createElement("a", { href: "tel:082332530", className: "w-full bg-gray-800 text-white py-4 rounded-xl flex items-center justify-center gap-2 font-bold" }, "æ’¥æ‰“é›»è©±")
    );

    const NewsView = ({ promotions }) => React.createElement("div", { className: "p-4 space-y-4" }, 
      promotions.map((p, i) => React.createElement("div", { key: i, className: "bg-white rounded-xl shadow-md border overflow-hidden" }, 
        p.image && React.createElement("img", { src: p.image, className: "w-full h-44 object-cover" }), 
        React.createElement("div", { className: "p-4" }, 
          React.createElement("h3", { className: "font-bold text-green-800" }, p.title), 
          React.createElement("p", { className: "text-sm text-gray-500 mt-1" }, p.desc)
        )
      ))
    );

    const FaqView = ({ faqs }) => React.createElement("div", { className: "p-4 space-y-3" }, 
      faqs.map((f, i) => React.createElement("details", { key: i, className: "bg-gray-50 rounded-xl border p-4 group" }, 
        React.createElement("summary", { className: "font-bold cursor-pointer flex justify-between items-center" }, f.q, React.createElement(Icon, { name: "back", className: "w-4 h-4 -rotate-90 group-open:rotate-90" })), 
        React.createElement("p", { className: "text-sm text-gray-600 mt-2 pt-2 border-t" }, f.a)
      ))
    );

    const BookingView = ({ member, profile, onBack, onBookingSuccess }) => {
      const [form, setForm] = useState({ date: new Date().toISOString().split('T')[0], time: '12:00', adults: 2, children: 0, highChairs: 0, name: member?.name || profile?.displayName || '', phone: member?.phone || '', notes: '' });
      const [submitting, setSubmitting] = useState(false);

      const handleBooking = async e => {
        e.preventDefault();

        // Phone validation
        const phoneRegex = /^09\d{8}$/;
        if (!phoneRegex.test(form.phone)) {
          Swal.fire({ icon: 'error', title: 'é›»è©±è™Ÿç¢¼æ ¼å¼éŒ¯èª¤', text: 'è«‹è¼¸å…¥æœ‰æ•ˆçš„ 10 ä½æ‰‹æ©Ÿè™Ÿç¢¼ï¼Œå¿…é ˆä»¥ 09 é–‹é ­ã€‚', confirmButtonColor: '#D32F2F' });
          return;
        }

        // Time validation
        const selectedDate = new Date(form.date);
        if (selectedDate.getDay() === 1) { // Monday is 1
          Swal.fire({ icon: 'error', title: 'è¨‚ä½å¤±æ•—', text: 'é¤å»³é€±ä¸€å…¬ä¼‘ï¼Œè«‹é¸æ“‡å…¶ä»–æ—¥æœŸã€‚', confirmButtonColor: '#D32F2F' });
          return;
        }

        const time = form.time;
        const isLunch = time >= '11:00' && time <= '13:00';
        const isDinner = time >= '17:00' && time <= '20:00';
        if (!isLunch && !isDinner) {
          Swal.fire({ icon: 'error', title: 'è¨‚ä½å¤±æ•—', text: 'è«‹é¸æ“‡ç‡Ÿæ¥­æ™‚æ®µï¼š11:00-13:00 æˆ– 17:00-20:00ã€‚', confirmButtonColor: '#D32F2F' });
          return;
        }
        
        setSubmitting(true);
        const res = await runGAS('booking', { ...form, lineUserId: profile?.userId });
        if (res.status === 'success') {
          if (window.liff.isInClient()) {
            await window.liff.sendMessages([{
              type: 'text',
              text: `ğŸ”” è–©è«¾ç“¦è¨‚ä½ç¢ºèªï¼š\næ—¥æœŸï¼š${form.date}\næ™‚é–“ï¼š${form.time}\näººæ•¸ï¼š${form.adults}å¤§${form.children}å°\nå§“åï¼š${form.name}\næˆ‘å€‘æœƒç›¡å¿«ç‚ºæ‚¨ç¢ºèªä½ç½®ï¼`
            }]).catch(err => console.error("Send message error", err));
          }
           Swal.fire({
              title: 'é ç´„æˆåŠŸï¼',
              html: 'å·²ç™¼é€è¨Šæ¯è‡³å®˜æ–¹å¸³è™Ÿä¸¦ä¿å­˜ç´€éŒ„ã€‚<br><br><b>è«‹å•éœ€è¦é å…ˆé»é¤å—ï¼Ÿ</b><br><small>(è«‹æ³¨æ„ï¼šé é»é¤æ˜¯ç‚ºæ‚¨ç¯€çœç¾å ´ç­‰å€™æ™‚é–“ï¼Œé¤é»ä¸æœƒæå‰è£½ä½œï¼Œç¾å ´ä»å¯ä¿®æ”¹)</small>',
              icon: 'success',
              showCancelButton: true,
              confirmButtonText: 'å‰å¾€é»é¤',
              cancelButtonText: 'ç¨å¾Œå†èªª',
              confirmButtonColor: '#2c5e50',
              cancelButtonColor: '#6e7881',
            }).then((result) => {
                if (result.isConfirmed) {
                    onBookingSuccess(res.bookingId); 
                } else {
                    onBack();
                }
            });
        } else {
          Swal.fire({ icon: 'error', title: 'é ç´„å¤±æ•—', text: res.message, confirmButtonColor: '#D32F2F' });
        }
        setSubmitting(false);
      };

      return React.createElement("form", { onSubmit: handleBooking, className: "p-6 space-y-6 bg-gray-50" },
        React.createElement("div", { className: "p-4 bg-white rounded-xl shadow-sm border" },
            React.createElement("h3", {className: "font-bold text-gray-700 mb-4 flex items-center gap-2"}, React.createElement(Icon, {name: "calendar", className: "w-5 h-5 text-green-600"}), "ç”¨é¤æ™‚é–“"),
            React.createElement("div", { className: "grid grid-cols-2 gap-4" },
                React.createElement("div", null, React.createElement("span", { className: "label-text" }, "æ—¥æœŸ"), React.createElement("input", { type: "date", className: "input-field", value: form.date, onChange: e => setForm({ ...form, date: e.target.value }) })),
                React.createElement("div", null, React.createElement("span", { className: "label-text" }, "æ™‚é–“"), React.createElement("input", { type: "time", className: "input-field", value: form.time, onChange: e => setForm({ ...form, time: e.target.value }) }))
            )
        ),
        React.createElement("div", { className: "p-4 bg-white rounded-xl shadow-sm border" },
            React.createElement("h3", {className: "font-bold text-gray-700 mb-4 flex items-center gap-2"}, React.createElement(Icon, {name: "user", className: "w-5 h-5 text-purple-600"}), "ç”¨é¤äººæ•¸"),
            React.createElement("div", { className: "grid grid-cols-3 gap-3" },
              React.createElement("div", null, React.createElement("span", { className: "label-text" }, "å¤§äºº"), React.createElement("select", { className: "input-field", value: form.adults, onChange: e => setForm({ ...form, adults: parseInt(e.target.value) }) }, [...Array(41).keys()].slice(1).map(n => React.createElement("option", { key: n, value: n }, n)))),
              React.createElement("div", null, React.createElement("span", { className: "label-text" }, "å°å­©"), React.createElement("select", { className: "input-field", value: form.children, onChange: e => setForm({ ...form, children: parseInt(e.target.value) }) }, [...Array(41).keys()].map(n => React.createElement("option", { key: n, value: n }, n)))),
              React.createElement("div", null, React.createElement("span", { className: "label-text" }, "å…’ç«¥æ¤…"), React.createElement("select", { className: "input-field", value: form.highChairs, onChange: e => setForm({ ...form, highChairs: parseInt(e.target.value) }) }, [...Array(11).keys()].map(n => React.createElement("option", { key: n, value: n }, n))))
            )
        ),
        React.createElement("div", { className: "p-4 bg-white rounded-xl shadow-sm border" },
             React.createElement("h3", {className: "font-bold text-gray-700 mb-4 flex items-center gap-2"}, React.createElement(Icon, {name: "phone", className: "w-5 h-5 text-blue-600"}), "è¯çµ¡è³‡è¨Š"),
             React.createElement("div", {className: "space-y-4"},
                React.createElement("div", null, React.createElement("span", { className: "label-text" }, "è¯çµ¡å§“å"), React.createElement("input", { className: "input-field", required: true, value: form.name, onChange: e => setForm({ ...form, name: e.target.value }) })),
                React.createElement("div", null, React.createElement("span", { className: "label-text" }, "è¯çµ¡é›»è©±"), React.createElement("input", { type: "tel", className: "input-field", required: true, value: form.phone, onChange: e => setForm({ ...form, phone: e.target.value }) })),
                React.createElement("div", null, React.createElement("span", { className: "label-text" }, "å‚™è¨»"), React.createElement("textarea", { className: "input-field", rows: "2", value: form.notes, onChange: e => setForm({ ...form, notes: e.target.value }) }))
             )
        ),
        React.createElement("p", {className: "text-xs text-center text-gray-400 px-4"}, "ç‚ºç¢ºä¿æœå‹™å“è³ªï¼Œç·šä¸Šåƒ…æ¥å—40äººå…§è¨‚ä½ï¼Œè‹¥æœ‰å…¶ä»–éœ€æ±‚è«‹ä¾†é›»æ´½è©¢ã€‚"),
        React.createElement("button", { type: "submit", disabled: submitting, className: "w-full bg-[#D32F2F] text-white py-4 rounded-xl font-bold shadow-lg disabled:bg-gray-400 transition-colors" }, submitting ? "è™•ç†ä¸­..." : "ç¢ºèªé€å‡º")
      );
    };

    const MemberView = ({ member, profile, onMemberUpdate, onMemberDelete }) => {
      const [isEditing, setIsEditing] = useState(false);
      const [form, setForm] = useState(member);

      const handleUpdate = async () => {
        const res = await runGAS('updateMember', { ...form, lineUserId: profile.userId });
        if (res.status === 'success') {
          onMemberUpdate(res.member);
          setIsEditing(false);
          Swal.fire({ icon: 'success', title: 'æ›´æ–°æˆåŠŸ', showConfirmButton: false, timer: 1500 });
        } else {
          Swal.fire({ icon: 'error', title: 'æ›´æ–°å¤±æ•—', text: res.message, confirmButtonColor: '#D32F2F' });
        }
      };
      
      const handleDelete = async () => {
        Swal.fire({
          title: 'ç¢ºå®šè¦åˆªé™¤æœƒå“¡å—?',
          text: "åˆªé™¤å¾Œï¼Œæ‚¨çš„é»æ•¸èˆ‡æœƒå“¡è³‡æ–™å°‡ç„¡æ³•å¾©åŸï¼",
          icon: 'warning',
          showCancelButton: true,
          confirmButtonColor: '#D32F2F',
          cancelButtonColor: '#6e7881',
          confirmButtonText: 'ç¢ºå®šåˆªé™¤',
          cancelButtonText: 'å–æ¶ˆ'
        }).then(async (result) => {
          if (result.isConfirmed) {
            const res = await runGAS('deleteMember', { lineUserId: profile.userId });
            if (res.status === 'success') {
              onMemberDelete();
              Swal.fire('å·²åˆªé™¤', 'æ‚¨çš„æœƒå“¡è³‡æ–™å·²æˆåŠŸåˆªé™¤ã€‚', 'success');
            } else {
              Swal.fire({ icon: 'error', title: 'åˆªé™¤å¤±æ•—', text: res.message, confirmButtonColor: '#D32F2F' });
            }
          }
        })
      };

      if (!member) {
        // Registration Form
        const [regForm, setRegForm] = useState({ name: profile?.displayName || '', phone: '', birthday: '', gender: 'ä¸é€æ¼', email: '', address: '' });
        const [submitting, setSubmitting] = useState(false);
        const handleReg = async e => {
            e.preventDefault();
            setSubmitting(true);
            const res = await runGAS('register', { ...regForm, lineUserId: profile?.userId });
            if (res.status === 'success') { 
                onMemberUpdate(res.member); 
                Swal.fire({ icon: 'success', title: 'æ­¡è¿åŠ å…¥!', text: 'å·²ç²å¾—æ–°æœƒå“¡é»æ•¸ 100 é»', confirmButtonColor: '#2c5e50' });
            } else { 
                Swal.fire({ icon: 'error', title: 'è¨»å†Šå¤±æ•—', text: res.message, confirmButtonColor: '#D32F2F' });
            }
            setSubmitting(false);
        };
        return React.createElement("form", { onSubmit: handleReg, className: "p-6 space-y-4" },
            React.createElement("div", null, React.createElement("span", { className: "label-text" }, "æ‚¨çš„å§“å"), React.createElement("input", { className: "input-field", required: true, value: regForm.name, onChange: e => setRegForm({ ...regForm, name: e.target.value }) })),
            React.createElement("div", null, React.createElement("span", { className: "label-text" }, "æ‰‹æ©Ÿè™Ÿç¢¼"), React.createElement("input", { type: "tel", className: "input-field", required: true, value: regForm.phone, onChange: e => setRegForm({ ...regForm, phone: e.target.value }) })),
            React.createElement("div", { className: "p-4 bg-green-50 rounded-2xl border border-dashed border-green-200" },
               React.createElement("span", { className: "label-text text-green-700" }, "ğŸ‚ ç”Ÿæ—¥é©šå–œ"),
               React.createElement("input", { type: "date", className: "input-field border-green-200", required: true, value: regForm.birthday, onChange: e => setRegForm({ ...regForm, birthday: e.target.value }) }),
               React.createElement("p", { className: "text-[10px] text-gray-400 mt-2" }, "* ç”Ÿæ—¥ç•¶æœˆè´ˆé€å°ˆå±¬ç”Ÿæ—¥é¤åˆ¸ä¹™å¼µ")
            ),
            React.createElement("button", { type: "submit", disabled: submitting, className: "w-full bg-[#2c5e50] text-white py-4 rounded-xl font-bold shadow-md disabled:bg-gray-400 transition-colors" }, submitting ? "è™•ç†ä¸­..." : "ç¢ºèªåŠ å…¥")
        );
      }

      // Member View
      return React.createElement("div", { className: "p-6" },
        React.createElement("div", { className: "bg-gradient-to-br from-[#2c5e50] to-black p-6 rounded-2xl text-white shadow-xl relative overflow-hidden" },
          React.createElement("div", { className: "text-xl font-bold mb-8" }, RESTAURANT_NAME),
          React.createElement("div", { className: "flex justify-between items-end" },
            React.createElement("div", null, React.createElement("p", { className: "text-sm opacity-80" }, member.name), React.createElement("p", { className: "tracking-widest" }, member.phone)),
            React.createElement("div", { className: "text-right" }, React.createElement("p", { className: "text-[10px] opacity-60" }, "POINTS"), React.createElement("p", { className: "text-2xl font-bold" }, member.points))
          )
        ),
        React.createElement("div", { className: "mt-6 bg-white rounded-xl p-4 border space-y-3" },
            isEditing ?
            React.createElement(React.Fragment, null, 
                React.createElement("div", null, React.createElement("span", { className: "label-text" }, "å§“å"), React.createElement("input", { className: "input-field", value: form.name, onChange: e => setForm({ ...form, name: e.target.value }) })),
                React.createElement("div", null, React.createElement("span", { className: "label-text" }, "é›»è©±"), React.createElement("input", { className: "input-field", value: form.phone, onChange: e => setForm({ ...form, phone: e.target.value }) })),
                React.createElement("div", null, React.createElement("span", { className: "label-text" }, "ç”Ÿæ—¥"), React.createElement("input", { type: "date", className: "input-field", value: form.birthday, onChange: e => setForm({ ...form, birthday: e.target.value }) })),
                React.createElement("div", { className: "flex gap-2 pt-2"},
                    React.createElement("button", { onClick: handleUpdate, className: "w-full bg-green-600 text-white py-2 rounded-lg font-bold" }, "å„²å­˜"),
                    React.createElement("button", { onClick: () => { setIsEditing(false); setForm(member); }, className: "w-full bg-gray-200 py-2 rounded-lg" }, "å–æ¶ˆ"),
                )
            ) :
            React.createElement(React.Fragment, null,
                React.createElement("div", { className: "flex justify-end gap-2" },
                    React.createElement("button", { onClick: () => setIsEditing(true), className: "flex items-center gap-1 text-sm bg-gray-100 px-3 py-1 rounded-full" }, React.createElement(Icon, {name:"edit", className:"w-4 h-4"}), "ä¿®æ”¹è³‡æ–™"),
                    React.createElement("button", { onClick: handleDelete, className: "flex items-center gap-1 text-sm bg-red-50 text-red-600 px-3 py-1 rounded-full" }, React.createElement(Icon, {name:"trash", className:"w-4 h-4"}), "åˆªé™¤æœƒå“¡"),
                )
            )
        )
      );
    };

    const PreorderView = ({ bookingId, onBack }) => {
        const menuData = {
          categories: [
            { name: "PIZZA 7å‹", items: [{ n: "è•ƒèŒ„ç”°åœ’æ™‚è”¬æŠ«è–©(è›‹å¥¶ç´ )", p: 170 }, { n: "å—ç“œç”°åœ’æ™‚è”¬æŠ«è–©(è›‹å¥¶ç´ )", p: 160 }, { n: "ç¾©å¼è‚‰é†¬é‡è‡æŠ«è–©(å«ç‰›è‚‰)", p: 160 }, { n: "ç‡»é›ç¶œåˆèŒè‡æŠ«è–©", p: 160 }, { n: "å¢¨è¥¿å“¥è¾£å‘³é¦™è…¸æŠ«è–©", p: 180, s: 1 }, { n: "å¤å¨å¤·è¦ä»æŠ«è–©", p: 200 }, { n: "ç…™ç‡»é´¨èƒ¸è‚‰æŠ«è–©", p: 200 }, { n: "B.B.Qæµ·é®®æŠ«è–©", p: 200 }, { n: "æ³•å¼é†¬æµ·é®®æŠ«è–©", p: 200 }, { n: "é»‘æ¾éœ²é‡è‡æŠ«è–©", p: 240 }] },
            { name: "ç™½é†¬", items: [{ n: "å¥¶æ²¹åŸ¹æ ¹ç¾©å¤§åˆ©éºµ", p: 170 }, { n: "å¥¶æ²¹æ™‚è”¬ç¾©å¤§åˆ©éºµ(è›‹å¥¶ç´ )", p: 170 }, { n: "è¥¿è¥¿é‡Œå¥¶æ²¹å«©é›ç¾©å¤§åˆ©éºµ", p: 170 }, { n: "å¢¨è¥¿å“¥è¾£å‘³å«©é›ç¾©å¤§åˆ©éºµ", p: 180, s: 1 }, { n: "é»ƒèŠ¥æœ«é„‰æ‘å«©é›ç¾©å¤§åˆ©éºµ", p: 180 }, { n: "å¥¶æ²¹é¦™è¾£ç‡»é´¨ç¾©å¤§åˆ©éºµ", p: 190, s: 1 }, { n: "å¥¶æ²¹è›¤èœŠç¾©å¤§åˆ©éºµ", p: 220 }, { n: "å¥¶æ²¹æµ·é®®ç¸½åŒ¯ç¾©å¤§åˆ©éºµ", p: 220 }, { n: "å¥¶æ²¹è¾£å‘³èŠ±æå¢¨é­šéºµ", p: 260, s: 1 }, { n: "å¥¶æ²¹é¦™ç‡»é®­é­šç¾©å¤§åˆ©éºµ", p: 270 }, { n: "å¥¶æ²¹é¦™çƒ¤é›è…¿æ’ç¾©å¤§åˆ©éºµ", p: 280 }] },
            { name: "èŒ„æ±", items: [{ n: "æ³¢éš†é‚£è‚‰é†¬ç¾©å¤§åˆ©éºµ(å«ç‰›è‚‰)", p: 170 }, { n: "èŒ„æ±è¾£å‘³åŸ¹æ ¹ç¾©å¤§åˆ©éºµ", p: 170, s: 1 }, { n: "èŒ„æ±é„‰æ‘å«©é›ç¾©å¤§åˆ©éºµ", p: 170 }, { n: "èŒ„æ±è¾£å‘³å¾·å¼é¦™è…¸ç¾©å¤§åˆ©éºµ", p: 190, s: 1 }, { n: "èŒ„æ±è¾£å‘³é›ªèŠ±ç‰›ç¾©å¤§åˆ©éºµ", p: 220, s: 1 }, { n: "ç²‰ç´…æ¼æ²ƒæµ·é®®ç¾©å¤§åˆ©éºµ", p: 220 }, { n: "èŒ„æ±é¦™çƒ¤é›è…¿æ’ç¾©å¤§åˆ©éºµ", p: 280 }] },
            { name: "é’é†¬", items: [{ n: "ç¾…å‹’é‡è‡ç¾©å¤§åˆ©éºµ", p: 180 }, { n: "ç¾…å‹’é„‰æ‘å«©é›ç¾©å¤§åˆ©éºµ", p: 190 }, { n: "ç¾…å‹’é›ªèŠ±ç‰›ç¾©å¤§åˆ©éºµ", p: 220 }, { n: "ç¾…å‹’å”æšç‚¸é›ç¾©å¤§åˆ©éºµ", p: 230 }, { n: "ç¾…å‹’å¤šåˆ©é­šç¾©å¤§åˆ©éºµ", p: 240 }, { n: "ç¾…å‹’æµ·é®®ç¸½åŒ¯ç¾©å¤§åˆ©éºµ", p: 240 }, { n: "ç¾…å‹’é¦™ç‡»é®­é­šç¾©å¤§åˆ©éºµ", p: 270 }, { n: "ç¾…å‹’è¾£å‘³é®®è¦å¢¨é­šéºµ", p: 280, s: 1 }] },
            { name: "å—ç“œ", items: [{ n: "å—ç“œåŸ¹æ ¹ç¾©å¤§åˆ©éºµ", p: 170 }, { n: "å—ç“œæ™‚è”¬ç¾©å¤§åˆ©éºµ(è›‹å¥¶ç´ )", p: 170 }, { n: "å—ç“œé„‰æ‘å«©é›ç¾©å¤§åˆ©éºµ", p: 170 }, { n: "å—ç“œè¾£å‘³é¦™è…¸ç¾©å¤§åˆ©éºµ", p: 190 }, { n: "å—ç“œèŠ±æè¦ä»ç¾©å¤§åˆ©éºµ", p: 200 }, { n: "å—ç“œæµ·é®®ç¸½åŒ¯ç¾©å¤§åˆ©éºµ", p: 220 }] },
            { name: "å’–å“©", items: [{ n: "å’–å“©é„‰æ‘å«©é›ç¾©å¤§åˆ©éºµ", p: 170 }, { n: "å’–å“©é›ªèŠ±ç‰›ç¾©å¤§åˆ©éºµ", p: 200 }, { n: "å’–å“©å”æšé›ç¾©å¤§åˆ©éºµ", p: 210 }, { n: "ç´…orç¶ å’–å“©å«©é›ç¾©å¤§åˆ©éºµ", p: 190, s: 2 }, { n: "ç´…orç¶ å’–å“©æ¢…èŠ±è±¬ç¾©å¤§åˆ©éºµ", p: 220, s: 2 }, { n: "ç´…orç¶ å’–å“©é›ªèŠ±ç‰›ç¾©å¤§åˆ©éºµ", p: 220, s: 2 }, { n: "ç´…orç¶ å’–å“©å¤šåˆ©é­šç¾©å¤§åˆ©éºµ", p: 240, s: 2 }] },
            { name: "ä¸»å»šæ¨è–¦", items: [{ n: "å®®ä¿è¾£å‘³é›ä¸ç¾©å¤§åˆ©éºµ", p: 200, s: 2 }, { n: "å®®ä¿è¾£å‘³èŠ±æç¾©å¤§åˆ©éºµ", p: 220, s: 2 }, { n: "è’œé¦™ç™½é…’è›¤è £ç¾©å¤§åˆ©éºµ", p: 240 }, { n: "æ¥µå“X.Oé†¬æµ·é®®ç¾©å¤§åˆ©éºµ", p: 250 }, { n: "å¢¨é­šæ±æµ·é®®å¢¨é­šéºµ", p: 260 }] },
            { name: "ç¾©å¼ç‡‰é£¯", items: [{ n: "æ³¢éš†é‚£è‚‰é†¬ç‡‰é£¯", p: 160 }, { n: "å¥¶æ²¹ç‡»é›ç‡‰é£¯", p: 160 }, { n: "å¥¶æ²¹åŸ¹æ ¹ç‡‰é£¯", p: 170 }, { n: "å’–å“©é„‰æ‘å«©é›ç‡‰é£¯", p: 170 }, { n: "å—ç“œæ™‚è”¬ç‡‰é£¯(è›‹å¥¶ç´ )", p: 170 }, { n: "å—ç“œå¾·å¼é¦™è…¸ç‡‰é£¯", p: 190 }, { n: "ç´…å’–å“©orç¶ å’–å“©é„‰æ‘å«©é›ç‡‰é£¯", p: 180, s: 2 }, { n: "èŒ„æ±è¾£å‘³é¦™è…¸ç‡‰é£¯", p: 190, s: 1 }, { n: "å¥¶æ²¹é¦™è¾£ç‡»é´¨ç‡‰é£¯", p: 190, s: 1 }, { n: "å¥¶æ²¹è¥¿ç­ç‰™ç´…æ¤’å«©é›ç‡‰é£¯", p: 190 }, { n: "å¥¶æ²¹è¥¿ç­ç‰™ç´…æ¤’é›ªèŠ±ç‰›ç‡‰é£¯", p: 220 }, { n: "ç²‰ç´…æ¼æ²ƒæµ·é®®ç‡‰é£¯", p: 220 }, { n: "ç¾…å‹’å”æšç‚¸é›ç‡‰é£¯", p: 230 }, { n: "å¢¨é­šæ±èŠ±æç‡‰é£¯", p: 230 }, { n: "å¢¨é­šæ±æµ·é®®ç‡‰é£¯", p: 240 }, { n: "ç¾…å‹’é¦™ç‡»é®­é­šç‡‰é£¯", p: 270 }, { n: "å¥¶æ²¹é¦™çƒ¤é›è…¿æ’ç‡‰é£¯", p: 280 }, { n: "å’–å“©é¦™çƒ¤é›è…¿æ’ç‡‰é£¯", p: 280 }, { n: "å¤å­£é»‘æ¾éœ²é‡è‡ç‡‰é£¯", p: 290 }] },
            { name: "ç„—çƒ¤", items: [{ n: "ç„—çƒ¤æ³¢éš†é‚£è‚‰é†¬ç­†å°–éºµ", p: 200 }, { n: "ç„—çƒ¤é’é†¬å«©é›ç­†å°–éºµ", p: 210 }, { n: "ç„—çƒ¤å¥¶æ²¹å«©é›ç­†å°–éºµ", p: 210 }, { n: "ç„—çƒ¤å’–å“©å«©é›ç­†å°–éºµ", p: 210 }, { n: "ç„—çƒ¤ç´…å’–å“©é„‰æ‘å«©é›ç­†å°–éºµ", p: 220, s: 2 }, { n: "ç„—çƒ¤ç¶ å’–å“©é„‰æ‘å«©é›ç­†å°–éºµ", p: 220, s: 2 }, { n: "ç„—çƒ¤èŒ„æ±è¾£å‘³é¦™è…¸ç­†å°–éºµ", p: 230, s: 1 }, { n: "ç„—çƒ¤å’–å“©é›ªèŠ±ç‰›ç­†å°–éºµ", p: 240 }, { n: "ç„—çƒ¤å¥¶æ²¹æµ·é®®ç­†å°–éºµ", p: 260 }, { n: "ç„—çƒ¤é»‘æ¾éœ²é‡è‡ç­†å°–éºµ", p: 330 }, { n: "ç„—çƒ¤å¥¶æ²¹é¦™çƒ¤é›è…¿æ’ç­†å°–éºµ", p: 340 }, { n: "ç„—çƒ¤å’–å“©é¦™çƒ¤é›è…¿æ’ç­†å°–éºµ", p: 340 }] },
            { name: "å–®é»", items: [{ n: "éº¥å…‹é›å¡Š", p: 80 }, { n: "ç¾å¼è„†è–¯", p: 90 }, { n: "æ´‹è”¥åœˆ", p: 80 }, { n: "ç¾©å¼ç„—çƒ¤æé®‘è‡", p: 100 }, { n: "ç´æ¾³è‰¯é¦™è¾£çƒ¤é›ç¿…", p: 140 }, { n: "éºµåŒ…(2å€‹)", p: 30 }, { n: "ä¸»å»šæ¿ƒæ¹¯", p: 50 }, { n: "é…¥çš®æ¿ƒæ¹¯", p: 100 }, { n: "åŠ éºµoråŠ é£¯", p: 30 }, { n: "åŠ ç„—çƒ¤", p: 40 }] },
            { name: "é£²å“", items: [{ n: "å¯æ¨‚", p: 50 }, { n: "é›ªç¢§", p: 50 }, { n: "è˜‹æœè¥¿æ‰“", p: 50 }, { n: "å¯çˆ¾å¿…æ€", p: 60 }, { n: "ç´…èŒ¶(å†°/ç†±)", p: 60 }, { n: "ç¶ èŒ¶(ç†±)", p: 60 }, { n: "å¥¶èŒ¶(å†°/ç†±)", p: 60 }, { n: "å¥¶ç¶ (ç†±)", p: 60 }, { n: "æ¡‚èŠ±èœœèŒ¶(å†°)", p: 60 }] }
          ]
        };
        const [cart, setCart] = useState([]);
        const [activeCategory, setActiveCategory] = useState(menuData.categories[0].name);

        const addToCart = (item) => {
            setCart(prev => {
                const existing = prev.find(i => i.n === item.n);
                if (existing) {
                    return prev.map(i => i.n === item.n ? { ...i, qty: i.qty + 1 } : i);
                }
                return [...prev, { ...item, qty: 1 }];
            });
        };

        const updateQuantity = (name, delta) => {
            setCart(prev => {
                const item = prev.find(i => i.n === name);
                if (item.qty + delta <= 0) {
                    return prev.filter(i => i.n !== name);
                }
                return prev.map(i => i.n === name ? { ...i, qty: i.qty + delta } : i);
            });
        };
        
        const total = useMemo(() => cart.reduce((sum, item) => sum + item.p * item.qty, 0), [cart]);

        const handleSubmit = async () => {
            const res = await runGAS('savePreOrder', { bookingId, order: cart });
            if(res.status === 'success') {
                await Swal.fire({ icon: 'success', title: 'é»é¤æˆåŠŸ', text: 'æ‚¨çš„é»é¤ç´€éŒ„å·²å„²å­˜ï¼ŒæœŸå¾…æ‚¨çš„å…‰è‡¨ï¼', confirmButtonColor: '#2c5e50'});
                onBack();
            } else {
                 Swal.fire({ icon: 'error', title: 'é»é¤å¤±æ•—', text: res.message, confirmButtonColor: '#D32F2F' });
            }
        };

        return React.createElement("div", { className: "flex h-full" },
            React.createElement("div", { className: "w-1/4 bg-gray-100 overflow-y-auto" },
                menuData.categories.map(cat => React.createElement("button", {
                    key: cat.name,
                    onClick: () => setActiveCategory(cat.name),
                    className: `w-full text-left p-3 text-sm font-bold ${activeCategory === cat.name ? 'bg-white text-green-800' : 'text-gray-600'}`
                }, cat.name))
            ),
            React.createElement("div", { className: "w-3/4 p-4 overflow-y-auto" },
                React.createElement("div", { className: "space-y-2" },
                    menuData.categories.find(c => c.name === activeCategory).items.map(item => React.createElement("div", {
                        key: item.n,
                        className: "flex justify-between items-center bg-white p-3 rounded-lg border"
                    }, 
                        React.createElement("div", null, 
                            React.createElement("p", { className: "font-bold" }, item.n, " ", item.s ? 'ğŸŒ¶ï¸'.repeat(item.s) : ''),
                            React.createElement("p", { className: "text-sm text-gray-500" }, `$${item.p}`)
                        ),
                        React.createElement("button", { onClick: () => addToCart(item), className: "bg-green-100 text-green-800 font-bold px-3 py-1 rounded-full text-sm" }, "åŠ å…¥")
                    ))
                )
            ),
            cart.length > 0 && React.createElement("div", { className: "fixed bottom-0 left-0 right-0 bg-white shadow-[0_-4px_12px_rgba(0,0,0,0.1)] p-4" },
                React.createElement("h3", { className: "font-bold text-lg mb-2 flex items-center gap-2" }, React.createElement(Icon, {name:'cart', className:'w-6 h-6'}), "æˆ‘çš„è¨‚å–®"),
                React.createElement("div", { className: "max-h-32 overflow-y-auto space-y-2 mb-2" }, 
                    cart.map(item => React.createElement("div", { key: item.n, className: "flex justify-between items-center text-sm" }, 
                        React.createElement("p", null, item.n),
                        React.createElement("div", { className: "flex items-center gap-2" },
                            React.createElement("button", { onClick: () => updateQuantity(item.n, -1), className: "w-6 h-6 rounded-full bg-gray-200" }, "-"),
                            React.createElement("span", null, item.qty),
                            React.createElement("button", { onClick: () => updateQuantity(item.n, 1), className: "w-6 h-6 rounded-full bg-gray-200" }, "+"),
                            React.createElement("span", { className: "w-16 text-right" }, `$${item.p * item.qty}`)
                        )
                    ))
                ),
                React.createElement("div", { className: "border-t pt-2 flex justify-between items-center" }, 
                    React.createElement("p", { className: "font-bold" }, "ç¸½è¨ˆ: $", total),
                    React.createElement("button", { onClick: handleSubmit, className: "bg-[#D32F2F] text-white font-bold px-6 py-2 rounded-lg" }, "ç¢ºèªé€å‡º")
                )
            )
        );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(React.createElement(App));
  </script>
</head>
<body>
  <div id="root"></div>
</body>
</html>