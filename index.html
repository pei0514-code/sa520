<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Ëñ©Ë´æÁì¶Áæ©ÂºèÂªöÊàø - SANOVA KITCHEN</title>
  
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&display=swap');

    :root {
      --comic-yellow: #FEF08A;
      --comic-pink: #F9A8D4;
      --comic-blue: #BAE6FD;
      --comic-white: #FFFFFF;
      --comic-black: #18181B;
    }
    body { 
      font-family: 'Noto Sans TC', "Microsoft JhengHei", sans-serif; 
      background-color: #FFFBEB;
      background-image: radial-gradient(#FCD34D 1.5px, transparent 1.5px);
      background-size: 24px 24px;
      margin: 0; padding: 0; overflow-x: hidden;
      -webkit-tap-highlight-color: transparent;
      color: #18181B;
    }
    
    .animate-fade-in { animation: fadeIn 0.3s ease-out forwards; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    
    .no-scrollbar::-webkit-scrollbar { display: none; }
    
    /* Comic Style Utilities */
    .comic-box {
      background: white;
      border: 3px solid black;
      border-radius: 1.5rem;
      box-shadow: 6px 6px 0px 0px black;
      transition: all 0.2s;
    }
    
    .comic-btn-primary {
      background: #EF4444; /* Red-500 */
      color: white;
      border: 3px solid black;
      border-radius: 1rem;
      font-weight: 900;
      padding: 1rem;
      width: 100%;
      box-shadow: 4px 4px 0px 0px black;
      transition: all 0.1s;
      display: flex; align-items: center; justify-content: center; gap: 0.5rem;
      cursor: pointer;
    }
    .comic-btn-primary:active:not(:disabled) {
      transform: translate(2px, 2px);
      box-shadow: 2px 2px 0px 0px black;
    }
    .comic-btn-primary:disabled {
      background: #9CA3AF;
      color: #E5E7EB;
      box-shadow: none;
      transform: translate(2px, 2px);
      border-color: #6B7280;
      cursor: not-allowed;
    }

    .comic-input {
      width: 100%;
      background: #FFF;
      border: 3px solid black;
      border-radius: 1rem;
      padding: 1rem;
      font-weight: 700;
      outline: none;
      transition: all 0.2s;
    }
    .comic-input:focus {
      background: #FEF9C3; /* Yellow-100 */
      transform: scale(1.02);
    }

    /* Stepper Buttons */
    .comic-stepper {
      width: 3rem; height: 3rem;
      background: white;
      border: 2px solid black;
      border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      font-weight: 900; font-size: 1.25rem;
      box-shadow: 2px 2px 0px 0px black;
      transition: all 0.1s;
    }
    .comic-stepper:active {
      transform: translate(1px, 1px);
      box-shadow: 1px 1px 0px 0px black;
      background: #FEE2E2;
    }

    /* Loading Overlay */
    #loading-overlay {
      position: fixed; inset: 0; background: #FEF3C7; display: flex; flex-direction: column;
      align-items: center; justify-content: center; z-index: 9999;
      transition: opacity 0.6s ease;
    }
    
    /* Admin Styles */
    .admin-mode {
        background-color: #F8FAFC !important;
        background-image: none !important;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif !important;
        color: #334155 !important;
    }
    .admin-container { max-width: 100%; margin: 0 auto; }
    .admin-card {
        background: white; border: 1px solid #E2E8F0; border-radius: 0.5rem;
        box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
        padding: 1.5rem; margin-bottom: 1.5rem;
    }
    .admin-header {
        background-color: #1E293B; color: white; padding: 1rem 1.5rem;
        position: sticky; top: 0; z-index: 50; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        display: flex; justify-content: space-between; align-items: center;
    }
    .admin-btn {
        background-color: #3B82F6; color: white; padding: 0.5rem 1rem; border-radius: 0.375rem;
        font-size: 0.875rem; font-weight: 500; transition: background-color 0.2s; border: none;
        box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); cursor: pointer;
    }
    .admin-input {
        width: 100%; border: 1px solid #CBD5E1; border-radius: 0.375rem; padding: 0.5rem 0.75rem;
        font-size: 0.875rem; outline: none; transition: border-color 0.2s;
    }
    .admin-label {
        display: block; font-size: 0.75rem; font-weight: 700; color: #64748B;
        text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.25rem;
    }
    .admin-table { width: 100%; border-collapse: collapse; font-size: 0.875rem; }
    .admin-table th { text-align: left; padding: 0.75rem 1rem; background-color: #F8FAFC; border-bottom: 1px solid #E2E8F0; color: #64748B; font-weight: 600; text-transform: uppercase; font-size: 0.75rem; }
    .admin-table td { padding: 0.75rem 1rem; border-bottom: 1px solid #F1F5F9; color: #334155; vertical-align: top; }
    .admin-table tr:hover { background-color: #F8FAFC; }
    .admin-action-btn { padding: 0.25rem 0.5rem; font-size: 0.75rem; border-radius: 0.25rem; margin-right: 0.25rem; cursor: pointer; color: white; border: none;}
    .btn-edit { background-color: #F59E0B; }
    .btn-delete { background-color: #EF4444; }
    .btn-notify { background-color: #10B981; }
  </style>
</head>
<body>
  <div id="loading-overlay">
    <div class="comic-box p-6 flex flex-col items-center">
        <div class="animate-bounce text-9xl mb-6">üçù</div>
        <p class="font-black text-xl tracking-widest text-slate-800">LOADING...</p>
    </div>
  </div>

  <div id="root"></div>

  <script>
    window.process = window.process || { env: { API_KEY: '' } };
    setTimeout(() => {
        const el = document.getElementById('loading-overlay');
        if(el) el.style.display = 'none';
    }, 5000);
  </script>

  <script type="module">
    import React, { useState, useEffect, useMemo, useRef } from 'https://esm.sh/react@18.2.0';
    import ReactDOM from 'https://esm.sh/react-dom@18.2.0/client';

    const LIFF_ID = "2008861231-EA0Hpl68"; 
    const RESTAURANT_NAME = "Ëñ©Ë´æÁì¶Áæ©ÂºèÂªöÊàø"; 
    const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxHOJOzIGqCnW-ttjB0_OeJ6eIz3iqF3dnYSwGeK4L2vRi6dEuWZ-i_DoM5pHjz9u7PlA/exec";
    const FB_URL = "https://www.facebook.com/sa520";
    const ADMIN_PHONES = ['0937942582', '0978375273', '0978375592'];

    // --- MOCK DATA ---
    const MOCK_FAQS = [
        { ÂïèÈ°å: "Â¶Ç‰ΩïÈÄ≤Ë°åÁ∑ö‰∏äË®Ç‰ΩçÔºü", ÂõûÁ≠î: "Ë´ãÈªûÈÅ∏‰∏ãÊñπÈÅ∏ÂñÆÁöÑ„ÄåÁ∑ö‰∏äË®Ç‰Ωç„ÄçÔºåÈÅ∏ÊìáÊó•Êúü„ÄÅÊôÇÈñìËàá‰∫∫Êï∏ÂæåÂç≥ÂèØÂÆåÊàêÈ†êÁ¥Ñ„ÄÇ" },
        { ÂïèÈ°å: "Êúâ‰ΩéÊ∂àÈôêÂà∂ÂóéÔºü", ÂõûÁ≠î: "ÊØè‰∫∫ÊúÄ‰ΩéÊ∂àË≤ªÁÇ∫ 100 ÂÖÉ (120cm ‰ª•‰∏ãÂÖíÁ´•ÂÖç‰ΩéÊ∂à)„ÄÇ" },
        { ÂïèÈ°å: "ÂèØ‰ª•ÊîúÂ∏∂ÂØµÁâ©ÂóéÔºü", ÂõûÁ≠î: "ÁÇ∫Á∂≠Ë≠∑Áî®È§êÁí∞Â¢ÉÔºåÁõÆÂâçÊö´‰∏çÈñãÊîæÊîúÂ∏∂ÂØµÁâ©ÂÖ•ÂÖß(Â∞éÁõ≤Áä¨Èô§Â§ñ)ÔºåÊï¨Ë´ãË¶ãË´í„ÄÇ" },
        { ÂïèÈ°å: "ÊòØÂê¶ÊúâÂ£ΩÊòüÂÑ™ÊÉ†Ôºü", ÂõûÁ≠î: "Áï∂ÊúàÂ£ΩÊòüÂä†ÂÖ•ÊúÉÂì°‰∏¶Âá∫Á§∫Ë≠â‰ª∂ÔºåÂèØ‰∫´Â∞àÂ±¨ÊäòÊâ£ÂÑ™ÊÉ†ÔºÅË©≥ÊÉÖË´ãË¶ãÊúÉÂì°‰∏≠ÂøÉ„ÄÇ" }
    ];
    const MOCK_PROMOS = [
        { È°ûÂûã: 'HOT', Ê®ôÈ°å: 'Âä†ÂÖ•ÊúÉÂì°‰∫´ÂÑ™ÊÉ†', ÂÖßÂÆπ: 'Á´ãÂç≥Ë®ªÂÜäÊúÉÂì°Ôºå‰∏çÂÆöÊúü‰∫´ÊúâÂ∞àÂ±¨ÊäòÊâ£ËàáÂ£ΩÊòüÂ•ΩÁ¶ÆÔºÅ', ÂúñÁâáÁ∂≤ÂùÄ: 'https://images.unsplash.com/photo-1552566626-52f8b828add9?auto=format&fit=crop&q=80&w=600' },
        { È°ûÂûã: 'NEW', Ê®ôÈ°å: 'Â≠£ÁØÄÈôêÂÆöÈ§êÈªû‰∏äÂ∏Ç', ÂÖßÂÆπ: '‰∏ªÂªöÁâπË£ΩÂ≠£ÁØÄÊñôÁêÜÔºåÈôêÊôÇ‰æõÊáâ‰∏≠ÔºåÊ≠°ËøéÂöêÈÆÆÔºÅ', ÂúñÁâáÁ∂≤ÂùÄ: 'https://images.unsplash.com/photo-1504674900247-0877df9cc836?auto=format&fit=crop&q=80&w=600' }
    ];
    const MOCK_MENU = [
        { È°ûÂà•: '‰∏ªÂªöÊé®Ëñ¶', Áî¢ÂìÅÂêçÁ®±: 'ÂÆÆ‰øùËæ£Âë≥Èõû‰∏ÅÁæ©Â§ßÂà©È∫µ', Áî¢ÂìÅÂÉπÊ†º: 210, Ê®ôÁ±§: 'Ëæ£' },
        { È°ûÂà•: '‰∏ªÂªöÊé®Ëñ¶', Áî¢ÂìÅÂêçÁ®±: 'ËíúÈ¶ôÁôΩÈÖíËõ§Ë†£Áæ©Â§ßÂà©È∫µ', Áî¢ÂìÅÂÉπÊ†º: 250, Ê®ôÁ±§: '' },
        { È°ûÂà•: 'Áæ©Â§ßÂà©È∫µ', Â≠êÈ°ûÂà•: 'ÁôΩÈÜ¨', Áî¢ÂìÅÂêçÁ®±: 'Â•∂Ê≤πÂüπÊ†πÁæ©Â§ßÂà©È∫µ', Áî¢ÂìÅÂÉπÊ†º: 180, Ê®ôÁ±§: '' },
        { È°ûÂà•: 'È£≤ÂìÅ', Áî¢ÂìÅÂêçÁ®±: 'ÂèØÊ®Ç', Áî¢ÂìÅÂÉπÊ†º: 50, Ê®ôÁ±§: '' }
    ];

    const isValidPhone = (phone) => {
        const clean = phone.replace(/\D/g, '');
        return /^09\d{8}$/.test(clean);
    };

    // Icons
    const Icon = ({ name, className }) => {
      const paths = {
        home: "M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6",
        menu: "M4 6h16M4 12h16M4 18h16",
        calendar: "M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2-2H5a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z",
        user: "M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z",
        back: "M10 19l-7-7m0 0l7-7m-7 7h18",
        info: "M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z",
        phone: "M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z",
        chart: "M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z",
        gift: "M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7",
        sparkles: "M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-7.714 2.143L11 21l-2.286-6.857L1 12l7.714-2.143L11 3z",
        question: "M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z",
        x: "M6 18L18 6M6 6l12 12",
        download: "M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4",
        zoom: "M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7",
        trash: "M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16",
        edit: "M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z",
        map: "M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z M15 11a3 3 0 11-6 0 3 3 0 016 0z",
        facebook: "M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z",
        plus: "M12 4v16m8-8H4",
        phone_fill: "M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z",
        settings: "M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 11-6 0 3 3 0 016 0z",
        check: "M5 13l4 4L19 7",
        chevronLeft: "M15 19l-7-7 7-7",
        chevronRight: "M9 5l7 7-7 7"
      };
      return React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", className, fill: name === 'facebook' ? "currentColor" : "none", viewBox: "0 0 24 24", stroke: name === 'facebook' ? "none" : "currentColor", strokeWidth: "2.5" },
        React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: paths[name] || "" })
      );
    };

    const runGAS = async (action, params = {}) => {
      try {
        const response = await fetch(GOOGLE_SCRIPT_URL, {
          method: 'POST',
          headers: { 'Content-Type': 'text/plain;charset=utf-8' },
          body: JSON.stringify({ action, ...params })
        });
        return await response.json();
      } catch (err) {
        return { status: 'error', message: 'ÈÄ£Á∑ö‰∏çÁ©©ÂÆöÔºåË´ãÁ®çÂæåÂÜçË©¶' };
      }
    };

    const ComicButton = ({ children, onClick, active, disabled, className }) => {
        return React.createElement("button", { 
            onClick: onClick, 
            disabled: disabled,
            className: `
                py-3 px-4 rounded-xl text-sm font-black border-2 border-black transition-all w-full
                ${active 
                    ? 'bg-[#FCD34D] text-black shadow-[2px_2px_0px_0px_black] transform translate-y-[-2px]' 
                    : disabled 
                        ? 'bg-slate-100 text-slate-300 border-slate-300 cursor-not-allowed' 
                        : 'bg-white text-black shadow-[4px_4px_0px_0px_black] active:shadow-none active:translate-x-[4px] active:translate-y-[4px]'
                } ${className || ''}
            `
        }, children);
    }

    const InfoView = ({ data }) => React.createElement("div", { className: "p-6 pb-32 animate-fade-in text-center" }, 
        React.createElement("h3", { className: "font-black text-2xl text-black mb-6 bg-[#86EFAC] inline-block px-4 py-1 border-2 border-black shadow-[4px_4px_0px_0px_black] transform -rotate-2" }, "Â∫óÂÆ∂Ë≥áË®ä"),
        React.createElement("div", { className: "comic-box p-8 bg-white relative" },
             React.createElement("div", { className: "w-full h-48 bg-slate-100 border-2 border-black rounded-xl overflow-hidden mb-6 shadow-[2px_2px_0px_0px_black]" },
                React.createElement("iframe", { 
                    src: "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3656.918918844852!2d118.41703207606138!3d24.43735917812585!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x341e97666e850d99%3A0x629551d7e35b750!2z6Jip6Ku-55Om576p5a0Q5beda5aSn5Yip5bua5oi_!5e0!3m2!1szh-TW!2stw!4v1709470000000!5m2!1szh-TW!2stw",
                    width: "100%", height: "100%", style: { border: 0 }, allowFullScreen: true, loading: "lazy", referrerPolicy: "no-referrer-when-downgrade" 
                })
             ),
             React.createElement("p", { className: "font-black text-xl mb-2" }, "Ëñ©Ë´æÁì¶Áæ©ÂºèÂªöÊàø"),
             React.createElement("a", { href: "tel:082332530", className: "text-3xl font-black text-red-500 block mb-4 hover:underline" }, "082-332530"),
             React.createElement("p", { className: "text-slate-500 text-sm font-bold" }, "ÈáëÈñÄÁ∏£ÈáëÊπñÈéÆÂ§™ÊπñË∑Ø‰∫åÊÆµ3Â∑∑6Ëôü"),
             React.createElement("div", { className: "flex flex-wrap justify-center gap-4 mt-8" },
                React.createElement("button", { onClick: () => window.open('https://maps.app.goo.gl/3Xp8Xn8Y8Xn8Y8Xn8', '_blank'), className: "flex items-center gap-2 px-6 py-3 bg-[#BAE6FD] border-2 border-black rounded-xl font-black text-black shadow-[4px_4px_0px_0px_black] active:translate-y-1 active:shadow-none transition-all" }, React.createElement(Icon, { name: "map", className: "w-5 h-5" }), "Â∞éËà™"),
                React.createElement("button", { onClick: () => window.location.href = 'tel:082332530', className: "flex items-center gap-2 px-6 py-3 bg-[#F9A8D4] border-2 border-black rounded-xl font-black text-black shadow-[4px_4px_0px_0px_black] active:translate-y-1 active:shadow-none transition-all" }, React.createElement(Icon, { name: "phone", className: "w-5 h-5" }), "Êí•ÊâìÈõªË©±"),
                React.createElement("button", { onClick: () => window.open(FB_URL, '_blank'), className: "flex items-center gap-2 px-6 py-3 bg-[#3B82F6] border-2 border-black rounded-xl font-black text-white shadow-[4px_4px_0px_0px_black] active:translate-y-1 active:shadow-none transition-all" }, React.createElement(Icon, { name: "facebook", className: "w-5 h-5" }), "Á≤âÂ∞à")
             ),
             React.createElement("div", { className: "mt-8 pt-6 border-t-2 border-black text-sm text-slate-500 space-y-1 font-bold" }, React.createElement("p", null, "ÁáüÊ•≠ÊôÇÈñìÔºö11:00-14:30 / 17:00-20:30"), React.createElement("p", null, "ÊØèÈÄ±‰∏ÄÂÖ¨‰ºë"))
        )
    );

    const FaqView = ({ data }) => {
        const [openIndex, setOpenIndex] = useState(null);
        return React.createElement("div", { className: "p-6 pb-32 animate-fade-in" },
            React.createElement("h3", { className: "font-black text-2xl text-black mb-6 flex items-center gap-2" }, React.createElement(Icon, { name: "question", className: "w-8 h-8" }), "Â∏∏Ë¶ãÂïèÈ°å"),
            React.createElement("div", { className: "space-y-4" },
                (data.faqs || []).map((faq, i) => React.createElement("div", { key: i, className: "comic-box overflow-hidden" },
                    React.createElement("button", { onClick: () => setOpenIndex(openIndex === i ? null : i), className: "w-full text-left p-4 font-black text-lg flex justify-between items-center bg-white" },
                        React.createElement("span", null, `Q${i+1}. ${faq.ÂïèÈ°å}`),
                        React.createElement("span", { className: `transform transition-transform ${openIndex === i ? 'rotate-180' : ''}` }, "‚ñº")
                    ),
                    openIndex === i && React.createElement("div", { className: "p-4 pt-0 text-slate-600 font-bold bg-slate-50 border-t-2 border-black border-dashed" }, faq.ÂõûÁ≠î)
                ))
            )
        );
    };

    const MemberView = ({ data, profile, setView }) => {
        const [mode, setMode] = useState('VIEW'); // VIEW, REGISTER, EDIT
        const [regForm, setRegForm] = useState({ name: '', phone: '', birthday: '', gender: 'Áî∑', email: '' });
        const [loading, setLoading] = useState(false);
        const [showHistory, setShowHistory] = useState(null);
        const [historyData, setHistoryData] = useState([]);
        const [loadingHistory, setLoadingHistory] = useState(false);

        useEffect(() => {
            if (data.member && mode === 'EDIT') {
                setRegForm({
                    name: data.member.ÂßìÂêç,
                    phone: data.member.ÈõªË©±.replace(/'/g, ''),
                    birthday: data.member.ÁîüÊó•,
                    gender: data.member.ÊÄßÂà•,
                    email: data.member.Email
                });
            } else if (mode === 'REGISTER') {
                setRegForm({
                    name: (profile?.displayName && profile.displayName !== 'Ë®™ÂÆ¢') ? profile.displayName : '',
                    phone: '', birthday: '', gender: 'Áî∑', email: ''
                });
            }
        }, [mode, data.member]);

        const fetchHistory = async (type) => {
            setLoadingHistory(true);
            setShowHistory(type);
            const action = type === 'BOOKINGS' ? 'getUserBookings' : 'getPointHistory';
            const res = await runGAS(action, { lineUserId: profile.userId });
            if(res.status === 'success') {
                setHistoryData(type === 'BOOKINGS' ? res.bookings : res.history);
            }
            setLoadingHistory(false);
        };

        const handleSubmit = async () => {
             setLoading(true);
             const cleanPhone = regForm.phone.replace(/\D/g, '');
             const action = mode === 'REGISTER' ? 'register' : 'updateMember';
             const res = await runGAS(action, { lineUserId: profile.userId, ...regForm, phone: cleanPhone });
             setLoading(false);
             if(res.status === 'success') {
                 Swal.fire(mode === 'REGISTER' ? 'Ë®ªÂÜäÊàêÂäü' : '‰øÆÊîπÊàêÂäü', '', 'success').then(() => window.location.reload());
             } else {
                 Swal.fire('Â§±Êïó', res.message, 'error');
             }
        };

        const handleDelete = () => {
            Swal.fire({
                title: 'Á¢∫ÂÆöÂà™Èô§Â∏≥ËôüÔºü',
                text: "Âà™Èô§ÂæåÈªûÊï∏Â∞áÊ≠∏Èõ∂‰∏îÁÑ°Ê≥ïÂæ©ÂéüÔºÅ",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#d33',
                cancelButtonColor: '#3085d6',
                confirmButtonText: 'Á¢∫Ë™çÂà™Èô§',
                cancelButtonText: 'ÂèñÊ∂à'
            }).then(async (result) => {
                if (result.isConfirmed) {
                    setLoading(true);
                    const res = await runGAS('deleteMember', { lineUserId: profile.userId });
                    if(res.status === 'success') {
                         Swal.fire('Â∑≤Âà™Èô§', 'ÊÇ®ÁöÑÊúÉÂì°Ë≥áÊñôÂ∑≤Âà™Èô§', 'success').then(() => window.location.reload());
                    } else {
                         Swal.fire('ÈåØË™§', res.message, 'error');
                         setLoading(false);
                    }
                }
            })
        };
        
        const isRegValid = regForm.name && isValidPhone(regForm.phone) && regForm.birthday;
        const isAdmin = data.member && ADMIN_PHONES.some(p => data.member.ÈõªË©±.replace(/'/g,'').replace(/-/g,'').endsWith(p));

        if (mode === 'REGISTER' || mode === 'EDIT') {
            return React.createElement("div", { className: "p-6 pb-32 animate-fade-in flex flex-col items-center justify-center min-h-[70vh]" },
                React.createElement("div", { className: "w-full max-w-sm comic-box p-6 bg-white animate-fade-in" },
                    React.createElement("div", { className: "flex justify-between items-center mb-6" },
                        React.createElement("h3", { className: "font-black text-2xl text-black" }, mode === 'REGISTER' ? "Â°´ÂØ´Ë≥áÊñô" : "‰øÆÊîπË≥áÊñô"),
                        React.createElement("button", { onClick: () => setMode('VIEW'), className: "p-2 border-2 border-black rounded-full hover:bg-slate-100" }, React.createElement(Icon, { name: "x", className: "w-5 h-5" }))
                    ),
                    React.createElement("div", { className: "space-y-4" },
                        React.createElement("div", null, React.createElement("label", { className: "block text-xs font-bold ml-2 mb-1" }, "ÁúüÂØ¶ÂßìÂêç"), React.createElement("input", { className: "comic-input", placeholder: "Ë´ãËº∏ÂÖ•ÂßìÂêç", value: regForm.name, onChange: e => setRegForm({...regForm, name: e.target.value}) })),
                        React.createElement("div", null, React.createElement("label", { className: "block text-xs font-bold ml-2 mb-1" }, "ÊâãÊ©üËôüÁ¢º"), React.createElement("input", { className: "comic-input", type: "tel", placeholder: "09xx...", value: regForm.phone, onChange: e => setRegForm({...regForm, phone: e.target.value}) })),
                        React.createElement("div", { className: "flex gap-3" },
                            React.createElement("div", { className: "flex-1" }, React.createElement("label", { className: "block text-xs font-bold ml-2 mb-1" }, "ÁîüÊó•"), React.createElement("input", { className: "comic-input", type: "date", value: regForm.birthday, onChange: e => setRegForm({...regForm, birthday: e.target.value}) })),
                            React.createElement("div", null, React.createElement("label", { className: "block text-xs font-bold ml-2 mb-1" }, "ÊÄßÂà•"), React.createElement("div", { className: "flex border-3 border-black rounded-2xl overflow-hidden h-[58px]" }, ['Áî∑', 'Â•≥'].map(g => React.createElement("button", { key: g, onClick: () => setRegForm({...regForm, gender: g}), className: `px-4 font-bold transition-all h-full ${regForm.gender === g ? 'bg-black text-white' : 'bg-white text-black hover:bg-slate-100'}` }, g))))
                        ),
                        React.createElement("div", null, React.createElement("label", { className: "block text-xs font-bold ml-2 mb-1" }, "Email (ÈÅ∏Â°´)"), React.createElement("input", { className: "comic-input", type: "email", placeholder: "example@gmail.com", value: regForm.email, onChange: e => setRegForm({...regForm, email: e.target.value}) })),
                        React.createElement("button", { onClick: handleSubmit, disabled: !isRegValid || loading, className: "comic-btn-primary mt-4" }, loading ? "ËôïÁêÜ‰∏≠..." : (mode === 'REGISTER' ? "Á¢∫Ë™çË®ªÂÜä" : "ÂÑ≤Â≠òËÆäÊõ¥")),
                        mode === 'EDIT' && React.createElement("button", { onClick: handleDelete, className: "w-full mt-4 py-3 text-red-500 font-black hover:bg-red-50 rounded-xl" }, "Âà™Èô§ÊúÉÂì°Ë≥áÊñô")
                    ),
                    !isRegValid && React.createElement("p", { className: "text-center text-xs text-red-400 mt-4 font-bold" }, "* Ë´ãÂÆåÊï¥Â°´ÂØ´ÂßìÂêç„ÄÅÊâãÊ©üËàáÁîüÊó•")
                )
            );
        }

        if (!data.member && mode === 'VIEW') {
            return React.createElement("div", { className: "p-6 pb-32 animate-fade-in flex flex-col items-center justify-center min-h-[70vh]" },
                React.createElement("div", { className: "w-full max-w-sm comic-box p-8 relative overflow-hidden text-center bg-white" },
                    React.createElement("div", { className: "w-24 h-24 bg-[#F9A8D4] border-4 border-black rounded-full flex items-center justify-center mx-auto mb-6 shadow-[4px_4px_0px_0px_black] transform -rotate-6" }, React.createElement(Icon, { name: "user", className: "w-12 h-12 text-black" })),
                    React.createElement("h3", { className: "font-black text-3xl mb-2 text-black" }, "Âä†ÂÖ•ÊúÉÂì°"), 
                    React.createElement("p", { className: "text-slate-500 mb-8 text-sm font-bold" }, "‰∫´ÊúâÊú™‰æÜ‰∏çÂÆöÊúüÂ∞àÂ±¨ÂÑ™ÊÉ†\nËàáÂ£ΩÊòüÁîüÊó•Â•ΩÁ¶ÆÔºÅ"),
                    React.createElement("button", { className: "comic-btn-primary bg-[#FCD34D] text-black", onClick: () => setMode('REGISTER') }, "Á´ãÂç≥ÂÖçË≤ªË®ªÂÜä")
                )
            );
        }

        if (showHistory) return React.createElement("div", { className: "p-6 pb-32 animate-fade-in" },
            React.createElement("button", { onClick: () => setShowHistory(null), className: "mb-4 font-bold border-2 border-black bg-white px-4 py-2 rounded-xl text-sm shadow-[3px_3px_0px_0px_black] active:translate-y-0.5 active:shadow-none transition-all inline-flex gap-2 items-center" }, React.createElement(Icon, { name: "back", className: "w-4 h-4" }), "ËøîÂõû"),
            React.createElement("div", { className: "space-y-4" },
                loadingHistory ? React.createElement("p", { className: "text-center font-bold text-slate-400 py-10" }, "ËÆÄÂèñ‰∏≠...") :
                historyData.length === 0 ? React.createElement("div", { className: "comic-box p-8 text-center text-slate-400 font-bold" }, "Â∞öÁÑ°Á¥ÄÈåÑ") :
                historyData.map((item, i) => React.createElement("div", { key: i, className: "comic-box p-4" },
                    showHistory === 'BOOKINGS' ? React.createElement("div", null, React.createElement("p", { className: "font-black text-lg" }, item.È†êÁ¥ÑÊó•Êúü), React.createElement("p", { className: "text-sm text-slate-500 font-bold" }, `${item.È†êÁ¥ÑÊôÇÈñì} | ${item.Â§ß‰∫∫}Â§ß${item.Â∞èÂ≠©}Â∞è`)) : React.createElement("div", null, React.createElement("p", { className: "font-black text-lg" }, item.Ë™™Êòé), React.createElement("p", { className: "text-sm text-slate-500 font-bold" }, item.ÊôÇÈñì && item.ÊôÇÈñì.split('T')[0]))
                ))
            )
        );

        return React.createElement("div", { className: "p-6 animate-fade-in pb-32" },
            React.createElement("div", { className: "comic-box bg-black text-white p-6 mb-6 relative overflow-hidden" },
               React.createElement("div", { className: "absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full blur-2xl -mr-10 -mt-10" }),
               React.createElement("div", { className: "flex items-center gap-4 relative z-10" },
                  React.createElement("img", { src: profile.pictureUrl, className: "w-16 h-16 rounded-full border-4 border-white shadow-lg", referrerPolicy: "no-referrer" }),
                  React.createElement("div", null, React.createElement("h3", { className: "text-2xl font-black" }, data.member.ÂßìÂêç), React.createElement("p", { className: "text-sm opacity-70 font-mono tracking-wider" }, data.member.ÈõªË©±))
               ),
               React.createElement("div", { className: "mt-6 flex justify-between items-end relative z-10" },
                   React.createElement("div", { className: "bg-[#FCD34D] text-black px-4 py-1 rounded-full border-2 border-white transform -rotate-2 shadow-[2px_2px_0px_0px_white]" }, React.createElement("span", { className: "text-xs font-black uppercase tracking-widest" }, "SANOVA VIP")),
                   React.createElement("div", { className: "text-right" }, React.createElement("p", { className: "text-xs opacity-50 font-black uppercase mb-1" }, "Points"), React.createElement("p", { className: "text-4xl font-black text-[#FCD34D] leading-none drop-shadow-md" }, data.member.ÈªûÊï∏ || 0))
               )
            ),
            React.createElement("div", { className: "grid grid-cols-2 gap-4" },
                React.createElement("button", { onClick: () => fetchHistory('BOOKINGS'), className: "comic-box p-4 flex flex-col items-center gap-2 hover:-translate-y-1 active:translate-y-0 transition-transform bg-[#BAE6FD]" }, React.createElement("div", { className: "bg-white p-2 rounded-full border-2 border-black" }, React.createElement(Icon, { name: "calendar", className: "w-6 h-6 text-black" })), React.createElement("span", { className: "font-black text-lg" }, "ÊàëÁöÑË®Ç‰Ωç")),
                React.createElement("button", { onClick: () => fetchHistory('POINTS'), className: "comic-box p-4 flex flex-col items-center gap-2 hover:-translate-y-1 active:translate-y-0 transition-transform bg-[#F9A8D4]" }, React.createElement("div", { className: "bg-white p-2 rounded-full border-2 border-black" }, React.createElement(Icon, { name: "gift", className: "w-6 h-6 text-black" })), React.createElement("span", { className: "font-black text-lg" }, "ÈªûÊï∏Á¥ÄÈåÑ"))
            ),
            React.createElement("button", { onClick: () => setMode('EDIT'), className: "mt-4 w-full py-4 bg-white border-2 border-black rounded-2xl font-black shadow-[4px_4px_0px_0px_black] active:translate-y-1 active:shadow-none transition-all flex items-center justify-center gap-2" }, React.createElement(Icon, { name: "edit", className: "w-5 h-5" }), "‰øÆÊîπÊúÉÂì°Ë≥áÊñô"),
            isAdmin && React.createElement("button", { onClick: () => setView('ADMIN'), className: "mt-6 w-full py-4 bg-slate-800 text-white border-3 border-black rounded-2xl font-black shadow-[4px_4px_0px_0px_black] active:translate-y-1 active:shadow-none transition-all flex items-center justify-center gap-2" }, React.createElement(Icon, { name: "settings", className: "w-5 h-5" }), "ÈÄ≤ÂÖ•ÁÆ°ÁêÜÂì°ÂæåÂè∞")
        );
    };

    const AdminView = ({ profile, setView }) => {
        const [bookings, setBookings] = useState([]);
        const [settings, setSettings] = useState({ restStart: '', restEnd: '', bookingLeadTime: '', totalHighChairs: '', maxGuestsPerSlot: '', enableLineNotify: false });
        const [loading, setLoading] = useState(true);
        const [saving, setSaving] = useState(false);
        const [editingBooking, setEditingBooking] = useState(null);

        const fetchAdminData = async () => {
            const res = await runGAS('getAdminData', { lineUserId: profile.userId });
            if(res.status === 'success') {
                setBookings(res.bookings);
                setSettings({
                    restStart: res.settings?.RestStartDate || '',
                    restEnd: res.settings?.RestEndDate || '',
                    bookingLeadTime: res.settings?.BookingLeadTime || '2',
                    totalHighChairs: res.settings?.TotalHighChairs || '10',
                    maxGuestsPerSlot: res.settings?.MaxGuestsPerSlot || '20',
                    enableLineNotify: res.settings?.EnableLineNotify === 'true'
                });
            } else {
                Swal.fire('Ê¨äÈôê‰∏çË∂≥', 'ÊÇ®ÁÑ°Ê¨äË®™ÂïèÊ≠§È†ÅÈù¢', 'error').then(()=>setView('MEMBER'));
            }
            setLoading(false);
        };

        useEffect(() => { fetchAdminData(); }, []);

        const handleSaveSettings = async () => {
            setSaving(true);
            const res = await runGAS('saveSettings', { ...settings });
            setSaving(false);
            if(res.status === 'success') Swal.fire({title:'Ë®≠ÂÆöÂ∑≤ÂÑ≤Â≠ò', icon:'success', timer:1500, showConfirmButton:false});
            else Swal.fire('ÂÑ≤Â≠òÂ§±Êïó', res.message, 'error');
        };

        const handleCancelBooking = async (bookingCode) => {
            Swal.fire({ title: 'Á¢∫Ë™çÂèñÊ∂àË®Ç‰ΩçÔºü', text: 'Ê≠§Êìç‰ΩúÁÑ°Ê≥ïÂæ©Âéü', icon: 'warning', showCancelButton: true, confirmButtonColor: '#d33' }).then(async (result) => {
                if (result.isConfirmed) {
                    const res = await runGAS('cancelBooking', { bookingCode });
                    if (res.status === 'success') {
                        Swal.fire('Â∑≤ÂèñÊ∂à', '', 'success');
                        fetchAdminData();
                    }
                }
            });
        };

        const handleNotify = async (booking) => {
             const res = await runGAS('notifyBooking', { bookingCode: booking.Ë®Ç‰Ωç‰ª£Ëôü });
             if (res.status === 'success') Swal.fire('Â∑≤ÁôºÈÄÅÈÄöÁü•', 'Ëã•Á≥ªÁµ±ÊúâË®≠ÂÆö Messaging API ÂâáÊúÉÊé®Êí≠', 'success');
             else Swal.fire('ÈÄöÁü•Â§±Êïó', 'Ë´ãÁ¢∫Ë™çÂæåÂè∞Ë®≠ÂÆö', 'error');
        };

        const handleEditBooking = async (b) => {
            setEditingBooking(b);
        };
        
        const saveBookingEdit = async () => {
             const res = await runGAS('updateBooking', editingBooking);
             if (res.status === 'success') {
                 Swal.fire('Êõ¥Êñ∞ÊàêÂäü', '', 'success');
                 setEditingBooking(null);
                 fetchAdminData();
             } else {
                 Swal.fire('Êõ¥Êñ∞Â§±Êïó', res.message, 'error');
             }
        };

        return React.createElement("div", { className: "admin-mode admin-container" },
             React.createElement("div", { className: "admin-header" },
                React.createElement("div", null, React.createElement("h2", { className: "text-lg font-bold tracking-wide" }, "ÁÆ°ÁêÜÂì°ÂæåÂè∞"), React.createElement("p", { className: "text-xs text-slate-300 opacity-80" }, "SANOVA KITCHEN DASHBOARD")),
                React.createElement("button", { onClick: ()=>setView('MEMBER'), className: "bg-slate-700 hover:bg-slate-600 p-2 rounded-full transition-colors text-white" }, React.createElement(Icon, { name: "x", className: "w-5 h-5" }))
             ),
             React.createElement("div", { className: "p-6 pb-24 space-y-6" },
                 React.createElement("div", { className: "admin-card" },
                    React.createElement("h3", { className: "font-bold text-lg text-slate-800 mb-4 pb-2 border-b border-slate-100 flex items-center gap-2" }, React.createElement(Icon, { name: "settings", className: "w-5 h-5 text-slate-500" }), "Á≥ªÁµ±ÂèÉÊï∏Ë®≠ÂÆö"),
                    React.createElement("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6" },
                        React.createElement("div", { className: "space-y-4" },
                            React.createElement("div", null, React.createElement("label", { className: "admin-label" }, "È†êÁ¥ÑÈúÄÊèêÂâç (Â∞èÊôÇ)"), React.createElement("input", { type: "number", className: "admin-input", value: settings.bookingLeadTime, onChange: e=>setSettings({...settings, bookingLeadTime: e.target.value}) })),
                            React.createElement("div", null, React.createElement("label", { className: "admin-label" }, "ÂÖíÁ´•Ê§ÖÁ∏ΩÂ∫´Â≠ò"), React.createElement("input", { type: "number", className: "admin-input", value: settings.totalHighChairs, onChange: e=>setSettings({...settings, totalHighChairs: e.target.value}) })),
                            React.createElement("div", null, React.createElement("label", { className: "admin-label" }, "ÊØèÊôÇÊÆµÊúÄÂ§ßË®Ç‰Ωç‰∫∫Êï∏"), React.createElement("input", { type: "number", className: "admin-input", value: settings.maxGuestsPerSlot, onChange: e=>setSettings({...settings, maxGuestsPerSlot: e.target.value}) }))
                        ),
                        React.createElement("div", { className: "space-y-4" },
                            React.createElement("div", { className: "bg-slate-50 p-4 rounded-md border border-slate-200" }, React.createElement("label", { className: "admin-label mb-2" }, "Â∫ó‰ºëÂçÄÈñì (ÁÆ°ÁêÜÂì°Ë®≠ÂÆö)"), React.createElement("div", { className: "grid grid-cols-2 gap-4" }, React.createElement("div", null, React.createElement("span", { className: "text-xs text-slate-400 mb-1 block" }, "ÈñãÂßã"), React.createElement("input", { type: "date", className: "admin-input", value: settings.restStart, onChange: e=>setSettings({...settings, restStart: e.target.value}) })), React.createElement("div", null, React.createElement("span", { className: "text-xs text-slate-400 mb-1 block" }, "ÁµêÊùü"), React.createElement("input", { type: "date", className: "admin-input", value: settings.restEnd, onChange: e=>setSettings({...settings, restEnd: e.target.value}) })))),
                            React.createElement("div", { className: "bg-blue-50 p-4 rounded-md border border-blue-100 flex items-center justify-between" }, React.createElement("div", null, React.createElement("label", { className: "text-sm font-bold text-blue-900 block" }, "Ë®Ç‰ΩçÊàêÂäüËá™ÂãïÁôºÈÄÅ LINE ÈÄöÁü•"), React.createElement("span", { className: "text-xs text-blue-600 block mt-1" }, "ÈñãÂïüÂæåÔºåÁ≥ªÁµ±Â∞áËá™ÂãïÁôºÈÄÅÁ¢∫Ë™çÂç°ÁâáÁµ¶ÂÆ¢‰∫∫")), React.createElement("input", { type: "checkbox", className: "w-6 h-6 text-blue-600 rounded focus:ring-blue-500 border-gray-300", checked: settings.enableLineNotify, onChange: e=>setSettings({...settings, enableLineNotify: e.target.checked}) }))
                        )
                    ),
                    React.createElement("div", { className: "mt-6 flex justify-end" }, React.createElement("button", { onClick: handleSaveSettings, disabled: saving, className: "admin-btn" }, saving ? "ÂÑ≤Â≠ò‰∏≠..." : "ÂÑ≤Â≠òËÆäÊõ¥"))
                 ),
                 React.createElement("div", { className: "admin-card" },
                    React.createElement("div", { className: "flex items-center justify-between border-b border-slate-100 pb-3 mb-4" }, React.createElement("div", { className: "flex items-center gap-2" }, React.createElement(Icon, { name: "calendar", className: "w-5 h-5 text-slate-500" }), React.createElement("h3", { className: "font-bold text-lg text-slate-800" }, "‰ªäÊó•ËàáÊú™‰æÜË®Ç‰Ωç")), React.createElement("span", { className: "bg-slate-100 text-slate-600 text-xs px-2 py-1 rounded-full font-mono border border-slate-200" }, `Total: ${bookings.length}`)),
                    loading ? React.createElement("div", { className: "text-center py-12 text-slate-400" }, "ËÆÄÂèñË≥áÊñô‰∏≠...") : bookings.length === 0 ? React.createElement("div", { className: "text-center py-12 text-slate-400 bg-slate-50 rounded-lg border border-dashed border-slate-200" }, "ÁõÆÂâçÂ∞öÁÑ°Ë®Ç‰ΩçË≥áÊñô") :
                    React.createElement("div", { className: "overflow-x-auto" },
                        React.createElement("table", { className: "admin-table" },
                            React.createElement("thead", null, React.createElement("tr", null, React.createElement("th", null, "ÁÆ°ÁêÜ"), React.createElement("th", null, "Êó•Êúü/ÊôÇÈñì"), React.createElement("th", null, "ÂßìÂêç/ÈõªË©±"), React.createElement("th", null, "‰∫∫Êï∏"), React.createElement("th", null, "ÂÇôË®ª/È†êÈªû"))),
                            React.createElement("tbody", null, bookings.map((b, i) => React.createElement("tr", { key: i },
                                React.createElement("td", null, 
                                    React.createElement("div", { className: "flex gap-1" },
                                        React.createElement("button", { onClick: () => handleEditBooking(b), className: "admin-action-btn btn-edit" }, "‰øÆÊîπ"),
                                        React.createElement("button", { onClick: () => handleCancelBooking(b.Ë®Ç‰Ωç‰ª£Ëôü), className: "admin-action-btn btn-delete" }, "ÂèñÊ∂à"),
                                        React.createElement("button", { onClick: () => handleNotify(b), className: "admin-action-btn btn-notify" }, "ÈÄöÁü•")
                                    )
                                ),
                                React.createElement("td", null, React.createElement("div", { className: "font-bold text-slate-900" }, b.È†êÁ¥ÑÊó•Êúü), React.createElement("div", { className: "text-blue-600 font-mono text-xs" }, b.È†êÁ¥ÑÊôÇÈñì)),
                                React.createElement("td", null, React.createElement("div", { className: "font-semibold text-slate-900" }, b.ÂßìÂêç), React.createElement("a", { href: `tel:${b.ÈõªË©±.replace(/'/g,'')}`, className: "text-xs text-slate-400 hover:text-blue-500 flex items-center gap-1 mt-1" }, React.createElement(Icon, { name: "phone", className: "w-3 h-3" }), b.ÈõªË©±.replace(/'/g,''))),
                                React.createElement("td", null, React.createElement("span", { className: "inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800" }, `${b.Â§ß‰∫∫}Â§ß ${b.Â∞èÂ≠©}Â∞è`)),
                                React.createElement("td", { className: "text-xs" }, b.ÂÇôË®ª && React.createElement("div", { className: "mb-1 text-amber-600 bg-amber-50 p-1 rounded border border-amber-100 inline-block mr-1" }, `Ë®ª: ${b.ÂÇôË®ª}`), b.È†êÈªûÈ§ê && React.createElement("div", { className: "text-slate-500 whitespace-pre-wrap bg-slate-50 p-2 rounded border border-slate-200 mt-1" }, b.È†êÈªûÈ§ê))
                            )))
                        )
                    )
                 )
             ),
             // Edit Booking Modal
             editingBooking && React.createElement("div", { className: "fixed inset-0 z-[100] bg-black/50 flex items-center justify-center p-4" },
                React.createElement("div", { className: "bg-white rounded-lg p-6 w-full max-w-sm" },
                    React.createElement("h3", { className: "font-bold text-lg mb-4" }, "‰øÆÊîπË®Ç‰Ωç"),
                    React.createElement("div", { className: "space-y-3" },
                        React.createElement("div", null, React.createElement("label", { className: "text-xs font-bold" }, "Êó•Êúü"), React.createElement("input", { type: "date", className: "admin-input", value: editingBooking.È†êÁ¥ÑÊó•Êúü, onChange: e => setEditingBooking({...editingBooking, È†êÁ¥ÑÊó•Êúü: e.target.value}) })),
                        React.createElement("div", null, React.createElement("label", { className: "text-xs font-bold" }, "ÊôÇÈñì"), React.createElement("input", { type: "text", className: "admin-input", value: editingBooking.È†êÁ¥ÑÊôÇÈñì, onChange: e => setEditingBooking({...editingBooking, È†êÁ¥ÑÊôÇÈñì: e.target.value}) })),
                        React.createElement("div", { className: "flex gap-2" },
                            React.createElement("div", { className: "flex-1" }, React.createElement("label", { className: "text-xs font-bold" }, "Â§ß‰∫∫"), React.createElement("input", { type: "number", className: "admin-input", value: editingBooking.Â§ß‰∫∫, onChange: e => setEditingBooking({...editingBooking, Â§ß‰∫∫: e.target.value}) })),
                            React.createElement("div", { className: "flex-1" }, React.createElement("label", { className: "text-xs font-bold" }, "Â∞èÂ≠©"), React.createElement("input", { type: "number", className: "admin-input", value: editingBooking.Â∞èÂ≠©, onChange: e => setEditingBooking({...editingBooking, Â∞èÂ≠©: e.target.value}) }))
                        )
                    ),
                    React.createElement("div", { className: "mt-6 flex justify-end gap-2" },
                        React.createElement("button", { onClick: () => setEditingBooking(null), className: "px-4 py-2 bg-slate-200 rounded text-slate-700 font-bold" }, "ÂèñÊ∂à"),
                        React.createElement("button", { onClick: saveBookingEdit, className: "px-4 py-2 bg-blue-500 rounded text-white font-bold" }, "ÂÑ≤Â≠ò")
                    )
                )
             )
        );
    };

    // --- MenuView ---
    // Modified to lift state up
    const MenuView = ({ menu, addToCart, cart, setView, onSubmitPreorder, defaultCategory, onSelectProduct }) => {
        const [activeCat, setActiveCat] = useState("Á∏ΩË¶Ω");
        const [viewImage, setViewImage] = useState(null); 

        useEffect(() => {
            if (defaultCategory) setActiveCat(defaultCategory);
        }, [defaultCategory]);

        const categories = ["Á∏ΩË¶Ω", "ÂÖ®ÈÉ®È§êÈªû", "ÁÜ±ÈñÄÊé®Ëñ¶", "ÁôΩÈÜ¨", "ËåÑÊ±Å", "ÈùíÈÜ¨", "ÂçóÁìú", "ÂíñÂì©", "‰∏ªÂªöÊé®Ëñ¶", "Áæ©ÂºèÁáâÈ£Ø", "ÁÑóÁÉ§", "PIZZA", "ÂñÆÈªû", "È£≤ÂìÅ"];
        
        const filteredItems = menu && menu.length > 0 ? menu.filter(i => {
                if (activeCat === 'Á∏ΩË¶Ω') return false; 
                if (activeCat === 'ÂÖ®ÈÉ®È§êÈªû') return true;
                if (activeCat === 'ÁÜ±ÈñÄÊé®Ëñ¶') return i.È°ûÂà• === '‰∏ªÂªöÊé®Ëñ¶' || i.È°ûÂà• === 'PIZZA';
                if (activeCat.includes('ÁôΩÈÜ¨')) return i.È°ûÂà• === 'Áæ©Â§ßÂà©È∫µ' && i.Â≠êÈ°ûÂà• === 'ÁôΩÈÜ¨';
                if (activeCat.includes('ËåÑÊ±Å')) return i.È°ûÂà• === 'Áæ©Â§ßÂà©È∫µ' && i.Â≠êÈ°ûÂà• === 'ËåÑÊ±Å';
                if (activeCat.includes('ÈùíÈÜ¨')) return i.È°ûÂà• === 'Áæ©Â§ßÂà©È∫µ' && i.Â≠êÈ°ûÂà• === 'ÈùíÈÜ¨';
                if (activeCat.includes('ÂçóÁìú')) return i.È°ûÂà• === 'Áæ©Â§ßÂà©È∫µ' && i.Â≠êÈ°ûÂà• === 'ÂçóÁìú';
                if (activeCat.includes('ÂíñÂì©')) return i.È°ûÂà• === 'Áæ©Â§ßÂà©È∫µ' && i.Â≠êÈ°ûÂà• === 'ÂíñÂì©';
                return i.È°ûÂà• === activeCat || i.Â≠êÈ°ûÂà• === activeCat;
        }) : [];

        const overviewImages = [
            "https://i.ibb.co/20D4YTL1/2025-page-0001.jpg",
            "https://i.ibb.co/cfTdqxh/2025-page-0002.jpg"
        ];

        return React.createElement("div", { className: "animate-fade-in pb-32" },
            React.createElement("div", { className: "p-4" },
                React.createElement("h3", { className: "font-black text-2xl mb-3 text-black" }, "MENU")
            ),
            
            React.createElement("div", { className: "sticky top-[72px] z-20 bg-[#FFFBEB]/95 backdrop-blur border-b-2 border-black overflow-x-auto no-scrollbar flex p-3 gap-2" },
                categories.map(c => React.createElement("button", { 
                    key: c, onClick: () => setActiveCat(c),
                    className: `px-5 py-2 rounded-full text-xs font-black whitespace-nowrap transition-all border-2 border-black ${activeCat === c ? 'bg-black text-white shadow-[2px_2px_0px_0px_white]' : 'bg-white text-black shadow-[2px_2px_0px_0px_black]'}` 
                }, c))
            ),

            React.createElement("div", { className: "p-4 space-y-4" },
                activeCat === "Á∏ΩË¶Ω" ? React.createElement("div", { className: "space-y-4 animate-fade-in" },
                   overviewImages.map((src, idx) => React.createElement("div", { key: idx, onClick: () => setViewImage(src), className: "bg-white p-2 border-2 border-black rounded-2xl shadow-[4px_4px_0px_0px_black] cursor-zoom-in relative group" },
                        React.createElement("img", { src: src, className: "w-full h-auto rounded-xl", loading: "lazy" }),
                        React.createElement("div", { className: "absolute inset-0 bg-black/10 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity rounded-xl" },
                            React.createElement("div", { className: "bg-white/80 p-2 rounded-full" }, React.createElement(Icon, { name: "zoom", className: "w-6 h-6" }))
                        )
                   ))
                ) :
                filteredItems.map((item, idx) => React.createElement("div", { key: idx, className: "flex gap-4 comic-box p-3 active:scale-[0.98] transition-transform" },
                        React.createElement("div", { className: "relative w-24 h-24 flex-shrink-0" },
                             React.createElement("img", { src: item.ÂúñÁâáÁ∂≤ÂùÄ || "https://placehold.co/100x100?text=SANOVA", className: "w-full h-full object-cover rounded-xl border-2 border-black" }),
                             (item.Ê®ôÁ±§ || "").length > 0 && React.createElement("div", { className: "absolute -bottom-2 -right-2 bg-white px-1 border-2 border-black rounded shadow-[2px_2px_0px_0px_black] text-[10px] font-black" }, item.Ê®ôÁ±§)
                        ),
                        React.createElement("div", { className: "flex-1 py-1 flex flex-col justify-between" },
                            React.createElement("div", null, 
                                React.createElement("h4", { className: "font-black text-black text-sm" }, item.Áî¢ÂìÅÂêçÁ®±),
                                React.createElement("p", { className: "text-[10px] text-slate-500 mt-1 line-clamp-1 font-bold" }, item.Ë™™Êòé)
                            ),
                            React.createElement("div", { className: "flex justify-between items-center mt-2" },
                                React.createElement("p", { className: "text-red-500 font-black text-lg" }, `$${item.Áî¢ÂìÅÂÉπÊ†º}`),
                                React.createElement("button", { onClick: () => onSelectProduct(item), className: "bg-[#FCD34D] text-black text-xs font-black px-4 py-2 rounded-lg border-2 border-black shadow-[2px_2px_0px_0px_black] active:translate-y-0.5 active:shadow-none" }, "+ ÈÅ∏Ë≥º")
                            )
                        )
                ))
            ),
            
            // Lightbox Modal (Kept here as it's simple image overlay)
            viewImage && React.createElement("div", { className: "fixed inset-0 z-[100] bg-black/90 backdrop-blur-md flex items-center justify-center p-4", onClick: () => setViewImage(null) },
                React.createElement("div", { className: "relative max-w-full max-h-full", onClick: e => e.stopPropagation() },
                    React.createElement("button", { onClick: () => setViewImage(null), className: "absolute -top-12 right-0 text-white p-2" }, React.createElement(Icon, { name: "x", className: "w-8 h-8" })),
                    React.createElement("img", { src: viewImage, className: "max-w-full max-h-[80vh] rounded-lg shadow-2xl" }),
                    React.createElement("div", { className: "text-center mt-4" },
                        React.createElement("a", { href: viewImage, download: "menu.jpg", target: "_blank", className: "inline-flex items-center gap-2 bg-white text-black px-6 py-2 rounded-full font-black hover:bg-slate-200" },
                             React.createElement(Icon, { name: "download", className: "w-5 h-5" }), "‰∏ãËºâÂúñÁâá"
                        )
                    )
                )
            ),

            cart.length > 0 && React.createElement("button", { onClick: onSubmitPreorder ? onSubmitPreorder : () => setView('BOOKING'), className: "fixed bottom-24 right-6 bg-red-500 text-white p-4 rounded-full border-4 border-black shadow-[4px_4px_0px_0px_black] z-40 animate-bounce" },
                 React.createElement("div", { className: "relative flex items-center gap-2 px-2" }, React.createElement(Icon, { name: "menu", className: "w-6 h-6" }), React.createElement("span", { className: "font-black" }, cart.reduce((a,c)=>a+c.qty,0)))
            )
        );
    };
    
    // ProductModal definition - Uses absolute fixed positioning to ensure it's on top
    const ProductModal = ({ item, onClose, onAdd }) => {
        const [qty, setQty] = useState(1);
        const [pasta, setPasta] = useState({ type: '', price: 0 });
        const [drink, setDrink] = useState({ name: '', price: 0 });
        const [combo, setCombo] = useState({ name: 'ÂñÆÈªû', price: 0 }); 
        
        const isPasta = item.È°ûÂà•?.includes('Áæ©Â§ßÂà©È∫µ') || item.Áî¢ÂìÅÂêçÁ®±?.includes('È∫µ');
        const noodleOptions = [
            { name: "Áõ¥È∫µ", p: 0 }, 
            { name: "Á≠ÜÂ∞ñÈ∫µ", p: 0 }, 
            { name: "ÁáâÈ£Ø", p: 0 }, 
            { name: "Â§©‰ΩøÁ¥∞È∫µ", p: 10 }, 
            { name: "ÈÄöÂøÉÈ∫µ", p: 10 }, 
            { name: "Á¥∞ÊâÅÈ∫µ", p: 10 }, 
            { name: "Â¢®È≠öÈ∫µ", p: 40 }
        ];
        const comboOptions = [
            { name: "ÂñÆÈªû", p: 0, desc: "" }, 
            { name: "Ë∂ÖÂÄºÂ•óÈ§ê", p: 79, desc: "ÈôÑÈ∫µÂåÖ/ÊøÉÊπØ/È£≤ÂìÅ" }, 
            { name: "ÈÖ•ÁöÆÂ•óÈ§ê", p: 129, desc: "ÈôÑÈ∫µÂåÖ/ÈÖ•ÁöÆÊπØ/È£≤ÂìÅ" }
        ];
        const drinkOptions = [
            { name: "ÂèØÊ®Ç", p: 0 },
            { name: "Èõ™Á¢ß", p: 0 },
            { name: "ËòãÊûúË•øÊâì", p: 0 },
            { name: "ÂèØÁàæÂøÖÊÄù", p: 0 },
            { name: "Á¥ÖËå∂(ÂÜ∞)", p: 0 },
            { name: "Á¥ÖËå∂(ÁÜ±)", p: 0 },
            { name: "Á∂†Ëå∂(ÁÜ±)", p: 0 },
            { name: "Â•∂Ëå∂(ÂÜ∞)", p: 0 },
            { name: "Â•∂Ëå∂(ÁÜ±)", p: 0 },
            { name: "Â•∂Á∂†(ÁÜ±)", p: 0 },
            { name: "Ê°ÇËä±ËúúËå∂(ÂÜ∞)", p: 0 }
        ];

        const currentPrice = useMemo(() => item.Áî¢ÂìÅÂÉπÊ†º + (pasta.price || 0) + (combo.price || 0) + (drink.price || 0), [pasta, combo, drink, item]);

        const handleAdd = () => {
            if (isPasta && !pasta.type) return Swal.fire({ title: 'Ë´ãÈÅ∏ÊìáÈ∫µÊ¢ù', text: 'Áæ©Â§ßÂà©È∫µÁ≥ªÂàóÈúÄÈÅ∏ÊìáÈ∫µÊ¢ùÁ®ÆÈ°û', icon: 'warning', confirmButtonColor: '#000' });
            if (combo.name !== 'ÂñÆÈªû' && !drink.name) return Swal.fire({ title: 'Ë´ãÈÅ∏ÊìáÈ£≤ÂìÅ', text: 'Â•óÈ§êÈúÄÊê≠ÈÖçÈ£≤ÂìÅ', icon: 'warning', confirmButtonColor: '#000' });
            
            const comboDesc = combo.name !== 'ÂñÆÈªû' ? ` / ${combo.name}` : '';
            const noodleDesc = pasta.type ? ` / ${pasta.type}` : '';
            onAdd(item, { pastaType: pasta.type, addons: [combo.name !== 'ÂñÆÈªû' ? combo.name : null], drink: drink.name }, currentPrice, qty);
            onClose();
        };

        // Simplified rendering without Portal, just brute force fixed positioning
        return React.createElement("div", { className: "fixed inset-0 z-[9999] flex items-end sm:items-center justify-center pointer-events-auto" },
            // Backdrop
            React.createElement("div", { className: "fixed inset-0 bg-black/60", onClick: onClose }),
            
            // Content
            React.createElement("div", { className: "bg-white w-full sm:w-[90%] max-w-md relative z-[10000] p-6 max-h-[85vh] overflow-y-auto rounded-t-[2rem] sm:rounded-[2rem] border-4 border-black shadow-[0px_0px_0px_4px_rgba(255,255,255,0.2)]" },
                React.createElement("button", { onClick: onClose, className: "absolute top-4 right-4 p-2 bg-slate-100 rounded-full hover:bg-slate-200 border-2 border-black" }, React.createElement(Icon, { name: "x", className: "w-5 h-5 text-black" })),
                
                // Header
                React.createElement("div", { className: "mb-6 text-center" },
                    React.createElement("div", { className: "w-16 h-2 bg-black rounded-full mx-auto mb-4 opacity-10" }),
                    React.createElement("h3", { className: "font-black text-2xl mb-1 text-black" }, item.Áî¢ÂìÅÂêçÁ®±),
                    React.createElement("p", { className: "text-slate-500 text-xs mb-2 font-bold" }, item.Ë™™Êòé),
                    React.createElement("div", { className: "inline-block bg-[#FCD34D] px-4 py-1 rounded-full border-2 border-black transform -rotate-2 mt-2" }, React.createElement("p", { className: "text-black font-black text-xl" }, `$${item.Áî¢ÂìÅÂÉπÊ†º}`))
                ),
                
                // Content Body
                React.createElement("div", { className: "pb-4" },
                    isPasta && React.createElement("div", { className: "mb-6" }, 
                        React.createElement("p", { className: "text-sm font-black mb-3 text-black" }, "‚óè È∫µÊ¢ùÁ®ÆÈ°û (ÂøÖÈÅ∏)"), 
                        React.createElement("div", { className: "grid grid-cols-2 gap-3" }, 
                            noodleOptions.map(t => React.createElement(ComicButton, { key: t.name, active: pasta.type === t.name, onClick: () => setPasta({ type: t.name, price: t.p }) }, `${t.name} ${t.p > 0 ? `+$${t.p}` : ''}`))
                        )
                    ),
                    
                    React.createElement("div", { className: "mb-6" }, 
                        React.createElement("p", { className: "text-sm font-black mb-3 text-black" }, "‚óè ÂçáÁ¥öÂ•óÈ§ê (ÂèØÈÅ∏)"), 
                        React.createElement("div", { className: "space-y-3" }, 
                            comboOptions.map(c => React.createElement("button", { 
                                key: c.name, 
                                onClick: () => setCombo({ name: c.name, price: c.p }),
                                className: `w-full text-left p-3 rounded-xl border-2 border-black transition-all flex justify-between items-center ${combo.name === c.name ? 'bg-[#BAE6FD] shadow-[2px_2px_0px_0px_black]' : 'bg-white'}`
                            }, 
                                React.createElement("div", null, 
                                    React.createElement("p", { className: "font-black text-sm" }, c.name),
                                    c.desc && React.createElement("p", { className: "text-[10px] text-slate-500 font-bold" }, c.desc)
                                ),
                                c.p > 0 && React.createElement("span", { className: "font-black text-sm bg-black text-white px-2 py-1 rounded-md" }, `+$${c.p}`)
                            ))
                        )
                    ),

                    combo.name !== 'ÂñÆÈªû' && React.createElement("div", { className: "mb-6" }, 
                        React.createElement("p", { className: "text-sm font-black mb-3 text-black" }, "‚óè ÈôÑÈ§êÈ£≤ÂìÅ (ÂøÖÈÅ∏)"), 
                        React.createElement("div", { className: "grid grid-cols-2 gap-3" }, 
                            drinkOptions.map(d => React.createElement(ComicButton, { key: d.name, active: drink.name === d.name, onClick: () => setDrink({ name: d.name, price: d.p }) }, `${d.name} ${d.p > 0 ? `+$${d.p}` : ''}`))
                        )
                    )
                ),

                // Footer Actions
                React.createElement("div", { className: "flex items-center gap-4 mt-4 pt-4 border-t-2 border-dashed border-black sticky bottom-0 bg-white" },
                    React.createElement("div", { className: "flex items-center gap-4 bg-white rounded-full px-2 border-2 border-black shadow-[4px_4px_0px_0px_black]" }, React.createElement("button", { onClick: () => setQty(Math.max(1, qty-1)), className: "w-10 h-10 flex items-center justify-center font-black text-xl hover:bg-slate-100 rounded-full" }, "-"), React.createElement("span", { className: "font-black text-xl w-8 text-center" }, qty), React.createElement("button", { onClick: () => setQty(qty+1), className: "w-10 h-10 flex items-center justify-center font-black text-xl hover:bg-slate-100 rounded-full" }, "+")),
                    React.createElement("button", { onClick: handleAdd, className: `flex-1 comic-btn-primary py-3 ${(!isPasta||pasta.type)&&(combo.name==='ÂñÆÈªû'||drink.name) ? '' : 'opacity-80'}` }, React.createElement("div", { className: "flex flex-col leading-none" }, React.createElement("span", { className: "text-lg" }, "Âä†ÂÖ•È†êÈªû"), React.createElement("span", { className: "text-xs opacity-90" }, `Á∏ΩË®à $${currentPrice * qty}`)))
                )
            )
        );
    };

    // Custom Calendar Component for Date Selection
    const CalendarModal = ({ onClose, onSelect, restSettings }) => {
        const [viewDate, setViewDate] = useState(new Date());

        const getDaysInMonth = (year, month) => {
            return new Date(year, month + 1, 0).getDate();
        };

        const getFirstDayOfMonth = (year, month) => {
            return new Date(year, month, 1).getDay();
        };

        const generateCalendarDays = () => {
            const year = viewDate.getFullYear();
            const month = viewDate.getMonth();
            const daysInMonth = getDaysInMonth(year, month);
            const firstDay = getFirstDayOfMonth(year, month);
            
            const days = [];
            
            // Add empty slots for days before the first day of the month
            for (let i = 0; i < firstDay; i++) {
                days.push(null);
            }
            
            // Add days of the month
            for (let i = 1; i <= daysInMonth; i++) {
                days.push(new Date(year, month, i));
            }
            
            return days;
        };

        const isDateDisabled = (date) => {
            if (!date) return true;
            
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            // Disable past dates
            if (date < today) return true;
            
            // Disable Mondays (day 1)
            if (date.getDay() === 1) return true;
            
            // Disable Rest Period
            if (restSettings?.RestStartDate && restSettings?.RestEndDate) {
                // Parse date strings "YYYY-MM-DD" safely to local Date
                const parseLocal = (s) => {
                    if(!s) return null;
                    const [y,m,d] = s.split('-').map(Number);
                    return new Date(y, m-1, d);
                };

                const restStart = parseLocal(restSettings.RestStartDate);
                const restEnd = parseLocal(restSettings.RestEndDate);
                
                if (restStart && restEnd) {
                    restEnd.setHours(23, 59, 59, 999);
                    if (date >= restStart && date <= restEnd) return true;
                }
            }
            return false;
        };
        
        const changeMonth = (offset) => {
            const newDate = new Date(viewDate.getFullYear(), viewDate.getMonth() + offset, 1);
            setViewDate(newDate);
        };

        const days = generateCalendarDays();
        const weekDays = ['Êó•', '‰∏Ä', '‰∫å', '‰∏â', 'Âõõ', '‰∫î', 'ÂÖ≠'];

        return React.createElement("div", { className: "fixed inset-0 z-[10000] flex items-center justify-center p-4" },
            React.createElement("div", { className: "absolute inset-0 bg-black/60", onClick: onClose }),
            React.createElement("div", { className: "bg-white w-full max-w-sm rounded-2xl border-4 border-black shadow-[8px_8px_0px_0px_rgba(0,0,0,1)] relative z-10 overflow-hidden" },
                React.createElement("div", { className: "bg-[#FCD34D] p-4 border-b-4 border-black flex justify-between items-center" },
                    React.createElement("button", { onClick: () => changeMonth(-1), className: "p-2 hover:bg-white/50 rounded-full transition-colors" }, React.createElement(Icon, { name: "chevronLeft", className: "w-6 h-6" })),
                    React.createElement("span", { className: "font-black text-xl" }, `${viewDate.getFullYear()}Âπ¥ ${viewDate.getMonth() + 1}Êúà`),
                    React.createElement("button", { onClick: () => changeMonth(1), className: "p-2 hover:bg-white/50 rounded-full transition-colors" }, React.createElement(Icon, { name: "chevronRight", className: "w-6 h-6" }))
                ),
                React.createElement("div", { className: "p-4" },
                    React.createElement("div", { className: "grid grid-cols-7 mb-2" },
                        weekDays.map(d => React.createElement("div", { key: d, className: "text-center font-black text-slate-500 text-sm py-2" }, d))
                    ),
                    React.createElement("div", { className: "grid grid-cols-7 gap-1" },
                        days.map((date, idx) => {
                            if (!date) return React.createElement("div", { key: `empty-${idx}` });
                            const disabled = isDateDisabled(date);
                            const isToday = new Date().toDateString() === date.toDateString();
                            
                            // Format date for value passing YYYY-MM-DD
                            const yyyy = date.getFullYear();
                            const mm = String(date.getMonth() + 1).padStart(2, '0');
                            const dd = String(date.getDate()).padStart(2, '0');
                            const dateStr = `${yyyy}-${mm}-${dd}`;

                            return React.createElement("button", {
                                key: idx,
                                disabled: disabled,
                                onClick: () => !disabled && onSelect(dateStr),
                                className: `
                                    h-10 flex items-center justify-center rounded-lg font-bold text-sm transition-all
                                    ${disabled 
                                        ? 'bg-slate-100 text-slate-300 cursor-not-allowed' 
                                        : isToday
                                            ? 'bg-black text-white' 
                                            : 'hover:bg-yellow-100 hover:text-black hover:font-black'
                                    }
                                `
                            }, date.getDate());
                        })
                    )
                ),
                React.createElement("div", { className: "p-4 border-t-2 border-dashed border-black bg-slate-50 text-center" },
                     React.createElement("p", { className: "text-xs font-bold text-slate-400" }, "ÁÅ∞Ëâ≤Êó•ÊúüÁÇ∫ÂÖ¨‰ºëÊàñÂ∑≤ÈÅéÊúü")
                )
            )
        );
    };

    const BookingView = ({ profile, data, onComplete, cart, onClearCart, setView, setPendingBooking, pendingBooking, navigateToMenu }) => {
         // ... existing BookingView state ...
         const [form, setForm] = useState(pendingBooking || { 
            date: "", time: "11:30", adults: 2, children: 0, highChairs: 0, vegetarian: false,
            name: data.member?.ÂßìÂêç || profile?.displayName || "", 
            phone: data.member?.ÈõªË©±?.replace(/'/g,'') || "", notes: "" 
          });
         const [loading, setLoading] = useState(false);
         const [showCalendar, setShowCalendar] = useState(false); // State to toggle calendar

         const times = ['11:00','11:30','12:00','12:30','13:00','17:00','17:30','18:00','18:30','19:00','19:30'];
         
         const handleDateSelect = (dateStr) => {
             setForm({...form, date: dateStr, time: ""});
             setShowCalendar(false);
         };

         const handleBooking = async () => {
            if (!data.member && profile && profile.userId !== 'GUEST') {
               return Swal.fire({ title: 'Ë´ãÂÖàË®ªÂÜä', text: 'Á∑ö‰∏äË®Ç‰ΩçÈúÄÂÖàÂä†ÂÖ•ÊúÉÂì°ÔºåÊñπÂèØ‰∫´ÊúâÊúÉÂì°Ê¨äÁõä', icon: 'info', showCancelButton: true, confirmButtonText: 'ÂâçÂæÄË®ªÂÜä', confirmButtonColor: '#000' }).then(r => { if(r.isConfirmed) setView('MEMBER'); });
            }
            if (!form.date) return Swal.fire('Ë´ãÈÅ∏ÊìáÊó•Êúü', '', 'warning');
            if (!form.time) return Swal.fire('Ë´ãÈÅ∏ÊìáÊôÇÈñì', '', 'warning');
            if (!form.phone || !isValidPhone(form.phone)) return Swal.fire('ÊâãÊ©üÊ†ºÂºèÈåØË™§', 'Ë´ãËº∏ÂÖ• 09 ÈñãÈ†≠ 10 Á¢º', 'warning');
            
            setLoading(true);
            const preOrderStr = cart.map(i => `${i.Áî¢ÂìÅÂêçÁ®±}${i.desc ? `(${i.desc})` : ''} x${i.qty}`).join('\n');
            const cleanPhone = form.phone.replace(/\D/g, '');
            const res = await runGAS('booking', { ...form, phone: cleanPhone, notes: form.notes + (form.vegetarian?'(Á¥†)':''), lineUserId: profile?.userId, preOrder: preOrderStr });
            setLoading(false);
            if (res.status === 'success') {
                if(cart.length>0) onClearCart();
                setPendingBooking(null);
                // Send LIFF Message
                if(data.settings?.EnableLineNotify === 'true' && window.liff && window.liff.isInClient()) {
                    try {
                        await window.liff.sendMessages([{ type: 'text', text: `„ÄêË®Ç‰ΩçÁ¢∫Ë™ç„Äë\n\nÊÑüË¨ùÊÇ®ÁöÑÈ†êÁ¥ÑÔºÅ\n\nË®Ç‰Ωç‰ª£ËôüÔºö${res.bookingCode}\nÊó•ÊúüÔºö${form.date}\nÊôÇÈñìÔºö${form.time}\n‰∫∫Êï∏Ôºö${form.adults}Â§ß${form.children}Â∞è\n\nË´ã‰øùÁïôÊ≠§Ë®äÊÅØÔºåÁî®È§êÊôÇÂá∫Á§∫„ÄÇ` }]);
                    } catch(e) { console.error('LIFF send error', e); }
                }
                Swal.fire({title:'È†êÁ¥ÑÊàêÂäü', html:`ÊÇ®ÁöÑË®Ç‰Ωç‰ª£Ëôü: <b>${res.bookingCode}</b><br>Ë´ãÊà™Âúñ‰øùÂ≠ò`, icon:'success'}).then(onComplete);
            } else {
                Swal.fire({ icon: 'error', title: 'È†êÁ¥ÑÂ§±Êïó', text: res.message, confirmButtonColor: '#EF4444' });
            }
         };

         const cartTotal = cart.reduce((acc, item) => acc + (item.finalPrice * item.qty), 0);
         const handleChildrenChange = (newChildren) => {
             const validChildren = Math.max(0, newChildren);
             setForm(prev => ({ ...prev, children: validChildren, highChairs: Math.min(prev.highChairs, validChildren) }));
         };
         const handleHighChairChange = (delta) => {
             const newCount = form.highChairs + delta;
             if (newCount < 0 || newCount > form.children) return;
             setForm(prev => ({...prev, highChairs: newCount}));
         };

         return React.createElement("div", { className: "p-6 space-y-8 animate-fade-in pb-32" },
             React.createElement("div", { className: "flex items-center justify-center gap-2 mb-2" }, React.createElement(Icon, { name: "calendar", className: "w-8 h-8 text-black" }), React.createElement("h3", { className: "font-black text-3xl text-black tracking-wider" }, "Á∑ö‰∏äÈ†êÁ¥Ñ")),
             
             React.createElement("div", { className: "comic-box p-6 bg-white relative" },
                 React.createElement("div", { className: "absolute -top-4 left-4 bg-[#F9A8D4] border-2 border-black px-3 py-1 rounded-lg shadow-[2px_2px_0px_0px_black] transform -rotate-2" }, React.createElement("span", { className: "font-black text-sm" }, "STEP 1: ÈÅ∏ÊìáÊôÇÈñì")),
                 React.createElement("div", { className: "mt-4 space-y-4" },
                     React.createElement("label", { className: "block text-sm font-bold text-slate-500" }, "È†êÁ¥ÑÊó•Êúü (ÈÄ±‰∏ÄÂÖ¨‰ºë)"),
                     
                     // Custom Calendar Trigger replacing native input
                     React.createElement("div", { 
                         onClick: () => setShowCalendar(true),
                         className: "comic-input text-center text-lg tracking-widest bg-yellow-50 cursor-pointer flex items-center justify-center h-[58px]" 
                     }, form.date || React.createElement("span", { className: "text-slate-400 text-sm" }, "ÈªûÊìäÈÅ∏ÊìáÊó•Êúü")),
                     
                     React.createElement("div", { className: "mt-6" },
                        React.createElement("label", { className: "block text-sm font-bold text-slate-500 mb-3" }, `È†êÁ¥ÑÊôÇÊÆµ (ÈúÄÊèêÂâç ${data.settings?.BookingLeadTime || 2} Â∞èÊôÇ)`),
                        form.date ? React.createElement("div", { className: "grid grid-cols-3 gap-3" }, times.map(t => {
                            const [h, m] = t.split(':').map(Number);
                            const leadTime = parseInt(data.settings?.BookingLeadTime || 2);
                            const slotTime = new Date(`${form.date}T${t}`);
                            const minTime = new Date();
                            minTime.setHours(minTime.getHours() + leadTime);
                            const isTooSoon = slotTime < minTime;
                            return React.createElement("button", { key: t, disabled: isTooSoon, onClick: () => setForm({...form, time: t}), className: `py-2 rounded-xl text-xs font-black border-2 transition-all flex flex-col items-center justify-center h-14 ${form.time===t?'bg-black text-white border-black shadow-[4px_4px_0px_0px_#FCD34D] transform -translate-y-1': isTooSoon ? 'bg-slate-100 text-slate-300 border-slate-200 cursor-not-allowed' : 'bg-white text-black border-black hover:bg-yellow-50'}` }, React.createElement("span", { className: "text-sm" }, t));
                        })) : React.createElement("div", { className: "text-center text-slate-400 font-bold border-2 border-dashed border-slate-300 rounded-xl p-4" }, "Ë´ãÂÖàÈÅ∏ÊìáÊó•Êúü")
                     )
                 )
             ),
             
             // Render Calendar Modal
             showCalendar && React.createElement(CalendarModal, { 
                 onClose: () => setShowCalendar(false), 
                 onSelect: handleDateSelect,
                 restSettings: data.settings
             }),

             React.createElement("div", { className: "comic-box p-6 bg-white relative" },
                  React.createElement("div", { className: "absolute -top-4 right-4 bg-[#BAE6FD] border-2 border-black px-3 py-1 rounded-lg shadow-[2px_2px_0px_0px_black] transform rotate-1" }, React.createElement("span", { className: "font-black text-sm" }, "STEP 2: Áî®È§ê‰∫∫Êï∏")),
                  React.createElement("div", { className: "space-y-6 mt-4" },
                      React.createElement("div", { className: "flex justify-between items-center" }, React.createElement("span", { className: "font-black text-xl text-black" }, "Â§ß‰∫∫"), React.createElement("div", { className: "flex items-center gap-4" }, React.createElement("button", { onClick: ()=>setForm({...form, adults: Math.max(1, form.adults-1)}), className: "comic-stepper" }, "-"), React.createElement("span", { className: "text-2xl font-black w-8 text-center" }, form.adults), React.createElement("button", { onClick: ()=>setForm({...form, adults: form.adults+1}), className: "comic-stepper" }, "+"))),
                      React.createElement("div", { className: "flex justify-between items-center" }, React.createElement("span", { className: "font-black text-xl text-black" }, "Â∞èÂ≠©"), React.createElement("div", { className: "flex items-center gap-4" }, React.createElement("button", { onClick: ()=>handleChildrenChange(form.children-1), className: "comic-stepper" }, "-"), React.createElement("span", { className: "text-2xl font-black w-8 text-center" }, form.children), React.createElement("button", { onClick: ()=>handleChildrenChange(form.children+1), className: "comic-stepper" }, "+"))),
                      React.createElement("div", { className: "flex justify-between items-center pt-4 border-t-2 border-dashed border-slate-200" }, React.createElement("div", null, React.createElement("span", { className: "font-black text-xl text-black block" }, "ÂÖíÁ´•Ê§Ö"), React.createElement("span", { className: "text-[10px] text-slate-500 font-bold" }, "‰∏äÈôêÁÇ∫Â∞èÂ≠©‰∫∫Êï∏")), React.createElement("div", { className: "flex items-center gap-4" }, React.createElement("button", { onClick: ()=>handleHighChairChange(-1), className: "comic-stepper" }, "-"), React.createElement("span", { className: "text-2xl font-black w-8 text-center" }, form.highChairs), React.createElement("button", { onClick: ()=>handleHighChairChange(1), className: `comic-stepper ${form.highChairs >= form.children ? 'opacity-50' : ''}` }, "+")))
                  )
             ),

             React.createElement("div", { className: "comic-box p-6 bg-white relative" },
                  React.createElement("div", { className: "absolute -top-4 left-1/2 -translate-x-1/2 bg-[#FEF08A] border-2 border-black px-3 py-1 rounded-lg shadow-[2px_2px_0px_0px_black]" }, React.createElement("span", { className: "font-black text-sm" }, "STEP 3: ËÅØÁµ°Ë≥áÊñô")),
                  React.createElement("div", { className: "space-y-4 mt-6" },
                      React.createElement("div", null, React.createElement("label", { className: "block text-xs font-bold ml-2 mb-1" }, "È†êÁ¥Ñ‰∫∫ÂßìÂêç"), React.createElement("input", { className: "comic-input", placeholder: "Ë´ãËº∏ÂÖ•ÂßìÂêç", value: form.name, onChange: e=>setForm({...form, name: e.target.value}) })),
                      React.createElement("div", null, React.createElement("label", { className: "block text-xs font-bold ml-2 mb-1" }, "ÊâãÊ©üËôüÁ¢º"), React.createElement("input", { className: "comic-input", type: "tel", placeholder: "09xx...", value: form.phone, onChange: e=>setForm({...form, phone: e.target.value}) })),
                      React.createElement("div", null, React.createElement("label", { className: "block text-xs font-bold ml-2 mb-1" }, "ÂÇôË®ª (ÈÅ∏Â°´)"), React.createElement("textarea", { className: "comic-input h-24", placeholder: "Â¶ÇÔºöÊÖ∂Áîü„ÄÅÈÅéÊïè...", value: form.notes, onChange: e=>setForm({...form, notes: e.target.value}) }))
                  )
             ),

             cart.length > 0 ? React.createElement("div", { className: "comic-box p-4 bg-[#FEF3C7]" },
                React.createElement("div", { className: "flex justify-between items-center mb-2" }, React.createElement("h4", { className: "font-black text-black flex items-center gap-2" }, React.createElement(Icon, { name: "menu", className: "w-5 h-5" }), "È†êÈªûÈ§êÈªû"), React.createElement("button", { onClick: () => navigateToMenu('ÂÖ®ÈÉ®È§êÈªû'), className: "text-xs font-black bg-white border-2 border-black px-3 py-1 rounded-full shadow-[2px_2px_0px_0px_black] active:translate-y-0.5 active:shadow-none transition-all" }, "‰øÆÊîπ")),
                React.createElement("div", { className: "divide-y-2 divide-black/10" }, cart.map((item, idx) => React.createElement("div", { key: idx, className: "py-2 flex justify-between text-sm" }, React.createElement("div", null, React.createElement("p", { className: "font-bold text-black" }, item.Áî¢ÂìÅÂêçÁ®±, React.createElement("span", { className: "text-slate-500 ml-1" }, `x${item.qty}`)), React.createElement("p", { className: "text-xs text-slate-500" }, item.desc || item.noodle)), React.createElement("span", { className: "font-black font-mono" }, `$${item.finalPrice * item.qty}`)))),
                React.createElement("div", { className: "pt-2 flex justify-between items-center font-black text-lg border-t-2 border-black mt-2" }, React.createElement("span", null, "Á∏ΩË®à"), React.createElement("span", { className: "text-red-600" }, `$${cartTotal}`))
             ) : React.createElement("button", { onClick: ()=>navigateToMenu('ÂÖ®ÈÉ®È§êÈªû'), className: "w-full py-4 rounded-2xl border-2 border-dashed border-black text-slate-500 font-bold bg-white hover:bg-slate-50 transition-colors flex items-center justify-center gap-2" }, React.createElement(Icon, { name: "plus", className: "w-5 h-5" }), "Â¢ûÂä†È†êÈªûÈ§êÈªû (ÊúÉÂì°ÈôêÂÆö)"),

             React.createElement("button", { onClick: handleBooking, disabled: loading, className: "comic-btn-primary text-xl" }, loading ? "ËôïÁêÜ‰∏≠..." : React.createElement("span", { className: "flex items-center gap-2" }, "Á¢∫Ë™çÈ†êÁ¥Ñ", React.createElement(Icon, { name: "check", className: "w-6 h-6" })))
         );
    };

    const HomeView = ({ data, setView, navigateToMenu }) => {
        const promos = (data.promotions && data.promotions.length > 0) ? data.promotions : MOCK_PROMOS;
        return React.createElement("div", { className: "animate-fade-in pb-32 p-6" },
            React.createElement("div", { className: "comic-box p-0 mb-8 overflow-hidden relative group cursor-pointer" },
               React.createElement("div", { className: "aspect-video relative" },
                   React.createElement("img", { src: "https://i.ibb.co/qLFg7gSk/Gemini-Generated-Image-cmj4yzcmj4yzcmj4.png", className: "w-full h-full object-cover group-hover:scale-105 transition-transform duration-700" }),
                   React.createElement("div", { className: "absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent flex items-end p-6" },
                     React.createElement("div", null, React.createElement("h3", { className: "text-white font-black text-3xl tracking-wider drop-shadow-md" }, "ÈÅìÂú∞Áæ©ÂºèÔºåÈáëÈñÄÈ£ÑÈ¶ô"), React.createElement("div", { className: "inline-block bg-[#FCD34D] text-black text-xs font-black px-2 py-1 mt-2 border-2 border-black transform -rotate-1" }, "SANOVA KITCHEN"))
                   )
               )
            ),
            React.createElement("div", { className: "grid grid-cols-2 gap-4 mb-8" },
                [
                    { id: 'BOOKING', label: 'Á∑ö‰∏äË®Ç‰Ωç', icon: 'calendar', bg: 'bg-[#FCA5A5]', sub: 'BOOKING' },
                    { id: 'MENU', label: 'ÁÄèË¶ΩËèúÂñÆ', icon: 'menu', bg: 'bg-[#FCD34D]', sub: 'MENU', action: () => navigateToMenu('Á∏ΩË¶Ω') },
                    { id: 'MEMBER', label: 'ÊúÉÂì°‰∏≠ÂøÉ', icon: 'user', bg: 'bg-[#BAE6FD]', sub: 'MEMBER' },
                    { id: 'INFO', label: 'Â∫óÂÆ∂Ë≥áË®ä', icon: 'info', bg: 'bg-[#86EFAC]', sub: 'INFO' },
                    { id: 'PROMO', label: 'Ê¥ªÂãïÂÑ™ÊÉ†', icon: 'sparkles', bg: 'bg-[#F9A8D4]', sub: 'NEWS', action: () => document.getElementById('news-section').scrollIntoView({ behavior: 'smooth' }) },
                    { id: 'FAQ', label: 'Â∏∏Ë¶ãÂïèÈ°å', icon: 'question', bg: 'bg-[#CBD5E1]', sub: 'FAQ' }
                ].map(btn => React.createElement("button", { 
                    key: btn.id, onClick: btn.action || (() => setView(btn.id)),
                    className: `comic-box p-4 flex flex-col items-center justify-center gap-3 active:scale-95 active:shadow-none transition-all ${btn.bg}`
                }, React.createElement("div", { className: "bg-white p-3 rounded-full border-2 border-black" }, React.createElement(Icon, { name: btn.icon, className: "w-6 h-6 text-black" })), React.createElement("div", { className: "text-center" }, React.createElement("p", { className: "font-black text-lg text-black leading-tight" }, btn.label), React.createElement("p", { className: "text-[10px] font-black opacity-60 tracking-widest mt-1" }, btn.sub))))
            ),
            React.createElement("div", { id: "news-section", className: "mb-8" },
              React.createElement("h3", { className: "font-black text-2xl mb-4 pl-2 text-black flex items-center gap-2" }, React.createElement("span", null, "üî•"), "ÊúÄÊñ∞Ê¥ªÂãï"),
              React.createElement("div", { className: "flex overflow-x-auto gap-4 no-scrollbar px-2 pb-4" },
                promos.map((p, i) => React.createElement("div", { key: i, className: "w-72 flex-shrink-0 comic-box p-0 overflow-hidden" },
                  React.createElement("div", { className: "h-40 overflow-hidden border-b-2 border-black" }, React.createElement("img", { src: p.ÂúñÁâáÁ∂≤ÂùÄ, className: "w-full h-full object-cover" })),
                  React.createElement("div", { className: "p-5 bg-white" }, React.createElement("span", { className: "text-[10px] bg-black text-white px-2 py-1 font-bold mb-2 inline-block rounded" }, p.È°ûÂûã || 'NEWS'), React.createElement("h4", { className: "font-black text-lg text-black mb-1" }, p.Ê®ôÈ°å), React.createElement("p", { className: "text-xs text-slate-500 mt-1 leading-relaxed font-bold" }, p.ÂÖßÂÆπ))
                ))
              )
            )
        );
    };
    
    const App = () => {
      const [view, setView] = useState('HOME');
      const [data, setData] = useState({ faqs: MOCK_FAQS, promotions: MOCK_PROMOS });
      const [profile, setProfile] = useState(null);
      const [cart, setCart] = useState([]);
      const [pendingBooking, setPendingBooking] = useState(null);
      const [menuDefaultCat, setMenuDefaultCat] = useState('Á∏ΩË¶Ω');
      const [selectedProduct, setSelectedProduct] = useState(null); // State Lifted Up for Modal

      useEffect(() => {
        const init = async () => {
             const liffPromise = new Promise(resolve => {
                 if(window.liff) {
                     window.liff.init({ liffId: LIFF_ID }).then(() => {
                         if(!window.liff.isLoggedIn() && window.liff.isInClient()) window.liff.login();
                         else if (window.liff.isLoggedIn()) resolve(window.liff.getProfile());
                         else resolve(null);
                     }).catch(e => { console.warn('LIFF Init Error', e); resolve(null); });
                 } else resolve(null);
             });
             const timeoutPromise = new Promise(r => setTimeout(() => r(null), 3000));
             try {
                 let p = await Promise.race([liffPromise, timeoutPromise]);
                 if(!p) p = { userId: 'GUEST', displayName: 'Ë®™ÂÆ¢', pictureUrl: 'https://cdn-icons-png.flaticon.com/512/149/149071.png' };
                 setProfile(p);
                 const res = await runGAS('getInitialData', { lineUserId: p.userId });
                 if(res.status === 'success') setData({ ...res, faqs: res.faqs || MOCK_FAQS, promotions: res.promotions || MOCK_PROMOS });
             } catch(e) { console.error(e); }
             finally { const el = document.getElementById('loading-overlay'); if(el) el.style.display = 'none'; }
        };
        init();
      }, []);

      const addToCart = (item) => setCart([...cart, item]);
      const clearCart = () => setCart([]);
      const handlePreorderSubmit = async () => { if (pendingBooking) setView('BOOKING'); };
      
      const navigateToMenu = (category) => {
          setMenuDefaultCat(category);
          setView('MENU');
      };
      
      const handleAddToCartFromModal = (item, options, finalPrice, qty) => {
           addToCart({ ...item, options, finalPrice, qty, desc: [options.pastaType, ...(options.addons || []), options.drink].filter(Boolean).join(' / ') });
           setSelectedProduct(null);
           Swal.fire({toast:true, position:'top', icon:'success', title:'Â∑≤Âä†ÂÖ•È†êÈªû', timer:1000, showConfirmButton:false});
      };

      const renderView = () => {
          if (view === 'ADMIN') return React.createElement(AdminView, { profile, setView });
          if (view === 'BOOKING') return React.createElement(BookingView, { profile, data, onComplete: ()=>setView('HOME'), cart, onClearCart: clearCart, setView, setPendingBooking, pendingBooking, navigateToMenu });
          if (view === 'MENU') return React.createElement(MenuView, { menu: data.restaurantMenu, addToCart, cart, setView, onSubmitPreorder: pendingBooking ? handlePreorderSubmit : null, defaultCategory: menuDefaultCat, onSelectProduct: setSelectedProduct });
          if (view === 'INFO') return React.createElement(InfoView, { data });
          if (view === 'FAQ') return React.createElement(FaqView, { data });
          if (view === 'MEMBER') return React.createElement(MemberView, { data, profile, setView });
          return React.createElement(HomeView, { data, setView, navigateToMenu });
      };

      if (!profile) return null; 
      const isAdminPage = view === 'ADMIN';
      return React.createElement("div", { className: isAdminPage ? "max-w-md mx-auto min-h-screen bg-slate-100" : "max-w-md mx-auto min-h-screen relative shadow-2xl border-x-4 border-black", style: isAdminPage ? { maxWidth: '100%' } : { backgroundColor: '#FFFBEB' } },
        !isAdminPage && React.createElement("div", { className: "bg-[#FEF08A] px-6 py-4 sticky top-0 z-30 flex justify-between items-center shadow-[0px_4px_0px_0px_black] border-b-4 border-black" }, React.createElement("div", null, React.createElement("h1", { className: "font-black text-black text-xl tracking-tighter" }, RESTAURANT_NAME), React.createElement("p", { className: "text-xs text-black font-bold mt-1" }, `${profile.displayName}ÔºåÊ≠°ËøéÊÇ®‰ΩøÁî®Á∑ö‰∏äË®Ç‰ΩçÁ≥ªÁµ±ÔºÅ`)), React.createElement("img", { src: profile.pictureUrl, className: "w-12 h-12 rounded-full border-2 border-black shadow-[2px_2px_0px_0px_black]", referrerPolicy: "no-referrer" })),
        renderView(),
        // Modal Rendered at ROOT level to avoid stacking context issues
        selectedProduct && React.createElement(ProductModal, { item: selectedProduct, onClose: () => setSelectedProduct(null), onAdd: handleAddToCartFromModal }),
        
        !isAdminPage && React.createElement("div", { className: "fixed bottom-6 inset-x-6 h-20 bg-white border-4 border-black rounded-full shadow-[6px_6px_0px_0px_black] flex items-center justify-around px-2 z-50" }, [{ id: 'HOME', icon: 'home', label: 'È¶ñÈ†Å' }, { id: 'MENU', icon: 'menu', label: 'ËèúÂñÆ', action: () => navigateToMenu('Á∏ΩË¶Ω') }, { id: 'BOOKING', icon: 'calendar', label: 'Ë®Ç‰Ωç' }, { id: 'INFO', icon: 'info', label: 'Ë≥áË®ä' }, { id: 'MEMBER', icon: 'user', label: 'ÊúÉÂì°' }].map(item => React.createElement("button", { key: item.id, onClick: item.action || (() => setView(item.id)), className: `flex flex-col items-center justify-center w-14 h-14 rounded-full transition-all duration-300 relative ${view === item.id ? 'bg-[#F9A8D4] text-black border-2 border-black -translate-y-4 shadow-[3px_3px_0px_0px_black] scale-110' : 'text-slate-400 hover:text-black'}` }, React.createElement("div", { className: "relative" }, React.createElement(Icon, { name: item.icon, className: "w-6 h-6" }), item.id === 'MENU' && cart.length > 0 && React.createElement("span", { className: "absolute -top-1 -right-1 w-3 h-3 bg-red-600 rounded-full border-2 border-white animate-pulse" })), view === item.id && React.createElement("span", { className: "text-[9px] font-black mt-1 absolute -bottom-6 opacity-0 animate-fade-in text-black bg-white px-2 rounded-md border border-black" }, item.label))))
      );
    };
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(React.createElement(App));
  </script>
</body>
</html>